                                IF1
                                .PRINTX .
                                .PRINTX +-------------------------------------+
                                .PRINTX |        FORTH MSX V2.10 (BIN)        |
                                .PRINTX |                                     |
                                .PRINTX |          (c)1989 - B.A.M.           |
                                .PRINTX +-------------------------------------+
                                .PRINTX .
                                .PRINTX Compilando ... Passo 1.
                                ELSE
                                .PRINTX .              Passo 2.
                                ENDIF
                                ;
                                   .Z80
                                ;
                         C         INCLUDE FORTHEQU.INC
                         C      ;
  F37E                   C      MSX_ROM_BDOS_VECTOR equ 0F37EH
  F37D                   C      MSX_BIOS            equ 0F37DH
                         C      ;
                         C      ; SUBROUTINES FOR READ/WRITE CALLS OF THE INTER-SLOT
                         C      ;
  F380                   C      MSX_RDPRIM  equ 0F380H ; Read from basic slot, used by RDSLT (0Ch) BIOS routine
  F385                   C      MSX_WRPRIM  equ 0F385H ; Write to basic slot, used by WRSLT (14h) BIOS routine
  F38C                   C      MSX_CLPRIM  equ 0F38CH ; Call basic slot, used by CALSLT (1Ch) BIOS routine
  F39A                   C      MSX_USR0TAB equ 0F39AH ; USR function starting USR(0)
  F39C                   C      MSX_USR1TAB equ 0F39CH ; USR function starting USR(1)
  F39E                   C      MSX_USR2TAB equ 0F39EH ; USR function starting USR(2)
  F3A0                   C      MSX_USR3TAB equ 0F3A0H ; USR function starting USR(3)
  F3A2                   C      MSX_USR4TAB equ 0F3A2H ; USR function starting USR(4)
  F3A4                   C      MSX_USR5TAB equ 0F3A4H ; USR function starting USR(5)
  F3A6                   C      MSX_USR6TAB equ 0F3A6H ; USR function starting USR(6)
  F3A8                   C      MSX_USR7TAB equ 0F3A8H ; USR function starting USR(7)
  F3AA                   C      MSX_USR8TAB equ 0F3AAH ; USR function starting USR(8)
  F3AC                   C      MSX_USR9TAB equ 0F3ACH ; USR function starting USR(9)
  F3AE                   C      MSX_LINL40  equ 0F3AEH ; Screen width per line in SCREEN 0 (Default 39)
  F3AF                   C      MSX_LINL32  equ 0F3AFH ; Screen width per line in SCREEN 1 (Default 29)
  F3B0                   C      MSX_LINLEN  equ 0F3B0H ; Current screen width per line
  F3B1                   C      MSX_CRTCNT  equ 0F3B1H ; Number of lines of current screen (default 24)
  F3B2                   C      MSX_CLMLST  equ 0F3B2H ; Horizontal location in the case that items are divided by commas in PRINT statement
                         C
                         C      ; WORK FOR INITIALIZATION
                         C
                         C      ; SCREEN 0
  F3B3                   C      MSX_TXTNAM equ 0F3B3H ; Pattern name table
  F3B5                   C      MSX_TXTCOL equ 0F3B5H ; Color table
  F3B7                   C      MSX_TXTCGP equ 0F3B7H ; Pattern ganarator table
  F3B9                   C      MSX_TXTATR equ 0F3B9H ; Unused
  F3BB                   C      MSX_TXTPAT equ 0F3BBH ; Unused
                         C
                         C      ; SCREEN 1
  F3BD                   C      MSX_T32NAM equ 0F3BDH ; Pattern name tabte
  F3BF                   C      MSX_T32COL equ 0F3BFH ; Color table
  F3C1                   C      MSX_T32CGP equ 0F3C1H ; Pattern ganarator table
  F3C3                   C      MSX_T32ATR equ 0F3C3H ; Sprite attribute table
  F3C5                   C      MSX_T32PAT equ 0F3C5H ; Sprite generator table
                         C
                         C      ; SCREEN 2
  F3C7                   C      MSX_GRPNAM equ 0F3C7H ; Pattern name tabte
  F3C9                   C      MSX_GRPCOL equ 0F3C9H ; Color table
  F3CB                   C      MSX_GRPCGP equ 0F3CBH ; Pattern ganarator table
  F3CD                   C      MSX_GRPATR equ 0F3CDH ; Sprite attribute table
  F3CF                   C      MSX_GRPPAT equ 0F3CFH ; Sprite generator table
                         C
                         C      ; SCREEN 3
  F3D1                   C      MSX_MLTNAM equ 0F3D1H ; Pattern name tabte
  F3D3                   C      MSX_MLTCOL equ 0F3D3H ; Color table
  F3D5                   C      MSX_MLTCGP equ 0F3D5H ; Pattern ganarator table
  F3D7                   C      MSX_MLTATR equ 0F3D7H ; Sprite attribute table
  F3D9                   C      MSX_MLTPAT equ 0F3D9H ; Sprite generator table
  F3DB                   C      MSX_CLIKSW equ 0F3DBH ; Key click switch 0 = Disabled / 1 = Enabled
  F3DC                   C      MSX_CSRY   equ 0F3DCH ; Y-coordinate of text cursor
  F3DD                   C      MSX_CSRX   equ 0F3DDH ; X-coordinate of text cursor
  F3DE                   C      MSX_CNSDFG equ 0F3DEH ; Functon key display switch 0 = NOT Visible / 1 = Visible
                         C
                         C      ; AREA TO SAVE VDP REGISTERS
                         C
  F3DF                   C      MSX_RG0SAV equ 0F3DFH ; Content of VDP(0) register (R#0)
  F3E0                   C      MSX_RG1SAV equ 0F3E0H ; Content of VDP(1) register (R#1)
  F3E1                   C      MSX_RG2SAV equ 0F3E1H ; Content of VDP(2) register (R#2)
  F3E2                   C      MSX_RG3SAV equ 0F3E2H ; Content of VDP(3) register (R#3)
  F3E3                   C      MSX_RG4SAV equ 0F3E3H ; Content of VDP(4) register (R#4)
  F3E4                   C      MSX_RG5SAV equ 0F3E4H ; Content of VDP(5) register (R#5)
  F3E5                   C      MSX_RG6SAV equ 0F3E5H ; Content of VDP(6) register (R#6)
  F3E6                   C      MSX_RG7SAV equ 0F3E6H ; Content of VDP(7) register (R#7)
  F3E7                   C      MSX_STATFL equ 0F3E7H ; Content of VDP(8) register (MSX2- VDP status register 0  S#0)
  F3E8                   C      MSX_TRGFLG equ 0F3E8H ; Stores trigger button status of joystick
                         C
                         C      ; Information about trigger buttons and space bar state
                         C      ; 7 6 5 4 3 2 1 0
                         C      ; | | | |       +-- Space bar, trig(0) (0 = pressed)
                         C      ; | | | +---------- Stick 1, Trigger 1 (0 = pressed)
                         C      ; | | +------------ Stick 1, Trigger 2 (0 = pressed)
                         C      ; | +-------------- Stick 2, Trigger 1 (0 = pressed)
                         C      ; +---------------- Stick 2, Trigger 2 (0 = pressed)
                         C
  F3E9                   C      MSX_FORCLR equ 0F3E9H ; Foreground colour
  F3EA                   C      MSX_BAKCLR equ 0F3EAH ; Background colour
  F3EB                   C      MSX_BDRCLR equ 0F3EBH ; Border colour
  F3EC                   C      MSX_MAXUPD equ 0F3ECH ; JMP 0000 (used by CIRCLE statement)
  F3EF                   C      MSX_MINUPD equ 0F3EFH ; JMP 0000 (used by CIRCLE statement)
  F3F2                   C      MSX_ATRBYT equ 0F3F2H ; Color code in csing graphic
                         C
                         C      ; WORK AREA FOR PLAY STATEMENT
                         C
  F3F3                   C      MSX_QUEUES equ 0F3F3H ; Points to queue table at the execution of PLAY st.
  F3F5                   C      MSX_FRCNEW equ 0F3F5H ; DB 255
                         C
                         C      ; WORK AREA FOR KEY INPUT
                         C
  F3F6                   C      MSX_SCNCNT equ 0F3F6H ; Interval for the key scan
  F3F7                   C      MSX_REPCNT equ 0F3F7H ; Delay until the auto-repeat of the key begins
  F3F8                   C      MSX_PUTPNT equ 0F3F8H ; DW KEYBUF points to adress to write in the key buffer
  F3FA                   C      MSX_GETPNT equ 0F3FAH ; DW KEYBUF points to adress to read from the key buffer
                         C
                         C      ; PARAMETERS FOR CASSETTE
                         C
  F3FC                   C      MSX_CS120_12  equ 0F3FCH ; DB LOW01,HIGH01,LOW11,HIGH11,HEDLEN*2/256 ; FOR 1200 BAUD
  F401                   C      MSX_CS120_24  equ 0F401H ; DB LOW02,HIGH02,LOW12,HIGH22,HEDLEN*2/256 ; FOR 2400 BAUD
  F406                   C      MSX_LOW       equ 0F406H ; DB LOW01,HIGH01    Width of LOW & HIGH wich represents bit 0
  F408                   C      MSX_HIGH      equ 0F408H ; DB LOW11,HIGH11    Width of LOW & HIGH wich represents bit 1
  F40A                   C      MSX_HEADER    equ 0F40AH ; DB HEDLEN*2/256    Header bit for the short header
  F40B                   C      MSX_ASPCT1    equ 0F40BH ; 256/aspect ratio for BASIC Circle command
  F40D                   C      MSX_ASPCT2    equ 0F40DH ; 256*aspect ratio for BASIC Circle command
  F40F                   C      MSX_ENDPGM    equ 0F40FH ; DB ":" Dummy program end for RESUME NEXT st.
                         C
                         C      ; WORK USED BY BASIC INTERNALLY
                         C
  F414                   C      MSX_ERRFLG equ 0F414H ; BASIC Error number
  F415                   C      MSX_LPTPOS equ 0F415H ; Position of printer head
  F416                   C      MSX_PRTFLG equ 0F416H ; Flag whether to send to printer 0 = Print to Screen / 1 = Print to printer
  F417                   C      MSX_NTMSXP equ 0F417H ; = 0 If MSX printer (This converts TAB's and unknown characters to spaces)
  F418                   C      MSX_RAWPRT equ 0F418H ; <>0 If printing is in 'RAW MODE'
  F419                   C      MSX_VLZADR equ 0F419H ; ADDRESS OF CHARACTER REPLACED BY VAL
  F41B                   C      MSX_VLZDAT equ 0F41BH ; CHARACTER REPLACED WITH 0 BY VAL
  F41C                   C      MSX_CURLIN equ 0F41CH ; Current execution line number of BASIC
  F41E                   C      MSX_KBFMIN equ 0F41EH ; Same as  ENDPRG, used if direct statement error occures
  F41F                   C      MSX_KBUF   equ 0F41FH ; Crunch buffer; translated into intermediate language from BUF
  F55D                   C      MSX_BUFMIN equ 0F55DH ; used by INPUT routine
  F55E                   C      MSX_BUF    equ 0F55EH ; Buffer to store characters typed( in ASCII code)
                         C
  F562                   C      MSX_SX_L    equ 0F562H ; VDP R# 32, Source X Low
  F563                   C      MSX_SX_H    equ 0F563H ; VDP R# 33, Source X High
  F564                   C      MSX_SY_L    equ 0F564H ; VDP R# 34, Source Y Low
  F565                   C      MSX_SY_H    equ 0F565H ; VDP R# 35, Source Y High
  F566                   C      MSX_DX_L    equ 0F566H ; VDP R# 36, Dest. X Low
  F567                   C      MSX_DX_H    equ 0F567H ; VDP R# 37, Dest. X High
  F568                   C      MSX_DY_L    equ 0F568H ; VDP R# 38, Dest. Y Low
  F569                   C      MSX_DY_H    equ 0F569H ; VDP R# 39, Dest. Y High
  F56A                   C      MSX_NX_L    equ 0F56AH ; VDP R# 40, Nr of dots X Low
  F56B                   C      MSX_NX_H    equ 0F56BH ; VDP R# 41, Nr of dots X High
  F56C                   C      MSX_NY_L    equ 0F56CH ; VDP R# 42, Nr of dots Y Low
  F56D                   C      MSX_NY_H    equ 0F56DH ; VDP R# 43, Nr of dots Y High
  F56E                   C      MSX_CDUMMY  equ 0F56EH ; VDP R# 44, Color register
  F56F                   C      MSX_VDP_ARG equ 0F56FH ; VDP R# 45, Argument register
  F570                   C      MSX_L_OP    equ 0F570H ; VDP R# 46, Command  register
                         C
                         C      ; The above Bit-blitten addresses are used by the COPY command in Basic.
                         C      ; The VDP is allso able to communicate with the DISKROM to
                         C      ; save or load images from or to VRAM.
                         C      ; A 2Byte filename pointer is expected in SX for Loading and DX for Writing operation.
                         C      ; i.e. FNAAM: DEFB 34,"d:filename.ext",34,0
                         C      ; See SUB-ROM / EXT-ROM  (BIT-BLIT routines)
                         C      ; L_OP has 10 different operators:
                         C      ; 0 -  PSET       1 -  AND
                         C      ; 2 -  OR         3 -  XOR
                         C      ; 4 -  PRESET     8 -  TPSET
                         C      ; 9 -  TAND       10 - TOR
                         C      ; 11 - TXOR       12 - TPRESET
                         C
  F660                   C      MSX_ENDBUF   equ 0F660H ; Preventoverflow of BUF
  F661                   C      MSX_TTYPOS   equ 0F661H ; Virtual cursor location internally retained by BASIC
  F662                   C      MSX_DIMFLG   equ 0F662H ; ARRAY FLAG
  F663                   C      MSX_VALTYP   equ 0F663H ; Contains the code of the type of variable that is currently in DAC
                         C
                         C      ; 2 = Integer
                         C      ; 3 = String
                         C      ; 4 = Single Precision
                         C      ; 5 = Double Precision
                         C
  F664                   C      MSX_DORES    equ 0F664H ; Indicates whether stored word can be crunched
  F665                   C      MSX_DONUM    equ 0F665H ; flag for crunch
  F666                   C      MSX_CONTXT   equ 0F666H ; Text address used by CNRGET
  F668                   C      MSX_CONSAV   equ 0F668H ; Store token of constant after calling CHRGET
  F669                   C      MSX_CONTYP   equ 0F669H ; Type of stored constant
  F66A                   C      MSX_CONLO    equ 0F66AH ; Valu of stored constant
  F672                   C      MSX_MEMSIZ   equ 0F672H ; HIGHEST LOCATION IN MEMORY USED BY BASIC
  F674                   C      MSX_STKTOP   equ 0F674H ; TOP LOCATION TO BE USED FOR THE STACK
  F676                   C      MSX_TXTTAB   equ 0F676H ; Starting address of BASIC text area
  F678                   C      MSX_TEMPPT   equ 0F678H ; Starting address of unused area of temporary descriptor
  F67A                   C      MSX_TEMPST   equ 0F67AH ; Temporary descriptors
  F698                   C      MSX_DSCTMP   equ 0F698H ; String descriptor wich is the result of string fun.
  F69B                   C      MSX_FRETOP   equ 0F69BH ; Starting address of unused area of string area
  F69D                   C      MSX_TEMP3    equ 0F69DH ; Used for garbage collection or by USR function
  F69F                   C      MSX_TEMP8    equ 0F69FH ; Used for garbage collection
  F6A1                   C      MSX_ENDFOR   equ 0F6A1H ; Next address of FOR st.
  F6A3                   C      MSX_DATLIN   equ 0F6A3H ; Line number of DATA st.read by READ st.
  F6A5                   C      MSX_SUBFLG   equ 0F6A5H ; Flag for array for USR fun.
  F6A6                   C      MSX_FLGINP   equ 0F6A6H ; Flag for INPUT or READ
  F6A7                   C      MSX_TEMP     equ 0F6A7H ; Location for temporary reservation for st.code
  F6A9                   C      MSX_PTRFLG   equ 0F6A9H ; LINE NUMBER CONVERTED TO POINTERS ( 00 = NO / 0D = Yes )
  F6AA                   C      MSX_AUTFLG   equ 0F6AAH ; AUTO MODE FLAG ( 00 = Yes / 01 = No )
  F6AB                   C      MSX_AUTLIN   equ 0F6ABH ; Current line number for auto
  F6AD                   C      MSX_AUTINC   equ 0F6ADH ; Increment for auto
  F6AF                   C      MSX_SAVTXT   equ 0F6AFH ; Text pointer for resume
  F6B1                   C      MSX_SAVSTK   equ 0F6B1H ; Save stack when error occurs
  F6B3                   C      MSX_ERRLIN   equ 0F6B3H ; Line where last error
  F6B5                   C      MSX_DOT      equ 0F6B5H ; CURRENT LINE for edit & list
  F6B7                   C      MSX_ERRTXT   equ 0F6B7H ; Text pointer for use by RESUME
  F6B9                   C      MSX_ONELIN   equ 0F6B9H ; LINE to go when error
  F6BB                   C      MSX_ONEFLG   equ 0F6BBH ; =1 if executing an error trap routine
  F6BC                   C      MSX_TEMP2    equ 0F6BCH ;
  F6BE                   C      MSX_OLDLIN   equ 0F6BEH ; OLD LINE NUMBER set up ^C ...
  F6C0                   C      MSX_OLDTXT   equ 0F6C0H ; Points st. to be executed next
  F6C2                   C      MSX_VARTAB   equ 0F6C2H ; Pointer to start of variable space
  F6C4                   C      MSX_ARYTAB   equ 0F6C4H ; Pointer to begging of array table
  F6C6                   C      MSX_STREND   equ 0F6C6H ; End of storage in use
  F6C8                   C      MSX_DATPTR   equ 0F6C8H ; DATA pointer
  F6CA                   C      MSX_DEFTBL   equ 0F6CAH ; Default valtype for each letter
                         C
                         C      ; WORK FOR USER FUNCTION PARAMETER
                         C
  F6E4                   C      MSX_PRMSTK   equ 0F6E4H ; Previous definition block on stack
  F6E6                   C      MSX_PRMLEN   equ 0F6E6H ; Number of bytes of objective table
  F6E8                   C      MSX_PARM1    equ 0F6E8H ; Objective prameter definition table
  F74C                   C      MSX_PRMPRV   equ 0F74CH ; Pointer to previous parameter block
  F74E                   C      MSX_PRMLN2   equ 0F74EH ; Size of parameter block
  F750                   C      MSX_PARM2    equ 0F750H ; For parameter storage
  F7B4                   C      MSX_PRMFLG   equ 0F7B4H ; Flag to indicate whether PARM1 was searching
  F7B5                   C      MSX_ARYTA2   equ 0F7B5H ; End point of search
  F7B7                   C      MSX_NOFUNS   equ 0F7B7H ; 0 if no function active
  F7B8                   C      MSX_TEMP9    equ 0F7B8H ; Location of temporary storage for garbage collection
  F7BA                   C      MSX_FUNACT   equ 0F7BAH ; Count of active functions
  F7BC                   C      MSX_SWPTMP   equ 0F7BCH ; Value of first  variable in SWAP st.
  F7C4                   C      MSX_TRCFLG   equ 0F7C4H ; 0 MEANS NO TRACE
                         C
                         C      ; WORK FOR MATH-PACK
                         C
  F7C5                   C      MSX_FBUFFR   equ 0F7C5H ; Buffer for fout
  F7F0                   C      MSX_DECTMP   equ 0F7F0H ; Used to transform decimal integer to floating point number
  F7F2                   C      MSX_DECTM2   equ 0F7F2H ; Used at division routine execution
  F7F4                   C      MSX_DECCNT   equ 0F7F4H ; Used at division routine execution
  F7F6                   C      MSX_DAC      equ 0F7F6H ; DECIMAL ACCUMULATOR (Interger in USR()-function stored to #F7F8)
  F806                   C      MSX_HOLD8    equ 0F806H ; Registers for decimal multiplication
  F836                   C      MSX_HOLD2    equ 0F836H ; Work area in the execution of numerical operators
  F83E                   C      MSX_HOLD     equ 0F83EH ; Work area in the execution of numerical operators
  F847                   C      MSX_DAC_ARG  equ 0F847H ; Area to set the value to be calculate with DAC
  F857                   C      MSX_RNDX     equ 0F857H ; Last random number
                         C
                         C      ; DATA AREA USED BY BASIC INTERPRETER
                         C
  F85F                   C      MSX_MAXFIL   equ 0F85FH ; High legal file number
  F860                   C      MSX_FILTAB   equ 0F860H ; Starting address of of file data area
  F862                   C      MSX_NULBUF   equ 0F862H ; Points to file 0 buffer ( used in SAVE & LOAD st.)
  F864                   C      MSX_PTRFIL   equ 0F864H ; Points to file data of currently accessing file
  F866                   C      MSX_RUNFLG   equ 0F866H ; Non-zero for run after load
  F866                   C      MSX_FILNAM   equ 0F866H ; Name for FILES, NAME & others
  F871                   C      MSX_FILNM2   equ 0F871H ; Second name for NAME
  F87C                   C      MSX_NLONLY   equ 0F87CH ; When loading  program ( 00 = NON BASIC / 01 = BASIC )
  F87D                   C      MSX_SAVEND   equ 0F87DH ; End address for BSAVE
  F87F                   C      MSX_FNKSTR   equ 0F87FH ; FUNCTION KEY AREA
  F91F                   C      MSX_CGPNT    equ 0F91FH ; Slot ID of the character FONT
  F920                   C      MSX_ADDPNT   equ 0F920H ; Address of the character FONT
  F922                   C      MSX_NAMBAS   equ 0F922H ; Base address of current pattern name table
  F924                   C      MSX_CGPBAS   equ 0F924H ; Base address of current pattern generator table
  F926                   C      MSX_PATBAS   equ 0F926H ; Base address of current sprite generator table
  F928                   C      MSX_ATRBAS   equ 0F928H ; Base address of current sprite attribute table
                         C
  F92A                   C      MSX_CLOC    equ 0F92AH ; Cursor Location
  F92C                   C      MSX_CMASK   equ 0F92CH ; Mask of Cursor
  F92D                   C      MSX_MINDEL  equ 0F92DH ; Used by LINE  command in BASIC
  F92F                   C      MSX_MAXDEL  equ 0F92FH ; Used by LINE  command in BASIC
                         C
                         C      ; DATA AREA FOR CIRCLE STATEMENT
                         C
  F931                   C      MSX_ASPECT   equ 0F931H ; Aspect ratio of the circle; set by <ratio> of CIRCLE
  F933                   C      MSX_CENCNT   equ 0F933H ; End count
  F935                   C      MSX_CLINEF   equ 0F935H ; Flag to draw line to centre
  F936                   C      MSX_CNPNTS   equ 0F936H ; Point to be plottted
  F938                   C      MSX_CPLOTF   equ 0F938H ; Plot polarity flag
  F939                   C      MSX_CPCNT    equ 0F939H ; 1/8 of number of points in circle
  F93B                   C      MSX_CPCNT8   equ 0F93BH ;
  F93D                   C      MSX_CRCSUM   equ 0F93DH ;
  F93F                   C      MSX_CSTCNT   equ 0F93FH ;
  F941                   C      MSX_CSCLXY   equ 0F941H ; Scale of X & Y
  F942                   C      MSX_CSAVEA   equ 0F942H ; reservation area of ADVGRP
  F944                   C      MSX_CSAVEM   equ 0F944H ; reservation area of ADVGRP
  F945                   C      MSX_CXOFF    equ 0F945H ; X offset from center
  F947                   C      MSX_CYOFF    equ 0F947H ; Y offset from center
                         C
                         C      ; DATA AREA FOR PAINT STATEMENT
                         C
  F949                   C      MSX_LOHMSK   equ 0F949H ; Used by PAINTcommand in BASIC
  F94A                   C      MSX_LOHDIR   equ 0F94AH ; Used by PAINTcommand in BASIC
  F94B                   C      MSX_LOHADR   equ 0F94BH ; Used by PAINTcommand in BASIC
  F94D                   C      MSX_LOHCNT   equ 0F94DH ; Used by PAINTcommand in BASIC
  F94F                   C      MSX_SKPCNT   equ 0F94FH ; Skip count,  Used by PAINTcommand in BASIC
  F951                   C      MSX_MOVCNT   equ 0F951H ; Movement count,  Used by PAINTcommand in BASIC
  F953                   C      MSX_PDIREC   equ 0F953H ; Direction of the paint, Used by PAINTcommand in BASIC
  F954                   C      MSX_LFPROG   equ 0F954H ; Used by PAINTcommand in BASIC
  F955                   C      MSX_RTPROG   equ 0F955H ; Used by PAINTcommand in BASIC
  F956                   C      MSX_MCLTAB   equ 0F956H ; Used by DRAW / PLAY command in BASIC
  F958                   C      MSX_MCLFLG   equ 0F958H ; Used by DRAW / PLAY command in BASIC
  F959                   C      MSX_QUETAB   equ 0F959H ; queue information  (VOICAQ, VOICBQ, VOICCQ and RS2IQ (RS232))
  F971                   C      MSX_QUEBAK   equ 0F971H ;
  F975                   C      MSX_VOICAQ   equ 0F975H ; 1st Voice of Play Buffer (PSG)
                         C
                         C      ; If MSX-Music is present area #F9C0-#F9F8 is used to store copy of YM2413 registers
                         C
  F9F5                   C      MSX_VOICBQ   equ 0F9F5H ; 2st Voice of Play Buffer (PSG)
  FA75                   C      MSX_VOICCQ   equ 0FA75H ; 3st Voice of Play Buffer (PSG)
  FAF5                   C      MSX_DPPAGE   equ 0FAF5H ; Display page number (SET PAGE X)
  FAF6                   C      MSX_ACPAGE   equ 0FAF6H ; active page number (SET PAGE ,X)
  FAF7                   C      MSX_AVCSAV   equ 0FAF7H ; Reserves AV control port
  FAF8                   C      MSX_EXBRSA   equ 0FAF8H ; SUB_ROM / EXT-ROM slot address
  FAF9                   C      MSX_CHRCNT   equ 0FAF9H ; Character counter in the buffer, used in KANA-ROM
  FAFA                   C      MSX_ROMA     equ 0FAFAH ; Area to store KANA character (Japan version only)
  FAFC                   C      MSX_MODE     equ 0FAFCH ; mode switch for VRAM size
  FAFD                   C      MSX_NORUSE   equ 0FAFDH ; unused <edit> Used by KANJI-ROM for rendering KANJI fonts in graphic modes:
                         C
                         C      ; 	bit 7 Don't return to textmode
                         C      ; 	bit 6 if 1 and #f7f4 (DECCNT)=0, read SHIFT status ???
                         C      ; 	bit 5 Disable some functinality
                         C      ; 	bit 4 Not in use
                         C      ; 	bit 3 color 0 = Transparent
                         C      ; 	BIT 0-2:  Logical operation on kanji font draw:
                         C      ; 		  0       PSET
                         C      ; 		  1       AND
                         C      ; 		  2       OR
                         C      ; 		  3       XOR
                         C      ; 		  4       NOT
                         C
  FAFE                   C      MSX_XSAVE    equ 0FAFEH ; [10000000 XXXXXXXX] X-coordinate Mouse/Trackball/Lightpen
  FB00                   C      MSX_YSAVE    equ 0FB00H ; [*0000000 YYYYYYYY]  Y-coordinate Mouse/Trackball/Lightpen
  FB02                   C      MSX_LOGOPR   equ 0FB02H ; Logical operation code
                         C
                         C      ; Data area used by RS-232C or disk drive
                         C
  FB03                   C      MSX_RSTMP    equ 0FB03H ; Temporary data storage for RS232 Driver
  FB03                   C      MSX_TOCNT    equ 0FB03H ;
  FB04                   C      MSX_RSFCB_L  equ 0FB04H ; Adress of the RS232 LOW
  FB05                   C      MSX_RSFCB_H  equ 0FB05H ; Adress of the RS232 HIGH
  FB06                   C      MSX_RSIQLN   equ 0FB06H ; Byte DATA
  FB07                   C      MSX_MEXBIH   equ 0FB07H ; Hook RST (&H30)
  FB08                   C      MSX_BYTEDT1  equ 0FB08H ; Byte Data
  FB09                   C      MSX_DTLOW    equ 0FB09H ; LOW
  FB0A                   C      MSX_DTHIGH   equ 0FB0AH ; HIGH
  FB0B                   C      MSX_OLDINT   equ 0FB0BH ; Old interupt ( RET &HC9 )
  FB0C                   C      MSX_OLDSTT   equ 0FB0CH ; Hook
  FB10                   C      MSX_RSUNKN   equ 0FB10H ; Unknown
  FB11                   C      MSX_HKRST    equ 0FB11H ; Hook RST (&H30)
  FB12                   C      MSX_BYTEDT2  equ 0FB12H ; Byte DATA
  FB13                   C      MSX_DT2LOW   equ 0FB13H ; LOW
  FB14                   C      MSX_DT2HIGH  equ 0FB14H ; HIGH
  FB15                   C      MSX_RSRET    equ 0FB15H ; ( RET &HC9 )
  FB16                   C      MSX_DEVNUM   equ 0FB16H ; Byte OFFSET
  FB17                   C      MSX_DATCNT   equ 0FB17H ; Byte DATA
  FB18                   C      MSX_BYTPNT1  equ 0FB18H ; Byte POINTER
  FB19                   C      MSX_BYTPNT2  equ 0FB19H ; Byte POINTER
  FB1A                   C      MSX_ERRORS   equ 0FB1AH ; Byte DATA
  FB1B                   C      MSX_FLAGS    equ 0FB1BH ; BIT BOOLEAN
  FB1C                   C      MSX_ESTBLS   equ 0FB1CH ; BIT BOOLEAN
  FB1D                   C      MSX_COMMSK   equ 0FB1DH ; Byte DATA
  FB1E                   C      MSX_LSTCOM   equ 0FB1EH ; Byte DATA
  FB1F                   C      MSX_LSTMOD   equ 0FB1FH ; Byte DATA
  FB20                   C      MSX_RSUNK2   equ 0FB20H ;
                         C
                         C      ; Data area used by MSX-DOS
                         C
  FB21                   C      MSX_DRVINV_1_DSKS equ 0FB21H ; Nr. of drives connected to disk interface 1
  FB22                   C      MSX_DRVINV_1_SLT  equ 0FB22H ; Slot adress of disk interface 1
  FB23                   C      MSX_DRVINV_2_DSKS equ 0FB23H ; Nr. of drives connected to disk interface 2
  FB24                   C      MSX_DRVINV_2_SLT  equ 0FB24H ; Slot adress of disk interface 2
  FB25                   C      MSX_DRVINV_3_DSKS equ 0FB25H ; Nr. of drives connected to disk interface 3
  FB26                   C      MSX_DRVINV_3_SLT  equ 0FB26H ; Slot adress of disk interface 3
  FB27                   C      MSX_DRVINV_4_DSKS equ 0FB27H ; Nr. of drives connected to disk interface 4
  FB28                   C      MSX_DRVINV_4_SLT  equ 0FB28H ; Slot adress of disk interface 4
                         C
                         C      ; music
                         C
  FB35                   C      MSX_PRSCNT  equ 0FB35H ; Used by PLAY command in BASIC
  FB36                   C      MSX_SAVSP   equ 0FB36H ; Used by PLAY command in BASIC
  FB38                   C      MSX_VOICEN  equ 0FB38H ; Used by PLAY command in BASIC
  FB39                   C      MSX_SAVVOL  equ 0FB39H ; Used by PLAY command in BASIC
  FB3B                   C      MSX_MCLLEN  equ 0FB3BH ; Used by PLAY command in BASIC
  FB3C                   C      MSX_MCLPTR  equ 0FB3CH ; Used by PLAY command in BASIC
  FB3E                   C      MSX_QUEUEN  equ 0FB3EH ;
  FB3F                   C      MSX_MUSICF  equ 0FB3FH ;
  FB40                   C      MSX_PLYCNT  equ 0FB40H ;
  FB41                   C      MSX_VCBA    equ 0FB41H ;
  FB66                   C      MSX_VCBB    equ 0FB66H ;
  FB8B                   C      MSX_VCBC    equ 0FB8BH ;
  FBB0                   C      MSX_ENSTOP  equ 0FBB0H ; <>0 if warm start enabled (CTRL+SHIFT+GRPH+KANA/CODE for warm start)
  FBB1                   C      MSX_BASROM  equ 0FBB1H ; <>0 if basic is in rom (CTRL+STOP disabled)
  FBB2                   C      MSX_LINTTB  equ 0FBB2H ; line terminator table (<>0 if line terminates)
  FBCA                   C      MSX_FSTPOS  equ 0FBCAH ; first position for inlin
  FBCC                   C      MSX_CODSAV  equ 0FBCCH ; code save area for cursor
  FBCD                   C      MSX_FNKSWI  equ 0FBCDH ; indicate which func key is displayed
  FBCE                   C      MSX_FNKFLG  equ 0FBCEH ; fkey which have subroutine
  FBD8                   C      MSX_ONGSBF  equ 0FBD8H ; global event flag
  FBD9                   C      MSX_CLIKFL  equ 0FBD9H ;
  FBDA                   C      MSX_OLDKEY  equ 0FBDAH ;
  FBE5                   C      MSX_NEWKEY  equ 0FBE5H ;
                         C
                         C      ;  Example of European Keyboard Layout
                         C      ; FBE5 0  => 7       6         5         4         3         2         1         0
                         C      ; FBE6 1  => ; ]         [         \         =         -         9         8
                         C      ; FBE7 2  => B       A         ACCENT    /         .         ,         `         '
                         C      ; FBE8 3  => J       I         H         G         F         E         D         C
                         C      ; FBE9 4  => R       Q         P         O         N         M         L         K
                         C      ; FBEA 5  => Z       Y         X         W         V         U         T         S
                         C      ; FBEB 6  => F3      F2        F1        CODE      CAPS      GRPH      CTRL      SHIFT
                         C      ; FBEC 7  => RET     SEL       BS        STOP      TAB       ESC       F5        F4
                         C      ; FBED 8  => RIGHT   DOWN      UP        LEFT      DEL       INS       HOME      SPACE
                         C      ; FBEE 9  => 4       3         2         1         0          /         +         *
                         C      ; FBEF 10 => .         ,         -         9         8         7         6         5
                         C
  FBF0                   C      MSX_KEYBUF  equ 0FBF0H ; key code buffer
  FC18                   C      MSX_BUFEND  equ 0FC18H ; end of key buffer
  FC18                   C      MSX_LINWRK  equ 0FC18H ;
  FC40                   C      MSX_PATWRK  equ 0FC40H ; Pattern Buffer
  FC48                   C      MSX_BOTTOM  equ 0FC48H ;
  FC4A                   C      MSX_HIMEM   equ 0FC4AH ;
  FC4C                   C      MSX_TRPTBL  equ 0FC4CH ;
  FC9A                   C      MSX_RTYCNT  equ 0FC9AH ;
  FC9B                   C      MSX_INTFLG  equ 0FC9BH ; This flag is set if STOP or CTRL + STOP is pressed
                         C
                         C      ; 0 = Not Pressed
                         C      ; 3 = CTRL +STOP Pressed
                         C      ; 4 = STOP Pressed
                         C
  FC9C                   C      MSX_PADY   equ 0FC9CH ; Y-coordinate of a connected Graphics Tablet (PAD)
  FC9D                   C      MSX_PADX   equ 0FC9DH ; X-coordinate of a connected Graphics Tablet (PAD)
  FC9E                   C      MSX_JIFFY  equ 0FC9EH ; Contains value of the software clock, each interrupt of the VDP  it is increased by 1.
                         C
                         C      ; The contents can be read or changed by the 'TIME' function or 'TIME' statement.
                         C
  FCA0                   C      MSX_INTVAL  equ 0FCA0H ; Contains length of the interval when the ON INTERVAL routine was established.
  FCA2                   C      MSX_INTCNT  equ 0FCA2H ; ON INTERVAL counter (counts backwards)
  FCA4                   C      MSX_LOWLIM  equ 0FCA4H ; Used by the Cassette system (minimal length of startbit)
  FCA5                   C      MSX_WINWID  equ 0FCA5H ; Used by the Cassette system (store the difference between a low-and high-cycle)
  FCA6                   C      MSX_GRPHED  equ 0FCA6H ; flag for graph. char
  FCA7                   C      MSX_ESCCNT  equ 0FCA7H ; escape sequence counter FCA8 INSFLG  insert mode flag
  FCA9                   C      MSX_CSRSW   equ 0FCA9H ; cursor display switch
  FCAA                   C      MSX_CSTYLE  equ 0FCAAH ; cursor style i.e. Used if INS Key is used ( 00# = Full Cursor / FF# = Halve Cursor )
  FCAB                   C      MSX_CAPST   equ 0FCABH ; capital status ( 00# = Off / FF# = On )
  FCAC                   C      MSX_KANAST  equ 0FCACH ; russian key status (Dead Keys)
                         C
                         C      ; 0 = No Dead Keys
                         C      ; 1 = Dead Key > Accent Grave
                         C      ; 2 = SHIFT + Dead Key > Accent Egu
                         C      ; 3 = CODE + Dead Key > Accent Circumflex
                         C      ; 4 = SHIFT + CODE + Dead Key > Trema
                         C
  FCAD                   C      MSX_KANAMD  equ 0FCADH ;
  FCAE                   C      MSX_FLBMEM  equ 0FCAEH ; 0 if loading basic programm
  FCAF                   C      MSX_SCRMOD  equ 0FCAFH ; screen mode
  FCB0                   C      MSX_OLDSCR  equ 0FCB0H ; old screen mode
  FCB1                   C      MSX_CASPRV  equ 0FCB1H ;
  FCB2                   C      MSX_BRDATR  equ 0FCB2H ; border color for paint
  FCB3                   C      MSX_GXPOS   equ 0FCB3H ; X-position
  FCB5                   C      MSX_GYPOS   equ 0FCB5H ; Y-position
  FCB7                   C      MSX_GRPACX  equ 0FCB7H ;
  FCB9                   C      MSX_GRPACY  equ 0FCB9H ;
  FCBB                   C      MSX_DRWFLG  equ 0FCBBH ; Used by the DRAW statement  (DrawFlag)
                         C
                         C      ; Bit 7 = Draw Line 0 = No / 1 = Yes ( ,N )
                         C      ; Bit 6 = Move Cursor 0 = Yes / 1 = Yes ( ,B )
                         C      ; Bit 5 - 0 Unused
                         C
  FCBC                   C      MSX_DRWSCL  equ 0FCBCH ; Used by the DRAW statement  (DrawScaling)
  FCBD                   C      MSX_DRWANG  equ 0FCBDH ; Used by the DRAW statement (DrawAngle)
                         C
                         C      ; 0 = 00  rotation
                         C      ; 1 = 900 rotation
                         C      ; 2= 1800 rotation
                         C      ; 3= 2700 Rotation
                         C
  FCBE                   C      MSX_RUNBNF   equ 0FCBEH ; Run Binary File After loading ( Bload"File.Bin",R ) 0 = Don't Run / 1 = Run
  FCBF                   C      MSX_SAVENT   equ 0FCBFH ; start address for BSAVE / BLOAD operations
  FCC1                   C      MSX_EXPTBL_0 equ 0FCC1H ; flag for primary expanded slot 0 80h = Expanded / 00h = NOT Expanded
  FCC2                   C      MSX_EXPTBL_1 equ 0FCC2H ; flag for primary expanded slot 1 80h = Expanded / 00h = NOT Expanded
  FCC3                   C      MSX_EXPTBL_2 equ 0FCC3H ; flag for primary expanded slot 2 80h = Expanded / 00h = NOT Expanded
  FCC4                   C      MSX_EXPTBL_3 equ 0FCC4H ; flag for primary expanded slot 3 80h = Expanded / 00h = NOT Expanded
  FCC5                   C      MSX_SLTTBL_0 equ 0FCC5H ; current expanded slot 0 reg
  FCC6                   C      MSX_SLTTBL_1 equ 0FCC6H ; current expanded slot 1 reg
  FCC7                   C      MSX_SLTTBL_2 equ 0FCC7H ; current expanded slot 2 reg
  FCC8                   C      MSX_SLTTBL_3 equ 0FCC8H ; current expanded slot 3 reg
  FCC9                   C      MSX_SLTATR   equ 0FCC9H ; Slotatributes found during start process
                         C
                         C      ; Bit 7 = Basic programm 0 = No / 1 = Yes
                         C      ; Bit 6 = Device Extention  0 = No / 1 = Yes
                         C      ; Bit 5 = Statement Extention  0 = No / 1 = Yes
                         C      ; Bit 4 - 0 = Unused
                         C
  FD09                   C      MSX_SLTWRK equ 0FD09H ; (free word = FD09H + 32*basic slot + 8*expansion slot + 2*page)
  FD89                   C      MSX_PROCNM equ 0FD89H ; name of expanded statement
  FD99                   C      MSX_DEVICE equ 0FD99H ; device ID for cartrige 0-3
                         C
                         C      ; HOOKS
                         C
  FD9A                   C      MSX_HKEYI   equ 0FD9AH ; 0C4A  Interrupt handler
  FD9F                   C      MSX_HTIMI   equ 0FD9FH ; 0C53  Interrupt handler
  FDA4                   C      MSX_HCHPU   equ 0FDA4H ; 08C0  DO CHPUT(A-character; SAVE ALL)
  FDA9                   C      MSX_HDSPC   equ 0FDA9H ; 09E6  Display cursor    (no param.)
  FDAE                   C      MSX_HERAC   equ 0FDAEH ; 0A33  Errase cursor     (no param.)
  FDB3                   C      MSX_HDSPF   equ 0FDB3H ; 0B2B  DSPFNK std routine(no param.)
  FDB8                   C      MSX_HERAF   equ 0FDB8H ; 0B15  ERAFNK std routine(no param.)
  FDBD                   C      MSX_HTOTE   equ 0FDBDH ; 0842  TOTEXT std routine
  FDC2                   C      MSX_HCHGE   equ 0FDC2H ; 10CE  CHGET  std routine
  FDC7                   C      MSX_HINIP   equ 0FDC7H ; 071E  Copy character set to VDP
  FDCC                   C      MSX_HKEYC   equ 0FDCCH ; 1025  Keyboard decoder
  FDD1                   C      MSX_HKYEA   equ 0FDD1H ; 0F10  Keyboard decoder
  FDD6                   C      MSX_HNMI    equ 0FDD6H ; 1398  NMI std routine
  FDDB                   C      MSX_HPINL   equ 0FDDBH ; 23BF  PINLIN std routine
  FDE0                   C      MSX_HQINL   equ 0FDE0H ; 23CC  QINLIN std routine
  FDE5                   C      MSX_HINLI   equ 0FDE5H ; 23D5  INLIN std routine
  FDEA                   C      MSX_HONGO   equ 0FDEAH ; 7810  "ON DEVICE GOSUB"
  FDEF                   C      MSX_HDSKO   equ 0FDEFH ; 7C16  "DSKO$"
  FDF4                   C      MSX_HSETS   equ 0FDF4H ; 7C1B  "SET"
  FDF9                   C      MSX_HNAME   equ 0FDF9H ; 7C20  "NAME"
  FDFE                   C      MSX_HKILL   equ 0FDFEH ; 7C25  "KILL"
  FE03                   C      MSX_HIPL    equ 0FE03H ; 7C2A  "IPL"
  FE08                   C      MSX_HCOPY   equ 0FE08H ; 7C2F  "COPY"
  FE0D                   C      MSX_HCMD    equ 0FE0DH ; 7C34  "CMD"
  FE12                   C      MSX_HDSKF   equ 0FE12H ; 7C39  "DSKF"
  FE17                   C      MSX_HDSKI   equ 0FE17H ; 7C3E  "DSKI$"
  FE1C                   C      MSX_HATTR   equ 0FE1CH ; 7C43  "ATTR$"
  FE21                   C      MSX_HLSET   equ 0FE21H ; 7C48  "LSET"
  FE26                   C      MSX_HRSET   equ 0FE26H ; 7C4D  "RSET"
  FE2B                   C      MSX_HFIEL   equ 0FE2BH ; 7C52  "FIELD"
  FE30                   C      MSX_HMKI$   equ 0FE30H ; 7C57  "MKI$"
  FE35                   C      MSX_HMKS$   equ 0FE35H ; 7C5C  "MKS$"
  FE3A                   C      MSX_HMKD$   equ 0FE3AH ; 7C61  "MKD$"
  FE3F                   C      MSX_HCVI    equ 0FE3FH ; 7C66  "CVI"
  FE44                   C      MSX_HCVS    equ 0FE44H ; 7C6B  "CVS"
  FE49                   C      MSX_HCVD    equ 0FE49H ; 7C70  "CVD"
  FE4E                   C      MSX_HGETP   equ 0FE4EH ; 6A93  Locate FCB
  FE53                   C      MSX_HSETF   equ 0FE53H ; 6AB3  Locate FCB
  FE58                   C      MSX_HNOFO   equ 0FE58H ; 6AF6  "OPEN": not found
  FE5D                   C      MSX_HNULO   equ 0FE5DH ; 6B0F  "OPEN"
  FE62                   C      MSX_HNTFL   equ 0FE62H ; 6B3B  Close I/O buffer 0
  FE67                   C      MSX_HMERG   equ 0FE67H ; 6B63  "MERGE/LOAD"
  FE6C                   C      MSX_HSAVE   equ 0FE6CH ; 6BA6  "SAVE"
  FE71                   C      MSX_HBINS   equ 0FE71H ; 6BCE  "SAVE"
  FE76                   C      MSX_HBINL   equ 0FE76H ; 6BD4  "MERGE/LOAD"
  FE7B                   C      MSX_HFILE   equ 0FE7BH ; 6C2F  "FILES"
  FE80                   C      MSX_HDGET   equ 0FE80H ; 6C3B  "GET/PUT"
  FE85                   C      MSX_HFILO   equ 0FE85H ; 6C51  Sequential output
  FE8A                   C      MSX_HINDS   equ 0FE8AH ; 6C79  Sequential input
  FE8F                   C      MSX_HRSLF   equ 0FE8FH ; 6CD8  "INPUT$"
  FE94                   C      MSX_HSAVD   equ 0FE94H ; 6D03"LOC",6D14"LOF",6D25"EOF",6D39"FPOS"
  FE99                   C      MSX_HLOC    equ 0FE99H ; 6D0F  "LOC"
  FE9E                   C      MSX_HLOF    equ 0FE9EH ; 6D20  "LOF"
  FEA3                   C      MSX_HEOF    equ 0FEA3H ; 6D33  "EOF"
  FEA8                   C      MSX_HFPOS   equ 0FEA8H ; 6D43  "FPOS"
  FEAD                   C      MSX_HBAKU   equ 0FEADH ; 6E36  "LINE INPUT#"
  FEB2                   C      MSX_HPARD   equ 0FEB2H ; 6F15  Parse device name
  FEB7                   C      MSX_HNODE   equ 0FEB7H ; 6F33  Parse device name
  FEBC                   C      MSX_HPOSD   equ 0FEBCH ; 6F37  Parse device name
  FEC1                   C      MSX_HDEVN   equ 0FEC1H ; This hook not used
  FEC6                   C      MSX_HGEND   equ 0FEC6H ; 6F8F  I/O function despatcher
  FECB                   C      MSX_HRUNC   equ 0FECBH ; 629A  Run-clear
  FED0                   C      MSX_HCLEA   equ 0FED0H ; 62A1  Run-clear
  FED5                   C      MSX_HLOPD   equ 0FED5H ; 62AF  Run-clear
  FEDA                   C      MSX_HSTKE   equ 0FEDAH ; 62F0  Reset stack
  FEDF                   C      MSX_HISFL   equ 0FEDFH ; 145F  ISFLIO std routine
  FEE4                   C      MSX_HOUTD   equ 0FEE4H ; 1B46  OUTDO std routine
  FEE9                   C      MSX_HCRDO   equ 0FEE9H ; 7328  CR,LF to OUTDO
  FEEE                   C      MSX_HDSKC   equ 0FEEEH ; 7374  Mainloop line input
  FEF3                   C      MSX_HDOGR   equ 0FEF3H ; 593C  Line draw
  FEF8                   C      MSX_HPRGE   equ 0FEF8H ; 4039  Program end
  FEFD                   C      MSX_HERRP   equ 0FEFDH ; 40DC  Error handler
  FF02                   C      MSX_HERRF   equ 0FF02H ; 40FD  Error handler
  FF07                   C      MSX_HREAD   equ 0FF07H ; 4128  Mainloop "OK"
  FF0C                   C      MSX_HMAIN   equ 0FF0CH ; 4134  Mainloop
  FF11                   C      MSX_HDIRD   equ 0FF11H ; 41A8  Mainloop direct statement
  FF16                   C      MSX_HFINI   equ 0FF16H ; 4237  Mainloop finished
  FF1B                   C      MSX_HFINE   equ 0FF1BH ; 4247  Mainloop finished
  FF20                   C      MSX_HCRUN   equ 0FF20H ; 42B9  Tokenise
  FF25                   C      MSX_HCRUS   equ 0FF25H ; 4353  Tokenise
  FF2A                   C      MSX_HISRE   equ 0FF2AH ; 437C  Tokenise
  FF2F                   C      MSX_HNTFN   equ 0FF2FH ; 43A4  Tokenise
  FF34                   C      MSX_HNOTR   equ 0FF34H ; 44EB  Tokenise
  FF39                   C      MSX_HSNGF   equ 0FF39H ; 45D1  "FOR"
  FF3E                   C      MSX_HNEWS   equ 0FF3EH ; 4601  Runloop new statement
  FF43                   C      MSX_HGONE   equ 0FF43H ; 4646  Runloop execute
  FF48                   C      MSX_HCNRG   equ 0FF48H ; 4666  CHRGTR std routine
  FF4D                   C      MSX_HRETU   equ 0FF4DH ; 4821  "RETURN"
  FF52                   C      MSX_HPRTF   equ 0FF52H ; 4A5E  "PRINT"
  FF57                   C      MSX_HCOMP   equ 0FF57H ; 4A94  "PRINT"
  FF5C                   C      MSX_HFINP   equ 0FF5CH ; 4AFF  "PRINT"
  FF61                   C      MSX_HTRMN   equ 0FF61H ; 4B4D  "READ/INPUT" error
  FF66                   C      MSX_HFRME   equ 0FF66H ; 4C6D  Expression Evaluator
  FF6B                   C      MSX_HNTPL   equ 0FF6BH ; 4CA6  Expression Evaluator
  FF70                   C      MSX_HEVAL   equ 0FF70H ; 4DD9  Factor Evaluator
  FF75                   C      MSX_HOKNO   equ 0FF75H ; 4F2C  Factor Evaluator
  FF7A                   C      MSX_HFING   equ 0FF7AH ; 4F3E  Factor Evaluator
  FF7F                   C      MSX_HISMI   equ 0FF7FH ; 51C3  Runloop execute
  FF84                   C      MSX_HWIDT   equ 0FF84H ; 51CC  "WIDTH"
  FF89                   C      MSX_HLIST   equ 0FF89H ; 522E  "LIST"
  FF8E                   C      MSX_HBUFL   equ 0FF8EH ; 532D  Detokenise
  FF93                   C      MSX_HFRQI   equ 0FF93H ; 543F  Convert to integer
  FF98                   C      MSX_HSCNE   equ 0FF98H ; 5514  Line number to pointer
  FF9D                   C      MSX_HFRET   equ 0FF9DH ; 67EE  Free descriptor
  FFA2                   C      MSX_HPTRG   equ 0FFA2H ; 5EA9  Variable search
  FFA7                   C      MSX_HPHYD   equ 0FFA7H ; 148A  PHYDIO std routine
  FFAC                   C      MSX_HFORM   equ 0FFACH ; 148E  FORMAT std routine
  FFB1                   C      MSX_HERRO   equ 0FFB1H ; 406F  Error handler( NA^ALO )
  FFB6                   C      MSX_HLPTO   equ 0FFB6H ; 085D  LPTOUT std routine
  FFBB                   C      MSX_HLPTS   equ 0FFBBH ; 0884  LPTSTT std routine
  FFC0                   C      MSX_HSCRE   equ 0FFC0H ; 79CC  "SCREEN"
  FFC5                   C      MSX_HPLAY   equ 0FFC5H ; 73E5  "PLAY" statement
  FFCA                   C      MSX_EXTBIO  equ 0FFCAH ; xxxx Used to access external BIOS implementations
  FFCF                   C      MSX_HBGFD   equ 0FFCFH ; before physical operation with disk (BUG: Not called on MSX tR when DOS2 active)
  FFD4                   C      MSX_HENFD   equ 0FFD4H ; after physical operation with disk  (BUG: Not called on MSX tR when DOS2 active)
  FFE7                   C      MSX_RG08SAV equ 0FFE7H ; Content of VDP(09) register (R#08)
  FFE8                   C      MSX_RG09SAV equ 0FFE8H ; Content of VDP(10) register (R#09)
  FFE9                   C      MSX_RG10SAV equ 0FFE9H ; Content of VDP(11) register (R#10)
  FFEA                   C      MSX_RG11SAV equ 0FFEAH ; Content of VDP(12) register (R#11)
  FFEB                   C      MSX_RG12SAV equ 0FFEBH ; Content of VDP(13) register (R#12)
  FFEC                   C      MSX_RG13SAV equ 0FFECH ; Content of VDP(14) register (R#13)
  FFED                   C      MSX_RG14SAV equ 0FFEDH ; Content of VDP(15) register (R#14)
  FFEE                   C      MSX_RG15SAV equ 0FFEEH ; Content of VDP(16) register (R#15)
  FFEF                   C      MSX_RG16SAV equ 0FFEFH ; Content of VDP(17) register (R#16)
  FFF0                   C      MSX_RG17SAV equ 0FFF0H ; Content of VDP(18) register (R#17)
  FFF1                   C      MSX_RG18SAV equ 0FFF1H ; Content of VDP(19) register (R#18)
  FFF2                   C      MSX_RG19SAV equ 0FFF2H ; Content of VDP(20) register (R#19)
  FFF3                   C      MSX_RG20SAV equ 0FFF3H ; Content of VDP(21) register (R#20)
  FFF4                   C      MSX_RG21SAV equ 0FFF4H ; Content of VDP(22) register (R#21)
  FFF5                   C      MSX_RG22SAV equ 0FFF5H ; Content of VDP(23) register (R#22)
  FFF6                   C      MSX_RG23SAV equ 0FFF6H ; Content of VDP(24) register (R#23)
  FFF7                   C      MSX_ROMSLT  equ 0FFF7H ; Slotadress of Main-ROM
  FFF8                   C      MSX_RESERV  equ 0FFF8H ; Reserved
  FFFA                   C      MSX_RG25SAV equ 0FFFAH ; Content of VDP(26) register (R#25) MSX2+
  FFFB                   C      MSX_RG26SAV equ 0FFFBH ; Content of VDP(27) register (R#26) MSX2+
  FFFC                   C      MSX_RG27SAV equ 0FFFCH ; Content of VDP(28) register (R#27) MSX2+
  FFFD                   C      MSX_TMPSPS  equ 0FFFDH ; Temporary stack pointer storage
  FFFF                   C      MSX_SLTSL   equ 0FFFFH ; Secondary slot select register (Reading returns INVERTED! previous written value)
                         C      ;
                                ;
                                   .PHASE 41F9H
                                ;
  41F9    FE                    HEADER: db 0FEH
  41FA    8200 B20D                     dw FORTH+4000H,KBO+4000H,FORTH+4000H
  41FE    8200
                                ;
                                ; REGISTROS:
                                ;   SP = PILHA DE DADOS
                                ;   BC = FORTH PROGRAM COUNTER
                                ;   IX = FORTH PROGRAM COUNTER STACK POINTER E DO .. LOOP DATA (I)
                                ;   IY = SEMPRE APONTA PARA A ROTINA RTI
                                ;
                                ; O PROGRAMA C	 ORIGINALMENTE CARREGADO
                                ; NO ENDERECO 8200H.
                                ; O PRIMEIRO PASSO E' TRANSFERI-LO
                                ; PARA 4200H
                                ;
  4200    DB A8                 FORTH: in a,(MSX_SLOTCFG)  ; RECUPERA A CONFIGURACAO DOS SLOTS
  4202    32 826C                      ld (SLOT1+4000H),a  ; E SALVA
  4205    E6 30                        and 00110000B       ; OBTEM A CONFIGURACAO DO SLOT 2 ONDE SEMPRE APONTA PARA RAM E DO SLOT 0, PARA ROM
  4207    67                           ld h,a
  4208    F5                           push af
                                       ; DESLOCA PARA O SLOT 1
  4209    1F                           rra
  420A    1F                           rra
  420B    B4                           or h
  420C    67                           ld h,a
                                       ; DESLOCA PARA O SLOT 3
  420D    F1                           pop af
  420E    17                           rla
  420F    17                           rla
  4210    B4                           or h
  4211    D3 A8                        out (MSX_SLOTCFG),a ; LIGA 48K DE RAM E DEIXA AS ROTINAS DA ROM ATIVAS
  4213    21 8200                      ld hl,FORTH+4000H   ; ORIGEM: 8200H
  4216    11 4200                      ld de,FORTH         ; DESTINO: 4200H
  4219    01 300D                      ld bc,KBO-FORTH     ; TAMANHO
  421C    ED B0                        ldir                ; MOVE
  421E    2A F37E                      ld hl,(MSX_ROM_BDOS_VECTOR) ; SALVA ENDERECO DE CHAMADA BDOS
  4221    22 4232                      ld (BDS),hl
  4224    21 F87F                      ld hl,MSX_FNKSTR            ; SALVA AS TECLAS DE FUNCOES
  4227    11 4289                      ld de,FNCKEYS               ; PARA SEREM REPOSTAS NA SAIDA
  422A    01 00A0                      ld bc,160                   ; DO FORTH
  422D    ED B0                        ldir
  422F    C3 474B                      jp INIC
                                ;
  4232    0000                  BDS:     dw 0       ; ENDER.ROT.BDOS
  4234    B000                  FCB:     dw 0B000H  ; ENDER.FCB
  4236    D000                  PPP:     dw 0D000H  ; PONT.PILHA PARAM.
  4238    CD70                  PPR:     dw 0CD70H  ; PONT.PILHA RET.
  423A    4725                  TEXE:    dw LELIN   ; LE LINHA DIGITADA
  423C    4140                  PLBP:    dw 4140H   ; BUFFER DE DIGITACAO
  423E    0000                  PBUF:    dw 0       ; PONT.POS.VARREDURA.BUF.DIGITACAO
  4240    0000                  POFFSET: dw 0
  4242    0000                  PRNUM:   dw 0
  4244    0000                  PMOD:    dw 0       ; MODO IMED. (0) OU EXEC.
  4246    000A                  PBAS:    dw 10      ; BASE DECIMAL

                                ; ESTAS VARIAVEIS POSSIBILITAM O ACESSO AOS DICIONARIOS
  4248    424C                  PUPDP:   dw UPDC    ; PONTEIRO ULTIMA PALAVRA DICIONARIO PRINCIPAL (FIXO)
  424A    424C                  PUPDC:   dw UPDC    ; PONTEIRO ULTIMA PALAVRA DICIONARIO CORRENTE
  424C    71C5                  UPDC:    dw CBYE    ; ULTIMA PALAVRA DICIONARIO CORRENTE
  424E    71C5                  UPFXD:   dw CBYE    ; ULTIMA PALAVRA DICIONARIO QUE NAO PODE SER APAGADA (ATUALIZADA POR 'INCLUDE')
  4250    6252                  UPCC:    dw CAGAIN  ; ULTIMA PALAVRA COMPILADOR

  4252    720D                  PPD:     dw KBO     ; PONTEIRO PARA PROXIMA PALAVRA A SER INCLUIDA NO DICIONARIO
  4254    720D                  PRECOMP: dw KBO     ; PONTEIRO DE POSICAO DE MEMORIA ENQUANTO UMA NOVA PALAVRA NAO E' COMPILADA COMPLETAMENTE
  4256    46CD                  FAR:     dw FIM     ; ENDER. RUN. ROTINA QUE EXECUTA OS COMANDOS FORTH

  4258    0000                  PSTE:    dw 0       ; STATE
  425A    0000                  PDPL:    dw 0       ; USADO POR DPL
  425C    4003                  BFTC:    dw 4003H   ; BUFFER TECLADO
  425E    20                    NCOLG:   db 32      ; WIDTH P/ GRAF.
  425F    0000                  PF:      dw 0       ; USADO POR VLIST
  4261    0000                  PC:      dw 0       ; USADO POR VLIST
  4263    0000                  NL:      dw 0       ; USADO POR VLIST
  4265    0000                  NA:      dw 0       ; USADO POR VLIST
  4267    0000                  PMPT:    dw 0 ; '>' ; PROMPT PADRAO
  4269    00A8                  SPD:     dw 0A8H    ; SPEED CURSOR
  426B    00                    CTL:     db 0       ; CONT. SPEED CURSOR
  426C    00                    SLOT1:   db 0       ; CONF.SLOT
  426D    00                    DRV:     db 0       ; DRIVE EM USO
  426E    00                    ATRIB:   db 0       ; MASC.ATRIB.VHGR
  426F    0000                  BCOR:    dw 0       ; USADO POR SCROLL
  4271    0000                  BLINHA:  dw 0       ; USADO POR SCROLL
  4273    00                    FLGDWN:  db 0       ; FLAG EXIBE CARAC. < ESPACO ESTAMPAVEL
  4274    1BBF                  TABCAR:  dw 1BBFH   ; TAB. CARACTERES
  4276    0001                  FUPCS:   dw 1       ; CONV.MIN->MAI
  4278    0120                  SEMT:    dw 0120H   ; SEMENTE RAND. 1
  427A    0A55                  SEMT2:   dw 0A55H   ; SEMENTE RAND. 2
  427C    0000                  CPU:     dw 0       ; Z80 CODIFICADO
  427E    B250                           dw 0B250H  ; NA BASE 24H
  4280    0000                  PHLD:    dw 0       ; USADO POR HLD
  4282    0000                  VHLD:    dw 0       ; VAR. HLD
  4284    0000                  TUN:     dw 0       ; SE O ULT. NUMERO
                                                    ; CRIADO POR NUMBER
                                                    ; E' DE 16 OU 32 BIT'S
  4286    00                    LST:     db 0       ; FLAG PRINTER (OFF)
  4287    01                    CONS:    db 1       ; FLAG VIDEO (ON)
  4288    00                    LASTK:   db 0       ; ULTIMA TECLA LIDA
  4289                          FNCKEYS: ds 160     ; BUFF. FUNC. BASIC
  4329    0000                  VAR1:    dw 0
  432B    0000                  VAR2:    dw 0
  432D    0000                  VAR3:    dw 0
                                ;
  432F    0000                  SBAS:    dw 0     ; STACK BASIC
  4331    0000                  RBAS:    dw 0     ; RETORNO BASIC
  4333    FFFF                  PSG:     dw -1     ; N.C/SINAL
                                ;
  4335    6C                    MEN:  db 108
  4336    20 20 20 20                 db '        [[[[ FORTH MSX V2.1 ]]]]'
  433A    20 20 20 20
  433E    5B 5B 5B 5B
  4342    20 46 4F 52
  4346    54 48 20 4D
  434A    53 58 20 56
  434E    32 2E 31 20
  4352    5D 5D 5D 5D
  4356    0D 0A 0A                    db 0DH,0AH,0AH
  4359    20 50 6F 72                 db ' Por B.A. Molizane  '
  435D    20 42 2E 41
  4361    2E 20 4D 6F
  4365    6C 69 7A 61
  4369    6E 65 20 20
                                      ;db '(C) 06/1988.'
  436D    28 63 29 20                 db '(c) 1989.'
  4371    31 39 38 39
  4375    2E
  4376    0D 0A 0A                    db 0DH,0AH,0AH
  4379    20 50 61 72                 db ' Para listar os comandos, '
  437D    61 20 6C 69
  4381    73 74 61 72
  4385    20 6F 73 20
  4389    63 6F 6D 61
  438D    6E 64 6F 73
  4391    2C 20
  4393    64 69 67 69                 db 'digite VLIST'
  4397    74 65 20 56
  439B    4C 49 53 54
  439F    0D 0A 0A                    db 0DH,0AH,0AH
                                ;
                                ; TECLAS DE FUNCOES PARA O FORTH
  43A2    3A 20                 FA: db ': '
  43A4    0000 0000                 dw 00,00,00,00,00,00,00
  43A8    0000 0000
  43AC    0000 0000
  43B0    0000
  43B2    20 3B                     db ' ;'
  43B4    000D 0000                 dw 13,00,00,00,00,00,00
  43B8    0000 0000
  43BC    0000 0000
  43C0    0000
  43C2    43 52 45 41               db 'CREATE ',0
  43C6    54 45 20 00
  43CA    0000 0000                 dw 00,00,00,00
  43CE    0000 0000
  43D2    20 4E 45 58               db ' NEXT',13
  43D6    54 0D
  43D8    0000 0000                 dw 00,00,00,00,00
  43DC    0000 0000
  43E0    0000
  43E2    46 4F 52 47               db 'FORGET ',0
  43E6    45 54 20 00
  43EA    0000 0000                 dw 00,00,00,00
  43EE    0000 0000
  43F2    20 2C 20 00               db ' , ',0
  43F6    0000 0000                 dw 00,00,00,00,00,00
  43FA    0000 0000
  43FE    0000 0000
  4402    20 43 2C 20               db ' C, '
  4406    0000 0000                 dw 00,00,00,00,00,00
  440A    0000 0000
  440E    0000 0000
  4412    20 3C 42 55               db ' <BUILDS ',0
  4416    49 4C 44 53
  441A    20 00
  441C    0000 0000                 dw 00,00,00
  4420    0000
  4422    20 44 4F 45               db ' DOES> ',0
  4426    53 3E 20 00
  442A    0000 0000                 dw 00,00,00,00
  442E    0000 0000
  4432    42 59 45 0D               db 'BYE',13
  4436    0000 0000                 dw 00,00,00,00,00,00
  443A    0000 0000
  443E    0000 0000
                                ;
  4442    F3                    PSC: di
  4443    F5                         push af
  4444    C5                         push bc
  4445    D5                         push de
  4446    E5                         push hl
  4447    2A 4278                    ld hl,(SEMT) ; INCREMENTA A SEMENTE RANDOMICA DE 32 BITS
  444A    11 0001                    ld de,1
  444D    19                         add hl,de
  444E    22 4278                    ld (SEMT),hl
  4451    2A 427A                    ld hl,(SEMT2)
  4454    ED 5A                      adc hl,de
  4456    22 427A                    ld (SEMT2),hl
  4459    21 426B                    ld hl,CTL   ; VERIFICA SE O CURSOR VAI PISCAR
  445C    34                         inc (hl)
  445D    3A 4269                    ld a,(SPD)  ; COMPARA COM A VELOCIDADE DEFINIDA
  4460    BE                         cp (hl)
  4461    FA 4476                    jp m,DS2
  4464    AF                         xor a
  4465    77                         ld (hl),a
  4466    3A 4A8E                    ld a,(CCRS) ; MUDA O CURSOR
  4469    5F                         ld e,a
  446A    3A 4A90                    ld a,(CCRL)
  446D    BB                         cp e
  446E    28 0B                      jr z,DS1
  4470    3A 4A8E                    ld a,(CCRS)  ; LIGA O CURSOR
  4473    32 4A90                    ld (CCRL),a
  4476    E1                    DS2: pop hl
  4477    D1                         pop de
  4478    C1                         pop bc
  4479    F1                         pop af
  447A    C9                         ret
  447B    3E 20                 DS1: ld a,' '     ; DESLIGA O CURSOR
  447D    32 4A90                    ld (CCRL),a
  4480    18 F4                      jr DS2
                                ;
                                ; EXIBE O SIMBOLO DE PROMPT CONTIDO EM PMPT
  4482    4484                  CS:  dw $+2
  4484    CD 44AB                    call LNCND  ; PULA LINHA OU NAO, DEPENDENDO DE X DO CURSOR
  4487    3A 4267                    ld a,(PMPT)
  448A    A7                         and a
  448B    CA 46E7                    jp z,RTI ; SE NAO HA CURSOR DEFINIDO, PULA
  448E    FE 20                      cp ' '
  4490    F2 449D                    jp p,CS1   ; SE O CURSOR FOR MENOR OU IGUAL A ESPACO
  4493    3E 01                      ld a,1     ; MUDA O CURSOR PARA SER EXIBIDO CORRETAMENTE
  4495    CD 44D2                    call VIDEO ; PELO MSX
  4498    3A 4267                    ld a,(PMPT)
  449B    C6 40                      add a,64
  449D    CD 44D2               CS1: call VIDEO
  44A0    C3 46E7                    jp RTI
                                ;
                                ; GANCHO PARA CHAMADA DA ROTINA LNCND EM FORTH
  44A3    44A5                  LNCOND: dw $+2
  44A5    CD 44AB                       call LNCND
  44A8    C3 46E7                       jp RTI
                                ;
                                ; VERIFICA SE VAI QUEBRAR LINHA
  44AB    3A F3DD               LNCND: ld a,(MSX_CSRX)
  44AE    FE 01                        cp 1            ; CURSOR ESTA' NA PRIMEIRA COLUNA?
  44B0    C2 46B7                      jp nz,CRLF      ; NAO, PULA LINHA
  44B3    C9                           ret
                                ;
                                ; IMPRIME Ok NA TELA
  44B4    44B6                  OK:  dw $+2
  44B6    CD 44BC                    call XOK
  44B9    C3 46E7                    jp RTI

  44BC    3A F3DD               XOK:  ld a,(MSX_CSRX)
  44BF    FE 01                       cp 1
  44C1    28 05                       jr z,XOK1
  44C3    3E 20                       ld a,' '
  44C5    CD 44D2                     call VIDEO
  44C8    3E 4F                 XOK1: ld a,'O'
  44CA    CD 44D2                     call VIDEO
  44CD    3E 6B                       ld a,'k'
  44CF    C3 44D2                     jp VIDEO
                                ;
  44D2    F5                    VIDEO:  push af
  44D3    3A 4286                       ld a,(LST)   ; VERIFICA SE SAI NA IMPRESSORA
  44D6    A7                            and a
  44D7    20 08                         jr nz,LISTER
  44D9    3A 4287                       ld a,(CONS)  ; VERIFICA SE SAI NO VIDEO
  44DC    A7                            and a
  44DD    20 06                         jr nz,CONSOL
  44DF    F1                            pop af
  44E0    C9                            ret
                                ;
  44E1    F1                    LISTER: pop af
  44E2    C3 00A5                       jp MSX_PRN   ; IMPRESSORA
                                ;
  44E5    3A FCAF               CONSOL: ld a,(MSX_SCRMOD)
  44E8    FE 02                         cp 2
  44EA    F2 44F1                       jp p,VHGR
  44ED    F1                            pop af
  44EE    C3 00A2                       jp MSX_CON   ; VIDEO
                                ;
                                ; EXIBICAO DE CARACTERES EM TELA GRAFICA
  44F1    F1                    VHGR:  pop af
  44F2    C5                           push bc
  44F3    D5                           push de
  44F4    E5                           push hl
  44F5    F5                           push af
  44F6    3A 4273                      ld a,(FLGDWN)
  44F9    A7                           and a
  44FA    20 65                        jr nz,IDWN
  44FC    F1                           pop af
  44FD    FE 20                        cp ' '
  44FF    30 67                        jr nc,VT0
  4501    FE 01                        cp 1
  4503    20 08                        jr nz,VHGR1
  4505    3E FF                        ld a,-1
  4507    32 4273                      ld (FLGDWN),a
  450A    C3 45ED                      jp VT3
  450D    FE 07                 VHGR1: cp 7
  450F    28 1C                        jr z,BEEP
  4511    FE 08                        cp 8
  4513    28 24                        jr z,BS
  4515    FE 09                        cp 9
  4517    28 17                        jr z,TABU
  4519    FE 0A                        cp 10
  451B    CA 45DC                      jp z,LF
  451E    FE 0B                        cp 11
  4520    28 23                        jr z,HOME
  4522    FE 0C                        cp 12
  4524    28 0D                        jr z,LIMPTEL
  4526    FE 0D                        cp 13
  4528    28 2F                        jr z,CARRET
  452A    C3 45ED                      jp VT3
                                ;
  452D    CD 00C0               BEEP: call MSX_BEEP
  4530    C3 45ED               TABU: jp VT3
                                ;
  4533    CD 469C               LIMPTEL: call CLS
  4536    C3 45ED                        jp VT3
                                ;
  4539    3A F3DD               BS:   ld a,(MSX_CSRX)
  453C    3D                          dec a
  453D    20 0B                       jr nz,BS2
  453F    3A F3DC                     ld a,(MSX_CSRY)
  4542    3D                          dec a
  4543    20 0B                       jr nz,BS1
  4545    3E 01                 HOME: ld a,1
  4547    32 F3DC                     ld (MSX_CSRY),a
  454A    32 F3DD               BS2:  ld (MSX_CSRX),a
  454D    C3 45ED                     jp VT3
  4550    32 F3DC               BS1:  ld (MSX_CSRY),a
  4553    3A 425E                     ld a,(NCOLG)
  4556    3D                          dec a
  4557    18 F1                       jr BS2
                                ;
  4559    3E 01                 CARRET: ld a,1
  455B    32 F3DD                       ld (MSX_CSRX),a
  455E    C3 45ED                       jp VT3
                                ;
  4561    AF                    IDWN: xor a
  4562    32 4273                     ld (FLGDWN),a
  4565    F1                          pop af
  4566    D6 40                       sub 64
  4568    F5                    VT0:  push af
  4569    3A F3DC                     ld a,(MSX_CSRY)
  456C    3D                          dec a
  456D    16 00                       ld d,0
  456F    5F                          ld e,a
  4570    2A F3CB                     ld hl,(MSX_TXTNAM+24)
  4573    19                          add hl,de
  4574    06 08                       ld b,8
  4576    29                    VT1:  add hl,hl
  4577    10 FD                       djnz VT1 ; *256
  4579    EB                          ex de,hl
  457A    AF                          xor a
  457B    3A 425E                     ld a,(NCOLG)
  457E    6F                          ld l,a
  457F    3E 21                       ld a,33
  4581    9D                          sbc a,l
  4582    6F                          ld l,a
  4583    AF                          xor a
  4584    CB 1D                       rr l
  4586    3A F3DD                     ld a,(MSX_CSRX)
  4589    85                          add a,l
  458A    3D                          dec a
  458B    26 00                       ld h,0
  458D    6F                          ld l,a
  458E    29                          add hl,hl ; * 2
  458F    29                          add hl,hl ; * 4
  4590    29                          add hl,hl ; * 8
  4591    19                          add hl,de
  4592    3A F3E9                     ld a,(MSX_FORCLR)
  4595    06 04                       ld b,4
  4597    87                    VH1:  add a,a
  4598    10 FD                       djnz VH1 ; * 16
  459A    57                          ld d,a
  459B    3A F3EA                     ld a,(MSX_BAKCLR)
  459E    82                          add a,d
  459F    32 426E                     ld (ATRIB),a
  45A2    F1                          pop af
  45A3    E5                          push hl
  45A4    26 00                       ld h,0
  45A6    6F                          ld l,a
  45A7    29                          add hl,hl ; * 2
  45A8    29                          add hl,hl ; * 4
  45A9    29                          add hl,hl ; * 8
  45AA    ED 5B 4274                  ld de,(TABCAR)
  45AE    19                          add hl,de
  45AF    06 08                       ld b,8
  45B1    7E                    VT2:  ld a,(hl)
  45B2    E3                          ex (sp),hl
  45B3    CD 004D                     call MSX_WRTVRAM
  45B6    E5                          push hl
  45B7    ED 5B F3C9                  ld de,(MSX_TXTNAM+22)
  45BB    19                          add hl,de
  45BC    3A 426E                     ld a,(ATRIB)
  45BF    CD 004D                     call MSX_WRTVRAM
  45C2    E1                          pop hl
  45C3    23                          inc hl
  45C4    E3                          ex (sp),hl
  45C5    23                          inc hl
  45C6    10 E9                       djnz VT2
  45C8    E1                          pop hl
  45C9    3A F3DD                     ld a,(MSX_CSRX)
  45CC    3C                          inc a
  45CD    32 F3DD                     ld (MSX_CSRX),a
  45D0    21 425E                     ld hl,NCOLG
  45D3    BE                          cp (hl)
  45D4    FA 45ED                     jp m,VT3
  45D7    3E 01                       ld a,1
  45D9    32 F3DD                     ld (MSX_CSRX),a
  45DC    3A F3DC               LF:   ld a,(MSX_CSRY)
  45DF    3C                          inc a
  45E0    32 F3DC                     ld (MSX_CSRY),a
  45E3    21 F3B1                     ld hl,MSX_CRTCNT
  45E6    BE                          cp (hl)
  45E7    FA 45ED                     jp m,VT3
  45EA    CD 45F1                     call SCROLL
  45ED    E1                    VT3:  pop hl
  45EE    D1                          pop de
  45EF    C1                          pop bc
  45F0    C9                          ret
                                ;
  45F1    2A F3CB               SCROLL: ld hl,(MSX_TXTNAM+24) ; BASE(12)
  45F4    11 0100                       ld de,256
  45F7    19                            add hl,de
  45F8    22 4271                       ld (BLINHA),hl
  45FB    2A F3C9                       ld hl,(MSX_TXTNAM+22) ; BASE(11)
  45FE    19                            add hl,de
  45FF    22 426F                       ld (BCOR),hl
  4602    3A F3B1                       ld a,(MSX_CRTCNT)
  4605    3D                            dec a
  4606    4F                    SCROL1: ld c,a
  4607    C5                            push bc
  4608    2A 4271                       ld hl,(BLINHA)
  460B    ED 5B 4254                    ld de,(PRECOMP)
  460F    01 0100                       ld bc,256
  4612    CD 0059                       call MSX_LDIRVR
  4615    2A 4254                       ld hl,(PRECOMP)
  4618    11 0100                       ld de,256
  461B    19                            add hl,de
  461C    EB                            ex de,hl
  461D    2A 426F                       ld hl,(BCOR)
  4620    01 0100                       ld bc,256
  4623    CD 0059                       call MSX_LDIRVR
  4626    2A 4271                       ld hl,(BLINHA)
  4629    11 0100                       ld de,256
  462C    AF                            xor a
  462D    ED 52                         sbc hl,de
  462F    EB                            ex de,hl
  4630    2A 4254                       ld hl,(PRECOMP)
  4633    01 0100                       ld bc,256
  4636    CD 005C                       call MSX_LDIRRV
  4639    2A 426F                       ld hl,(BCOR)
  463C    11 0100                       ld de,256
  463F    AF                            xor a
  4640    ED 52                         sbc hl,de
  4642    E5                            push hl
  4643    2A 4254                       ld hl,(PRECOMP)
  4646    11 0100                       ld de,256
  4649    19                            add hl,de
  464A    D1                            pop de
  464B    01 0100                       ld bc,256
  464E    CD 005C                       call MSX_LDIRRV
  4651    2A 4271                       ld hl,(BLINHA)
  4654    11 0100                       ld de,256
  4657    19                            add hl,de
  4658    22 4271                       ld (BLINHA),hl
  465B    2A 426F                       ld hl,(BCOR)
  465E    19                            add hl,de
  465F    22 426F                       ld (BCOR),hl
  4662    C1                            pop bc
  4663    79                            ld a,c
  4664    3D                            dec a
  4665    20 9F                         jr nz,SCROL1
  4667    2A 4271                       ld hl,(BLINHA)
  466A    11 0100                       ld de,256
  466D    AF                            xor a
  466E    ED 52                         sbc hl,de
  4670    01 0100                       ld bc,256
  4673    CD 0056                       call MSX_VFILL
  4676    2A 426F                       ld hl,(BCOR)
  4679    11 0100                       ld de,256
  467C    AF                            xor a
  467D    ED 52                         sbc hl,de
  467F    3A F3EA                       ld a,(MSX_BAKCLR)
  4682    E6 0F                         and 15
  4684    5F                            ld e,a
  4685    CB 1F                         rr a
  4687    CB 1F                         rr a
  4689    CB 1F                         rr a
  468B    CB 1F                         rr a
  468D    B3                            or e
  468E    01 0100                       ld bc,256
  4691    CD 0056                       call MSX_VFILL
  4694    3A F3B1                       ld a,(MSX_CRTCNT)
  4697    3D                            dec a
  4698    32 F3DC                       ld (MSX_CSRY),a
  469B    C9                            ret
                                ;
  469C    CD 0777               CLS: call MSX_CLS
  469F    E5                         push hl
  46A0    21 0101                    ld hl,0101H
  46A3    22 F3DC                    ld (MSX_CSRY),hl ; POSICIONA O CURSOR NA LINHA 1, COLUNA 1
  46A6    E1                         pop hl
  46A7    C9                         ret
                                ;
  46A8                          TECLA:
                                ; ROTINA DESATIVADA
                                ;       jr TECX
                                ;       call MSX_ISKEY
                                ;       jr nz,TECX
                                ;       ld a,(CCRS)
                                ;       ld (CCRL),a
                                ;       xor a
                                ;       ld (CTL),a
                                ;       ld a,0F7H
                                ;       ld (MSX_HKEYI),a
                                ;TEC1:  ld a,(CCRL)
                                ;       bit 7,a
                                ;       jr nz,TEC2
                                ;       cp ' '
                                ;       jp p,TEC2
                                ;       push af
                                ;       ld a,1
                                ;       call SVIDEO
                                ;       pop af
                                ;       add a,64
                                ;TEC2:  call SVIDEO
                                ;       ld a,8
                                ;       call SVIDEO
                                ;       call MSX_ISKEY
                                ;       jr z,TEC1
                                ;       ld a,' '
                                ;       call SVIDEO
                                ;       ld a,8
                                ;       call SVIDEO
                                ;       ld a,0C9H
                                ;       ld (MSX_HKEYI),a
                                ;       ;
                                ;TECX:
  46A8    CD 009F                      call MSX_CHRGET
  46AB    32 4288                      ld (LASTK),a     ; SALVA A TECLA LIDA
  46AE    C9                           ret
                                ;
                                ; RETORNA EM "A" SE UMA TECLA FOI PRESSIONADA
  46AF    CD 0D6A               IKEY: call MSX_ISKEY
  46B2    3E 00                       ld a,0
  46B4    C8                          ret z
  46B5    3D                          dec a
  46B6    C9                          ret
                                ;
                                ; PULA UMA LINHA
  46B7    3E 0D                 CRLF: ld a,13
  46B9    CD 44D2                     call VIDEO
  46BC    3E 0A                       ld a,10
  46BE    C3 44D2                     jp VIDEO
                                ;
                                ;
                                ; IMPRIME UM TEXTO EM QUE A PRIMEIRA POSICAO E' SEU COMPRIMENTO
  46C1    C5                    IMM:  push bc
  46C2    46                          ld b,(hl)
  46C3    23                          inc hl
  46C4    7E                    IMM1: ld a,(hl)
  46C5    CD 44D2                     call VIDEO
  46C8    23                          inc hl
  46C9    10 F9                       djnz IMM1
  46CB    C1                          pop bc
  46CC    C9                          ret
                                ;
                                ; RETORNA EM BC O PROGRAM STACK POINTER
                                ; ROTINA CHAMADA APOS UMA EXECUCAO DE UM
                                ; COMANDO FORTH
  46CD    46CF                  FIM: dw $+2
  46CF    DD 4E 00                   ld c,(ix)
  46D2    DD 23                      inc ix
  46D4    DD 46 00                   ld b,(ix)
  46D7    DD 23                      inc ix
  46D9    18 0C                      jr RTI

                                ; ROTINA QUE EXECUTA UMA INTERRUPCAO
                                ; DA EXECUCAO DO PROGRAMA, VOLTANDO
                                ; AO PROMPT FORTH
  46DB    AF                    BREAK: xor a
  46DC    32 FC9B                      ld (MSX_INTFLG),a ; LIMPA O FLAG DE TECLA STOP/CTRL-STOP
  46DF    CD 46A8                      call TECLA        ; TIRA A TECLA STOP DO BUFFER
  46E2    C3 4785                      jp PREPARA

  46E5    D5                    RPdehl: push de
  46E6    E5                    RPhl:   push hl           ; 2OS = DE, TOS = HL
  46E7    3A FBB1               RTI:    ld a,(MSX_BASROM) ; SE NAO ESTIVER NO BASIC, PROCESSA TECLA STOP
  46EA    A7                            and a
  46EB    20 1E                         jr nz,_RTI
  46ED    3A FC9B                       ld a,(MSX_INTFLG)
  46F0    A7                            and a
  46F1    28 18                         jr z,_RTI   ; TECLA NAO FOI PRESSIONADA
  46F3    FE 03                         cp 3        ; CTRL-STOP?
  46F5    CA 46DB                       jp z,BREAK
  46F8    AF                            xor a
  46F9    32 FC9B                       ld (MSX_INTFLG),a ; LIMPA O FLAG DE TECLA STOP/CTRL-STOP
  46FC    3A FC9B               PAUSA:  ld a,(MSX_INTFLG)
  46FF    A7                            and a
  4700    28 FA                         jr z,PAUSA        ; ESPERA A TECLA SER PRESSIONADA NOVAMENTE
  4702    FE 03                         cp 3              ; CTRL-STOP?
  4704    CA 46DB                       jp z,BREAK
  4707    AF                            xor a
  4708    32 FC9B                       ld (MSX_INTFLG),a ; LIMPA O FLAG DE TECLA STOP/CTRL-STOP
  470B    0A                    _RTI:   ld a,(bc)  ; OBTEM O ENDERECO DA PROXIMA INSTRUCAO
  470C    6F                            ld l,a     ; E COLOCA EM HL
  470D    03                            inc bc
  470E    0A                            ld a,(bc)
  470F    67                            ld h,a
  4710    03                            inc bc
  4711    5E                    RO1:    ld e,(hl) ; OBTEM A PROXIMA INSTRUCAO
  4712    23                            inc hl    ; A PARTIR DE HL
  4713    56                            ld d,(hl)
  4714    23                            inc hl
  4715    EB                            ex de,hl
  4716    E9                            jp (hl)
                                ;
                                ; ROTINA DE CHAMADA DE COMANDOS FORTH (MICROCODIGO)
  4717    DD 2B                 FUN: dec ix     ; SALVA O FORTH PROGRAM COUNTER ATUAL (BC)
  4719    DD 70 00                   ld (ix),b
  471C    DD 2B                      dec ix
  471E    DD 71 00                   ld (ix),c
  4721    4B                         ld c,e     ; COPIA REGISTROS "DE" PARA BC
  4722    42                         ld b,d
  4723    FD E9                      jp (iy)
                                     ;JP RTI
                                ;
                                ; CODIGO FORTH PARA RECEBER UMA LINHA DIGITADA
  4725    4717                  LELIN:  dw FUN
  4727    4482                  LELIN1: dw CS
  4729    49D3 5640             LELIN2: dw INPUT,PUSHN,BFTC
  472D    425C
  472F    4CF2 4D2E                     dw PEK16,PEK8,MAI0,BRCH0,LELIN3,OUTIN
  4733    4869 4E64
  4737    473B 5FA9
  473B    4C08 4CF2             LELIN3: dw MODE,PEK16,BRCH0,LELIN1,CR
  473F    4E64 4727
  4743    5990
  4745    4E79 4729                     dw BRCH,LELIN2
                                ;
  4749    474B                  CINIC: dw $+2
  474B    E1                    INIC:  pop hl            ; NA PILHA ESTA' O RETORNO AO BASIC
  474C    22 4331                      ld (RBAS),hl      ; SALVA O RETORNO AO BASIC
  474F    ED 73 432F                   ld (SBAS),sp      ; SALVA A PILHA ANTERIOR
  4753    AF                    INIC1: xor a ;; ld a, '>'
  4754    32 4267                      ld (PMPT),a
  4757    3E 20                        ld a,' '
  4759    32 4A90                      ld (CCRL),a
  475C    3E 1E                        ld a,30
  475E    32 425E                      ld (NCOLG),a
  4761    21 1BBF                      ld hl,1BBFH
  4764    22 4274                      ld (TABCAR),hl
  4767    AF                           xor a
  4768    32 FCA9                      ld (MSX_CSRSW),a  ; DESLIGA O CURSOR
  476B    32 FC9B                      ld (MSX_INTFLG),a ; LIMPA O FLAG DE TECLA STOP/CTRL-STOP
  476E    21 43A2                      ld hl,FA
  4771    11 F87F                      ld de,MSX_FNKSTR
  4774    01 00A0                      ld bc,160
  4777    ED B0                        ldir

                                ; EXIBICAO DA TELA DE BOAS-VINDAS
  4779    CD 469C               HSTRT: call CLS
                                       ;call CRLF
  477C    21 4335                      ld hl,MEN
  477F    CD 46C1                      call IMM
  4782    CD 00CF                      call MSX_SHOWKEYS

  4785    21 FFFF               PREPARA: ld hl,-1      ; CONVERTE AS PALAVRAS DIGITADAS PARA MAIUSCULAS
  4788    22 4276                        ld (FUPCS),hl ; PARA BUSCA NO DICIONARIO
  478B    ED 7B 4236                     ld sp,(PPP)
  478F    DD 2A 4238                     ld ix,(PPR)
  4793    FD 21 46E7                     ld iy,RTI
  4797    01 47A9                        ld bc,RR
  479A    21 0000                        ld hl,0
  479D    22 4244                        ld (PMOD),hl ; SETA MODO IMEDIATO (INTERPRETACAO DO PROMPT)
  47A0    CD 44BC                        call XOK
  47A3    2A 423A                        ld hl,(TEXE) ; CHAMA ROTINA DE LEITURA DE
  47A6    C3 4711                        jp RO1       ; LINHA DIGITADA
                                ;
                                ; CHAMADA EM FORTH PARA EXIBIR A TELA DE BOAS VINDAS
  47A9    47AB                  RR: dw $+2
  47AB    47AD                      dw $+2
  47AD    C3 4779                   jp HSTRT

                         C         INCLUDE FORTHDIC.IN1
                         C      ;
                         C      ;
                         C      ; DICIONARIO
                         C      ;
                         C      ; RETORNA AO DICIONARIO PRINCIPAL
  47B0    05 46 4F 52    C      CFORTH: db 5,'FORTH'
  47B4    54 48          C
  47B6    0000           C              dw 0
  47B8    4717           C              dw FUN
  47BA    46CD           C              dw FIM
                         C      ;
  47BC    03 44 55 50    C      CDUP: db 3,'DUP' ; (n1 --- n1 n1)
  47C0    47B0           C            dw CFORTH
  47C2    47C4           C      DUP:  dw $+2
  47C4    E1             C            pop hl
  47C5    E5             C            push hl
  47C6    C3 46E6        C            jp RPhl
                         C      ;
                         C      ; : -DUP DUP IF DUP THEN ;
  47C9    04 2D 44 55    C      CDUPC: db 4,'-DUP' ; (n1 --- se n1 = 0, n1 ; se n1 <> 0, n1 n1)
  47CD    50             C
  47CE    47BC           C             dw CDUP
  47D0    4717           C      DUPC:  dw FUN
  47D2    47C2 4E64      C             dw DUP,BRCH0,DUPC2,DUP
  47D6    47DA 47C2      C
  47DA    46CD           C      DUPC2: dw FIM
                         C      ;
                         C      ; : U< 2DUP XOR 0< IF DROP 0< 0= ELSE - 0< THEN ;
  47DC    02 55 3C       C      CUMEN:  db 2,'U<' ; (n1 n2 --- n1 n2)
  47DF    47C9           C              dw CDUPC
  47E1    4717           C      UMENOR: dw FUN
  47E3    599F 6342      C              dw DDUP,XOR,MEN0,BRCH0,UMEN1
  47E7    4841 4E64      C
  47EB    47F5           C
  47ED    4886 4841      C              dw DROP,MEN0,IGU0,FIM
  47F1    4855 46CD      C
  47F5    4FE4 4841      C      UMEN1:  dw MENOS,MEN0,FIM
  47F9    46CD           C
                         C      ;
  47FB    01 3C          C      CMENOR: db 1,'<'
  47FD    47C9           C              dw CDUPC
  47FF    4801           C      MENOR:  dw $+2
  4801    D1             C              pop de
  4802    E1             C      MENOR3: pop hl
  4803    A7             C      MENOR2: and a
  4804    ED 52          C              sbc hl,de
  4806    21 0000        C              ld hl,0
  4809    F2 46E6        C              jp p,RPhl
  480C    2B             C              dec hl
  480D    C3 46E6        C              jp RPhl
                         C      ;
  4810    01 3E          C      CMAIOR: db 1,'>'
  4812    47FB           C              dw CMENOR
  4814    4816           C      MAIOR:  dw $+2
  4816    E1             C              pop hl
  4817    D1             C              pop de
  4818    18 E9          C              jr MENOR2
                         C      ;
  481A    01 3D          C      CIGU: db 1,'='
  481C    4810           C            dw CMAIOR
  481E    4820           C      IGU:  dw $+2
  4820    E1             C            pop hl
  4821    D1             C            pop de
  4822    A7             C            and a
  4823    ED 52          C            sbc hl,de
  4825    21 0000        C            ld hl,0
  4828    C2 46E6        C            jp nz,RPhl
  482B    2B             C            dec hl
  482C    C3 46E6        C            jp RPhl
                         C      ;
                         C      ; : <> = NOT ;
  482F    02 3C 3E       C      CDIF: db 2,'<>'
  4832    481A           C            dw CIGU
  4834    4717           C            dw FUN
  4836    481E 6355      C            dw IGU,NOT,FIM
  483A    46CD           C
                         C      ;
  483C    02 30 3C       C      CMEN0: db 2,'0<'
  483F    482F           C             dw CDIF
  4841    4843           C      MEN0:  dw $+2
  4843    E1             C             pop hl
  4844    CB 7C          C             bit 7,h
  4846    21 0000        C             ld hl,0
  4849    CA 46E6        C             jp z,RPhl
  484C    2B             C             dec hl
  484D    C3 46E6        C             jp RPhl
                         C      ;
  4850    02 30 3D       C      CIGU0: db 2,'0='
  4853    483C           C             dw CMEN0
  4855    4857           C      IGU0:  dw $+2
  4857    E1             C             pop hl
  4858    7D             C             ld a,l
  4859    B4             C             or h
  485A    21 0000        C             ld hl,0
  485D    C2 46E6        C             jp nz,RPhl
  4860    2B             C             dec hl
  4861    C3 46E6        C             jp RPhl
                         C      ;
  4864    02 30 3E       C      CMAI0: db 2,'0>'
  4867    4850           C             dw CIGU0
  4869    486B           C      MAI0:  dw $+2
  486B    D1             C             pop de
  486C    21 0000        C             ld hl,0
  486F    18 92          C             jr MENOR2
                         C      ;
  4871    03 52 4F 54    C      CROT: db 3,'ROT'
  4875    4864           C            dw CMAI0
  4877    4879           C      ROT:  dw $+2
  4879    D1             C            pop de
  487A    E1             C            pop hl
  487B    E3             C            ex (sp),hl
  487C    C3 46E5        C            jp RPdehl
                         C      ;
  487F    04 44 52 4F    C      CDROP: db 4,'DROP' ; n1 n2 n3
  4883    50             C
  4884    4871           C             dw CROT
  4886    4888           C      DROP:  dw $+2
  4888    E1             C             pop hl
  4889    C3 46E7        C             jp RTI
                         C      ;
  488C    02 3C 3C       C      CSLA:  db 2,'<<'
  488F    487F           C             dw CDROP
  4891    4893           C             dw $+2
  4893    D1             C             pop de
  4894    E1             C             pop hl
  4895    C5             C             push bc
  4896    43             C             ld b,e
  4897    CB 25          C      SLA1:  sla l
  4899    CB 14          C             rl h
  489B    10 FA          C             djnz SLA1
  489D    C1             C             pop bc
  489E    C3 46E6        C             jp RPhl
                         C      ;
  48A1    02 3E 3E       C      CSRA:  db 2,'>>'
  48A4    488C           C             dw CSLA
  48A6    48A8           C             dw $+2
  48A8    D1             C             pop de
  48A9    E1             C             pop hl
  48AA    C5             C             push bc
  48AB    43             C             ld b,e
  48AC    CB 3C          C      SRA1:  srl h
  48AE    CB 1D          C             rr l
  48B0    10 FA          C             djnz SRA1
  48B2    C1             C             pop bc
  48B3    C3 46E6        C             jp RPhl
                         C      ;
  48B6    04 45 4D 49    C      CEMIT: db 4,'EMIT'
  48BA    54             C
  48BB    48A1           C             dw CSRA
  48BD    48BF           C      EMIT:  dw $+2
  48BF    E1             C             pop hl
  48C0    7D             C             ld a,l
  48C1    CD 44D2        C             call VIDEO
  48C4    C3 46E7        C             jp RTI
                         C      ;
  48C7    03 4B 45 59    C      CKEY: db 3,'KEY'
  48CB    48B6           C            dw CEMIT
  48CD    48CF           C      KEY:  dw $+2
  48CF    CD 46A8        C            call TECLA
  48D2    6F             C            ld l,a
  48D3    26 00          C            ld h,0
  48D5    C3 46E6        C            jp RPhl
                         C      ;
  48D8    05 49 4E 4B    C      CINKEY: db 5,'INKEY'
  48DC    45 59          C
  48DE    48C7           C              dw CKEY
  48E0    48E2           C              dw $+2
  48E2    CD 46AF        C              call IKEY
  48E5    6F             C              ld l,a
  48E6    26 00          C              ld h,0
  48E8    C3 46E6        C              jp RPhl
                         C      ;
  48EB    07 4C 41 53    C      CLSTKEY: db 7,'LASTKEY'
  48EF    54 4B 45 59    C
  48F3    48D8           C               dw CINKEY
  48F5    48F7           C               dw $+2
  48F7    3A 4288        C               ld a,(LASTK)
  48FA    6F             C               ld l,a
  48FB    26 00          C               ld h,0
  48FD    C3 46E6        C               jp RPhl
                         C      ;
  4900    09 2D 54 52    C      CTRAIL: db 9,'-TRAILING'
  4904    41 49 4C 49    C
  4908    4E 47          C
  490A    48EB           C              dw CLSTKEY
  490C    490E           C              dw $+2
  490E    D1             C              pop de
  490F    E1             C              pop hl
  4910    E5             C              push hl
  4911    19             C              add hl,de
  4912    7E             C      TR2:    ld a,(hl)
  4913    FE 20          C              cp ' '
  4915    20 04          C              jr nz,TR1
  4917    23             C              inc hl
  4918    13             C              inc de
  4919    18 F7          C              jr TR2
  491B    D5             C      TR1:    push de
  491C    C3 46E7        C              jp RTI
                         C      ;
  491F    06 54 4F 47    C      CTOGGL: db 6,'TOGGLE'
  4923    47 4C 45       C
  4926    4900           C              dw CTRAIL
  4928    492A           C      TOGGLE: dw $+2
  492A    D1             C              pop de
  492B    E1             C              pop hl
  492C    7E             C              ld a,(hl)
  492D    AB             C              xor e
  492E    77             C              ld (hl),a
  492F    C3 46E7        C              jp RTI
                         C      ;
  4932    08 54 52 41    C      CTRAV:    db 8,'TRAVERSE'
  4936    56 45 52 53    C
  493A    45             C
  493B    491F           C                dw CTOGGL
  493D    4717           C      TRAVERSE: dw FUN
  493F    5246 5982      C      TRAV1:    dw SWAP,OVER,MAIS,PUSHN,7FH,OVER,PEK8
  4943    4FD8 5640      C
  4947    007F 5982      C
  494B    4D2E           C
  494D    47FF 4E64      C                dw MENOR,BRCH0,TRAV1,SWAP,DROP,FIM
  4951    493F 5246      C
  4955    4886 46CD      C
                         C      ;
  4959    03 44 50 4C    C      CDPL: db 3,'DPL'
  495D    4932           C            dw CTRAV
  495F    4961           C      DPL:  dw $+2
  4961    21 425A        C            ld hl,PDPL
  4964    C3 46E6        C            jp RPhl
                         C      ;
  4967    03 48 4C 44    C      CHLD: db 3,'HLD'
  496B    4959           C            dw CDPL
  496D    496F           C      HLD:  dw $+2
  496F    21 4280        C            ld hl,PHLD
  4972    C3 46E6        C            jp RPhl
                         C      ;
                         C      ; : HOLD -1 HLD +! HLD @ C! ;
  4975    04 48 4F 4C    C      CHOLD: db 4,'HOLD'
  4979    44             C
  497A    4967           C             dw CHLD
  497C    4717           C      HOLD:  dw FUN
  497E    6373 496D      C             dw TRUE,HLD,SOMEM,HLD
  4982    56D1 496D      C
  4986    4CF2 4D21      C             dw PEK16,POK8,FIM
  498A    46CD           C
                         C      ;
  498C    03 50 41 44    C      CPAD: db 3,'PAD'
  4990    4975           C            dw CHOLD
  4992    4994           C      PAD:  dw $+2
  4994    2A 4254        C            ld hl,(PRECOMP)
  4997    11 0044        C            ld de,44H
  499A    19             C            add hl,de
  499B    C3 46E6        C            jp RPhl
                         C      ;
  499E    05 43 4F 55    C      CCOUNT: db 5,'COUNT'
  49A2    4E 54          C
  49A4    498C           C              dw CPAD
  49A6    49A8           C              dw $+2
  49A8    E1             C              pop hl
  49A9    5E             C              ld e,(hl)
  49AA    16 00          C              ld d,0
  49AC    23             C              inc hl
  49AD    EB             C              ex de,hl
  49AE    C3 46E5        C              jp RPdehl
                         C      ;
  49B1    03 4C 42 50    C      CLBP: db 3,'LBP'
  49B5    499E           C            dw CCOUNT
  49B7    49B9           C      LBP:  dw $+2
  49B9    21 423C        C            ld hl,PLBP
  49BC    C3 46E6        C            jp RPhl
                         C      ;
  49BF    07 2B 4F 52    C      CADORG: db 7,'+ORIGIN'
  49C3    49 47 49 4E    C
  49C7    49B1           C              dw CLBP
  49C9    4717           C      ADDORG: dw FUN
  49CB    5640 4200      C              dw PUSHN,FORTH,MAIS,FIM
  49CF    4FD8 46CD      C
                         C      ;
  49D3    49D5           C      INPUT: dw $+2
  49D5    21 0001        C             ld hl,1
  49D8    22 423E        C             ld (PBUF),hl
  49DB    2A 425C        C             ld hl,(BFTC)
  49DE    E5             C             push hl
  49DF    23             C             inc hl
  49E0    22 423C        C             ld (PLBP),hl
  49E3    21 0000        C             ld hl,0
  49E6    E5             C             push hl
  49E7    18 0B          C             jr EXPECT+2
                         C      ;
  49E9    06 45 58 50    C      CEXPECT: db 6,'EXPECT'
  49ED    45 43 54       C
  49F0    49BF           C               dw CADORG
  49F2    49F4           C      EXPECT:  dw $+2
  49F4    D9             C               exx
  49F5    D1             C               pop de
  49F6    E1             C               pop hl
  49F7    E5             C               push hl
  49F8    23             C               inc hl
  49F9    01 0001        C      EXP6:    ld bc,1
  49FC    CD 46A8        C      EXP3:    call TECLA
  49FF    FE 03          C               cp 3            ; <CONTROL-C>
  4A01    20 10          C               jr nz,EXP8
  4A03    3E 5E          C               ld a,'^'
  4A05    CD 44D2        C               call VIDEO
  4A08    3E 43          C               ld a,'C'
  4A0A    CD 44D2        C               call VIDEO
                         C      IFNDEF CPM
  4A0D    AF             C               xor a
  4A0E    32 FC9B        C               ld (MSX_INTFLG),a
                         C      ENDIF
  4A11    18 17          C               jr EXPA
  4A13    FE 1B          C      EXP8:    cp 27           ; <ESC>
  4A15    20 18          C               jr nz,EXP1
  4A17    41             C               ld b,c
  4A18    0D             C               dec c
  4A19    3E 08          C      EXP8X:   ld a,8
  4A1B    CD 44D2        C               call VIDEO
  4A1E    3E 20          C               ld a,' '
  4A20    CD 44D2        C               call VIDEO
  4A23    3E 08          C               ld a,8
  4A25    CD 44D2        C               call VIDEO
  4A28    10 EF          C               djnz EXP8X
  4A2A    01 0001        C      EXPA:    ld bc,1
  4A2D    18 56          C               jr EXP5
  4A2F    FE 1D          C      EXP1:    cp 1DH           ; 29d (<-)
  4A31    20 18          C               jr nz,EXP2
  4A33    0B             C               dec bc
  4A34    79             C               ld a,c
  4A35    B0             C               or b
  4A36    28 C1          C               jr z,EXP6
  4A38    13             C               inc de
  4A39    2B             C               dec hl
  4A3A    3E 08          C               ld a,8
  4A3C    CD 44D2        C               call VIDEO
  4A3F    3E 20          C               ld a,' '
  4A41    CD 44D2        C               call VIDEO
  4A44    3E 08          C               ld a,8
  4A46    CD 44D2        C               call VIDEO
  4A49    18 B1          C               jr EXP3
  4A4B    FE 08          C      EXP2:    cp 8            ; <BS>
  4A4D    28 E4          C               jr z,EXP1+4
  4A4F    FE 1C          C               cp 1CH           ; 28d (->)
  4A51    20 03          C               jr nz,EXP4
  4A53    7E             C               ld a,(hl)
  4A54    18 16          C               jr EXP7
  4A56    FE 12          C      EXP4:    cp 18   ; TECLA <INSERT>
  4A58    20 0E          C               jr nz,EXPB
  4A5A    3A FCAA        C               ld a,(MSX_CSTYLE)
  4A5D    A7             C               and a
  4A5E    3E 00          C               ld a,0
  4A60    20 01          C               jr nz,MUDCURS
  4A62    3C             C               inc a
  4A63    32 FCAA        C      MUDCURS: ld (MSX_CSTYLE),a
  4A66    18 94          C               jr EXP3
  4A68    FE 0D          C      EXPB:    cp 13           ; <ENTER>
  4A6A    28 19          C               jr z,EXP5
  4A6C    CB 7F          C      EXP7:    bit 7,a
  4A6E    20 05          C               jr nz,EXP9
  4A70    FE 20          C               cp ' '
  4A72    FA 49FC        C               jp m,EXP3
  4A75    FE 7F          C      EXP9:    cp 7FH         ; 127 (DEL)
  4A77    28 83          C               jr z,EXP3
  4A79    77             C               ld (hl),a
  4A7A    23             C               inc hl
  4A7B    03             C               inc bc
  4A7C    1B             C               dec de
  4A7D    CD 44D2        C               call VIDEO
  4A80    7B             C               ld a,e
  4A81    B2             C               or d
  4A82    C2 49FC        C               jp nz,EXP3
  4A85    36 00          C      EXP5:    ld (hl),0
  4A87    E1             C               pop hl
  4A88    0B             C               dec bc
  4A89    79             C               ld a,c
  4A8A    77             C               ld (hl),a
  4A8B    C3 4B62        C               jp RG
                         C      ;
  4A8E    005F           C      CCRS:    dw '_'
  4A90    005F           C      CCRL:    dw '_'
                         C      ;
  4A92    06 43 55 52    C      CCURSOR: db 6,'CURSOR'
  4A96    53 4F 52       C
  4A99    49E9           C               dw CEXPECT
  4A9B    4A9D           C               dw $+2
  4A9D    21 4A8E        C               ld hl,CCRS
  4AA0    C3 46E6        C               jp RPhl
                         C      ;
  4AA3    06 4F 46 46    C      COFFSET: db 6,'OFFSET'
  4AA7    53 45 54       C
  4AAA    4A92           C               dw CCURSOR
  4AAC    4AAE           C      OFFSET:  dw $+2
  4AAE    21 4240        C               ld hl,POFFSET
  4AB1    C3 46E6        C               jp RPhl
                         C      ;
  4AB4    02 52 23       C      CRNUM: db 2,'R#'
  4AB7    4AA3           C             dw COFFSET
  4AB9    4ABB           C      RNUM:  dw $+2
  4ABB    21 4242        C             ld hl,PRNUM
  4ABE    C3 46E6        C             jp RPhl
                         C      ;
  4AC1    04 52 41 4E    C      CRAND: db 4,'RAND'
  4AC5    44             C
  4AC6    4AB4           C             dw CRNUM
  4AC8    4ACA           C             dw $+2
  4ACA    C5             C             push bc
  4ACB    2A 4278        C             ld hl,(SEMT)
  4ACE    06 08          C             ld b,8
  4AD0    7D             C      RND1:  ld a,l
  4AD1    1F             C             rra
  4AD2    1F             C             rra
  4AD3    AC             C             xor h
  4AD4    1F             C             rra
  4AD5    1F             C             rra
  4AD6    CB 1C          C             rr h
  4AD8    CB 1D          C             rr l
  4ADA    10 F4          C             djnz RND1
  4ADC    22 4278        C             ld (SEMT),hl
  4ADF    C1             C             pop bc
  4AE0    C3 46E6        C             jp RPhl
                         C      ;
  4AE3    04 53 45 45    C      CSEED: db 4,'SEED'
  4AE7    44             C
  4AE8    4AC1           C             dw CRAND
  4AEA    4AEC           C             dw $+2
  4AEC    21 4278        C             ld hl,SEMT
  4AEF    C3 46E6        C             jp RPhl
                         C      ;
  4AF2    04 52 4F 4C    C      CROLL: db 4,'ROLL'
  4AF6    4C             C
  4AF7    4AE3           C             dw CSEED
  4AF9    4AFB           C      ROLL:  dw $+2
  4AFB    D9             C             exx
  4AFC    E1             C             pop hl
  4AFD    29             C             add hl,hl
  4AFE    E5             C             push hl
  4AFF    23             C             inc hl
  4B00    39             C             add hl,sp
  4B01    E5             C             push hl
  4B02    46             C             ld b,(hl)
  4B03    2B             C             dec hl
  4B04    4E             C             ld c,(hl)
  4B05    D1             C             pop de
  4B06    E1             C             pop hl
  4B07    C5             C             push bc
  4B08    44             C             ld b,h
  4B09    4D             C             ld c,l
  4B0A    21 FFFE        C             ld hl,-2
  4B0D    19             C             add hl,de
  4B0E    ED B8          C             lddr
  4B10    D1             C             pop de
  4B11    C3 4B62        C             jp RG
                         C      ;
  4B14    04 57 4F 52    C      CWORD: db 4,'WORD'
  4B18    44             C
  4B19    4AF2           C             dw CROLL
  4B1B    4B1D           C      WORD:  dw $+2
  4B1D    D9             C             exx
  4B1E    2A 423C        C             ld hl,(PLBP)
  4B21    ED 5B 4254     C             ld de,(PRECOMP)
  4B25    C1             C             pop bc
  4B26    3E 20          C             ld a,' '
  4B28    B9             C             cp c
  4B29    20 06          C             jr nz,WOR1
  4B2B    BE             C      WOR2:  cp (hl)
  4B2C    20 03          C             jr nz,WOR1
  4B2E    23             C             inc hl
  4B2F    18 FA          C             jr WOR2
  4B31    E5             C      WOR1:  push hl
  4B32    04             C      WOR5:  inc b
  4B33    23             C             inc hl
  4B34    7E             C             ld a,(hl)
  4B35    B9             C             cp c
  4B36    28 05          C             jr z,WOR3
  4B38    A7             C             and a
  4B39    28 0F          C             jr z,WOR6
  4B3B    18 F5          C             jr WOR5
  4B3D    3E 20          C      WOR3:  ld a,' '
  4B3F    23             C             inc hl
  4B40    BE             C      WOR8:  cp (hl)
  4B41    20 03          C             jr nz,WOR7
  4B43    23             C             inc hl
  4B44    18 FA          C             jr WOR8
  4B46    7E             C      WOR7:  ld a,(hl)
  4B47    A7             C             and a
  4B48    20 08          C             jr nz,WOR9
  4B4A    E5             C      WOR6:  push hl
  4B4B    21 0000        C             ld hl,0
  4B4E    22 423E        C             ld (PBUF),hl
  4B51    E1             C             pop hl
  4B52    22 423C        C      WOR9:  ld (PLBP),hl
  4B55    78             C             ld a,b
  4B56    12             C             ld (de),a
  4B57    13             C             inc de
  4B58    E1             C             pop hl
  4B59    7E             C      WORA:  ld a,(hl)
  4B5A    CD 4B66        C             call UPCASE
  4B5D    12             C             ld (de),a
  4B5E    23             C             inc hl
  4B5F    13             C             inc de
  4B60    10 F7          C             djnz WORA
  4B62    D9             C      RG:    exx
  4B63    C3 46E7        C             jp RTI
                         C      ;
  4B66    E5             C      UPCASE: push hl
  4B67    6F             C              ld l,a
  4B68    3A 4276        C              ld a,(FUPCS)
  4B6B    A7             C              and a
  4B6C    20 03          C              jr nz,UP1
  4B6E    7D             C              ld a,l
  4B6F    E1             C              pop hl
  4B70    C9             C              ret
  4B71    7D             C      UP1:    ld a,l
  4B72    FE 61          C              cp 'a'
  4B74    FA 4B7E        C              jp m,UP2
  4B77    FE 7B          C              cp 'z'+1
  4B79    F2 4B7E        C              jp p,UP2
  4B7C    D6 20          C              sub 20H
  4B7E    E1             C      UP2:    pop hl
  4B7F    C9             C              ret
                         C      ;
  4B80    04 43 41 50    C      CECAPS: db 4,'CAPS'
  4B84    53             C
  4B85    4B14           C              dw CWORD
  4B87    4B89           C      ECAPS:  dw $+2
  4B89    21 4276        C              ld hl,FUPCS
  4B8C    C3 46E6        C              jp RPhl
                         C      ;
                         C      ; : UPCASE CAPS 1SET ;
  4B8F    06 55 50 43    C      CUCASE: db 6,'UPCASE'
  4B93    41 53 45       C
  4B96    4B80           C              dw CECAPS
  4B98    4717           C      UCASE:  dw FUN
  4B9A    4B87 4E4F      C              dw ECAPS,SET,FIM
  4B9E    46CD           C
                         C      ;
                         C      ; : LOWCASE CAPS 0SET ;
  4BA0    07 4C 4F 57    C      CLCASE: db 7,'LOWCASE'
  4BA4    43 41 53 45    C
  4BA8    4B8F           C              dw CUCASE
  4BAA    4717           C      LCASE:  dw FUN
  4BAC    4B87 4E3D      C              dw ECAPS,RESET,FIM
  4BB0    46CD           C
                         C      ;
  4BB2    06 53 45 41    C      CSEARCH: db 6,'SEARCH'
  4BB6    52 43 48       C
  4BB9    4BA0           C               dw CLCASE
  4BBB    4BBD           C      SEARCH:  dw $+2
  4BBD    D9             C               exx
  4BBE    E1             C               pop hl
  4BBF    E5             C      SEAR4:   push hl
  4BC0    ED 5B 4254     C               ld de,(PRECOMP)
  4BC4    0E 00          C               ld c,0
  4BC6    1A             C               ld a,(de)
  4BC7    BE             C               cp (hl)
  4BC8    20 11          C               jr nz,SEAR1
  4BCA    47             C               ld b,a
  4BCB    23             C      SEAR2:   inc hl
  4BCC    13             C               inc de
  4BCD    1A             C               ld a,(de)
  4BCE    BE             C               cp (hl)
  4BCF    20 0A          C               jr nz,SEAR1
  4BD1    10 F8          C               djnz SEAR2
  4BD3    11 0003        C               ld de,3
  4BD6    19             C               add hl,de
  4BD7    D1             C               pop de
  4BD8    E5             C               push hl
  4BD9    18 10          C               jr SEAR3
  4BDB    E1             C      SEAR1:   pop hl
  4BDC    16 00          C               ld d,0
  4BDE    5E             C               ld e,(hl)
  4BDF    13             C               inc de
  4BE0    19             C               add hl,de
  4BE1    5E             C               ld e,(hl)
  4BE2    23             C               inc hl
  4BE3    56             C               ld d,(hl)
  4BE4    EB             C               ex de,hl
  4BE5    7C             C               ld a,h
  4BE6    B5             C               or l
  4BE7    20 D6          C               jr nz,SEAR4
  4BE9    0E 01          C               ld c,1
  4BEB    06 00          C      SEAR3:   ld b,0
  4BED    C5             C               push bc
  4BEE    C3 4B62        C               jp RG
                         C      ;
  4BF1    07 45 58 45    C      CEXEC: db 7,'EXECUTE'
  4BF5    43 55 54 45    C
  4BF9    4BB2           C             dw CSEARCH
  4BFB    4BFD           C      EXEC:  dw $+2
  4BFD    E1             C             pop hl
  4BFE    C3 4711        C             jp RO1
                         C      ;
  4C01    04 4D 4F 44    C      CMODE: db 4,'MODE'
  4C05    45             C
  4C06    4BF1           C             dw CEXEC
  4C08    4C0A           C      MODE: dw $+2
  4C0A    21 4244        C            ld hl,PMOD
  4C0D    C3 46E6        C            jp RPhl
                         C      ;
  4C10    05 41 42 4F    C      CABORT: db 5,'ABORT'
  4C14    52 54          C
  4C16    4C01           C              dw CMODE
  4C18    4785           C      ABORT:  dw PREPARA
                         C      ;
  4C1A    04 51 55 49    C      CQUIT: db 4,'QUIT'
  4C1E    54             C
  4C1F    4C10           C             dw CABORT
  4C21    4789           C             dw PREPARA+4
                         C      ;
  4C23    04 43 4F 4C    C      CCOLD: db 4,'COLD'
  4C27    44             C
  4C28    4C1A           C             dw CQUIT
  4C2A    4717           C             dw FUN
  4C2C    667F 4C18      C             dw NEW,CQUIT-2 ; ABORT
                         C      ;
                         C      ; : HOT NEW ??? ;
  4C30    03 48 4F 54    C      CHOT: db 3,'HOT'
  4C34    4C23           C            dw CCOLD
  4C36    4717           C            dw FUN
  4C38    667F 4749      C            dw NEW,CINIC
                         C      ;
  4C3C    4C3E           C      B_LOOP: dw $+2
  4C3E    E1             C              pop hl
  4C3F    DD 75 FC       C              ld (ix-4),l
  4C42    DD 74 FD       C              ld (ix-3),h
  4C45    E1             C              pop hl
  4C46    DD 75 FE       C              ld (ix-2),l
  4C49    DD 74 FF       C              ld (ix-1),h
  4C4C    11 FFFC        C              ld de,0FFFCH
  4C4F    DD 19          C              add ix,de
  4C51    C3 46E7        C              jp RTI
                         C      ;
  4C54    4C56           C      LEAVE: dw $+2
  4C56    DD 7E 00       C             ld a,(ix+0)
  4C59    DD 77 02       C             ld (ix+2),a
  4C5C    DD 7E 01       C             ld a,(ix+1)
  4C5F    DD 77 03       C             ld (ix+3),a
  4C62    C3 46E7        C             jp RTI
                         C      ;
  4C65    4C67           C      S_LOOP: dw $+2
  4C67    D1             C              pop de
  4C68    18 05          C              jr LOOP1
                         C      ;
  4C6A    4C6C           C      LOOP:  dw $+2
  4C6C    11 0001        C             ld de,1
  4C6F    D5             C      LOOP1: push de
  4C70    CB 12          C             rl d
  4C72    D1             C             pop de
  4C73    08             C             ex af,af'
  4C74    DD 6E 00       C             ld l,(ix+0)
  4C77    DD 66 01       C             ld h,(ix+1)
  4C7A    19             C             add hl,de
  4C7B    DD 75 00       C             ld (ix+0),l
  4C7E    DD 74 01       C             ld (ix+1),h
  4C81    DD 5E 02       C      LOOP2: ld e,(ix+2)
  4C84    DD 56 03       C             ld d,(ix+3)
  4C87    08             C             ex af,af'
  4C88    30 01          C             jr nc,LOOP3
  4C8A    EB             C             ex de,hl
  4C8B    AF             C      LOOP3: xor a
  4C8C    ED 52          C             sbc hl,de
  4C8E    FA 4E7B        C             jp m,BRCH+2
  4C91    11 0004        C             ld de,4
  4C94    DD 19          C             add ix,de
  4C96    03             C             inc bc
  4C97    03             C             inc bc
  4C98    C3 46E7        C             jp RTI
                         C      ;
  4C9B    4C9D           C      LEAVEX: dw $+2
  4C9D    11 0004        C              ld de,4
  4CA0    DD 19          C              add ix,de
  4CA2    C3 4E7B        C              jp BRCH+2
                         C      ;
  4CA5    05 45 52 41    C      CERASE: db 5,'ERASE'
  4CA9    53 45          C
  4CAB    4C30           C              dw CHOT
  4CAD    4717           C      ERASE:  dw FUN
  4CAF    6382 4CBC      C              dw ZERO,FILL,FIM
  4CB3    46CD           C
                         C      ;
  4CB5    04 46 49 4C    C      CFILL: db 4,'FILL'
  4CB9    4C             C
  4CBA    4CA5           C             dw CERASE
  4CBC    4CBE           C      FILL:  dw $+2
  4CBE    D9             C             exx
  4CBF    C1             C             pop bc
  4CC0    79             C             ld a,c
  4CC1    C1             C             pop bc
  4CC2    E1             C             pop hl
  4CC3    77             C             ld (hl),a
  4CC4    E5             C             push hl
  4CC5    D1             C             pop de
  4CC6    13             C             inc de
  4CC7    0B             C             dec bc
  4CC8    ED B0          C             ldir
  4CCA    C3 4B62        C             jp RG
                         C      ;
  4CCD    05 43 4D 4F    C      CCMOVE: db 5,'CMOVE'
  4CD1    56 45          C
  4CD3    4CB5           C              dw CFILL
  4CD5    4CD7           C      CMOVE:  dw $+2
  4CD7    D9             C              exx
  4CD8    C1             C              pop bc
  4CD9    D1             C              pop de
  4CDA    E1             C              pop hl
  4CDB    ED B0          C              ldir
  4CDD    C3 4B62        C              jp RG
                         C      ;
  4CE0    01 21          C      CPOK16: db 1,'!'
  4CE2    4CCD           C              dw CCMOVE
  4CE4    4CE6           C      POK16:  dw $+2
  4CE6    E1             C              pop hl
  4CE7    D1             C              pop de
  4CE8    73             C              ld (hl),e
  4CE9    23             C              inc hl
  4CEA    72             C              ld (hl),d
  4CEB    C3 46E7        C              jp RTI
                         C      ;
  4CEE    01 40          C      CPEK16: db 1,'@'
  4CF0    4CE0           C              dw CPOK16
  4CF2    4CF4           C      PEK16:  dw $+2
  4CF4    E1             C              pop hl
  4CF5    5E             C              ld e,(hl)
  4CF6    23             C              inc hl
  4CF7    56             C              ld d,(hl)
  4CF8    D5             C              push de
  4CF9    C3 46E7        C              jp RTI
                         C      ;
  4CFC    02 21 2B       C      CPO16I: db 2,'!+'
  4CFF    4CEE           C              dw CPEK16
  4D01    4D03           C              dw $+2
  4D03    E1             C              pop hl
  4D04    D1             C              pop de
  4D05    73             C              ld (hl),e
  4D06    23             C              inc hl
  4D07    72             C              ld (hl),d
  4D08    23             C              inc hl
  4D09    C3 46E6        C              jp RPhl
                         C      ;
  4D0C    02 40 2B       C      CPE16I: db 2,'@+'
  4D0F    4CFC           C              dw CPO16I
  4D11    4D13           C      PE16I:  dw $+2
  4D13    E1             C              pop hl
  4D14    5E             C              ld e,(hl)
  4D15    23             C              inc hl
  4D16    56             C              ld d,(hl)
  4D17    23             C              inc hl
  4D18    EB             C              ex de,hl
  4D19    C3 46E5        C              jp RPdehl
                         C      ;
  4D1C    02 43 21       C      CPOK8: db 2,'C!'
  4D1F    4D0C           C             dw CPE16I
  4D21    4D23           C      POK8:  dw $+2
  4D23    E1             C             pop hl
  4D24    D1             C             pop de
  4D25    73             C             ld (hl),e
  4D26    C3 46E7        C             jp RTI
                         C      ;
  4D29    02 43 40       C      CPEK8: db 2,'C@'
  4D2C    4D1C           C             dw CPOK8
  4D2E    4D30           C      PEK8:  dw $+2
  4D30    E1             C             pop hl
  4D31    5E             C             ld e,(hl)
  4D32    16 00          C             ld d,0
  4D34    D5             C             push de
  4D35    C3 46E7        C             jp RTI
                         C      ;
  4D38    03 43 21 2B    C      CPO8I: db 3,'C!+'
  4D3C    4D29           C             dw CPEK8
  4D3E    4D40           C      PO8I:  dw $+2
  4D40    E1             C             pop hl
  4D41    D1             C             pop de
  4D42    73             C             ld (hl),e
  4D43    23             C             inc hl
  4D44    C3 46E6        C             jp RPhl
                         C      ;
  4D47    03 43 40 2B    C      CPE8I: db 3,'C@+'
  4D4B    4D38           C             dw CPO8I
  4D4D    4D4F           C      PE8I:  dw $+2
  4D4F    E1             C             pop hl
  4D50    5E             C             ld e,(hl)
  4D51    16 00          C             ld d,0
  4D53    23             C             inc hl
  4D54    EB             C             ex de,hl
  4D55    C3 46E5        C             jp RPdehl
                         C      ;
                         C      ; : ? @ . ;
  4D58    01 3F          C      CI16: db 1,'?'
  4D5A    4D47           C            dw CPE8I
  4D5C    4717           C            dw FUN
  4D5E    4CF2 5533      C            dw PEK16,IMPSS,FIM
  4D62    46CD           C
                         C      ;
                         C      ; : ?+ @+ . ;
  4D64    02 3F 2B       C      CI16I: db 2,'?+'
  4D67    4D58           C             dw CI16
  4D69    4717           C             dw FUN
  4D6B    4D11 5533      C             dw PE16I,IMPSS,FIM
  4D6F    46CD           C
                         C      ;
                         C      ; : C? C@ . ;
  4D71    02 43 3F       C      CI8: db 2,'C?'
  4D74    4D64           C           dw CI16I
  4D76    4717           C           dw FUN
  4D78    4D2E 5533      C           dw PEK8,IMPSS,FIM
  4D7C    46CD           C
                         C      ;
                         C      ; : C?+ C@+ . ;
  4D7E    03 43 3F 2B    C      CI8I: db 3,'C?+'
  4D82    4D71           C            dw CI8
  4D84    4717           C            dw FUN
  4D86    4D4D 5533      C            dw PE8I,IMPSS,FIM
  4D8A    46CD           C
                         C      ;
  4D8C    03 53 50 40    C      CSPEK: db 3,'SP@'
  4D90    4D7E           C             dw CI8I
  4D92    4D94           C      SPOS:  dw $+2
  4D94    21 0000        C             ld hl,0
  4D97    39             C             add hl,sp
  4D98    C3 46E6        C             jp RPhl
                         C      ;
  4D9B    03 53 50 21    C      CSPOK: db 3,'SP!'
  4D9F    4D8C           C             dw CSPEK
  4DA1    4DA3           C             dw $+2
  4DA3    E1             C             pop hl
  4DA4    22 4236        C             ld (PPP),hl
  4DA7    F9             C             ld sp,hl
  4DA8    C3 46E7        C             jp RTI
                         C      ;
  4DAB    02 53 30       C      CS0: db 2,'S0'
  4DAE    4D9B           C           dw CSPOK
  4DB0    4DB2           C      S0:  dw $+2
  4DB2    21 4236        C           ld hl,PPP
  4DB5    C3 46E6        C           jp RPhl
                         C      ;
                         C      ; : DEPTH S0 @ SP@ - / 1- ;
  4DB8    05 44 45 50    C      CDEPTH: db 5,'DEPTH'
  4DBC    54 48          C
  4DBE    4DAB           C              dw CS0
  4DC0    4717           C              dw FUN
  4DC2    4DB0 4CF2      C              dw S0,PEK16,SPOS,MENOS
  4DC6    4D92 4FE4      C
  4DCA    640C 62D7      C              dw DIV,MENOS1,FIM
  4DCE    46CD           C
                         C      ;
  4DD0    02 3E 52       C      CINRP: db 2,'>R'
  4DD3    4DB8           C             dw CDEPTH
  4DD5    4DD7           C      INRP:  dw $+2
  4DD7    E1             C             pop hl
  4DD8    DD 2B          C             dec ix
  4DDA    DD 74 00       C             ld (ix),h
  4DDD    DD 2B          C             dec ix
  4DDF    DD 75 00       C             ld (ix),l
  4DE2    C3 46E7        C             jp RTI
                         C      ;
  4DE5    02 52 3E       C      COUTRP: db 2,'R>'
  4DE8    4DD0           C              dw CINRP
  4DEA    4DEC           C      OUTRP:  dw $+2
  4DEC    DD 6E 00       C              ld l,(ix)
  4DEF    DD 23          C              inc ix
  4DF1    DD 66 00       C              ld h,(ix)
  4DF4    DD 23          C              inc ix
  4DF6    C3 46E6        C              jp RPhl
                         C      ;
  4DF9    01 52          C      CLERP: db 1,'R'
  4DFB    4DE5           C             dw COUTRP
  4DFD    4DFF           C      LERP:  dw $+2
  4DFF    DD 6E 00       C             ld l,(ix)
  4E02    DD 66 01       C             ld h,(ix+1)
  4E05    C3 46E6        C             jp RPhl
                         C      ;
  4E08    05 46 57 4F    C      CFWORD: db 5,'FWORD'
  4E0C    52 44          C
  4E0E    4DF9           C              dw CLERP
  4E10    4E12           C      FWORD:  dw $+2
  4E12    21 423E        C              ld hl,PBUF
  4E15    C3 46E6        C              jp RPhl
                         C      ;
                         C      ; : END, , , ;
  4E18    04 45 4E 44    C      CMARK_E: db 4,'END,'
  4E1C    2C             C
  4E1D    4E08           C               dw CFWORD
  4E1F    4717           C      MARK_E:  dw FUN
  4E21    5650 5650      C               dw POKD16,POKD16,FIM
  4E25    46CD           C
                         C      ;
  4E27    01 49          C      CLELOOP: db 1,'I'
  4E29    4E18           C               dw CMARK_E
  4E2B    4E2D           C      LELOOP:  dw $+2
  4E2D    DD 6E 00       C               ld l,(ix)
  4E30    DD 66 01       C               ld h,(ix+1)
  4E33    C3 46E6        C               jp RPhl
                         C      ;
  4E36    04 30 53 45    C      CRESET: db 4,'0SET'
  4E3A    54             C
  4E3B    4E27           C              dw CLELOOP
  4E3D    4E3F           C      RESET:  dw $+2
  4E3F    E1             C              pop hl
  4E40    36 00          C              ld (hl),0
  4E42    23             C              inc hl
  4E43    36 00          C              ld (hl),0
  4E45    C3 46E7        C              jp RTI
                         C      ;
  4E48    04 31 53 45    C      CSET: db 4,'1SET'
  4E4C    54             C
  4E4D    4E36           C            dw CRESET
  4E4F    4E51           C      SET:  dw $+2
  4E51    E1             C            pop hl
  4E52    36 FF          C            ld (hl),-1
  4E54    23             C            inc hl
  4E55    36 FF          C            ld (hl),-1
  4E57    C3 46E7        C            jp RTI
                         C      ;
  4E5A    07 30 42 52    C      CBRCH0: db 7,'0BRANCH'
  4E5E    41 4E 43 48    C
  4E62    4E48           C              dw CSET
  4E64    4E66           C      BRCH0:  dw $+2
  4E66    E1             C              pop hl
  4E67    7D             C              ld a,l
  4E68    B4             C              or h
  4E69    28 10          C              jr z,BRCH+2
  4E6B    03             C              inc bc
  4E6C    03             C              inc bc
  4E6D    C3 46E7        C              jp RTI
                         C      ;
  4E70    06 42 52 41    C      CBRCH: db 6,'BRANCH'
  4E74    4E 43 48       C
  4E77    4E5A           C             dw CBRCH0
  4E79    4E7B           C      BRCH:  dw $+2
  4E7B    0A             C             ld a,(bc)
  4E7C    6F             C             ld l,a
  4E7D    03             C             inc bc
  4E7E    0A             C             ld a,(bc)
  4E7F    47             C             ld b,a
  4E80    4D             C             ld c,l
  4E81    C3 46E7        C             jp RTI
                         C      ;
  4E84    04 50 41 47    C      CPAGE: db 4,'PAGE'
  4E88    45             C
  4E89    4E70           C             dw CBRCH
  4E8B    4E8D           C             dw $+2
  4E8D    C5             C             push bc
  4E8E    CD 469C        C             call CLS
  4E91    C1             C             pop bc
  4E92    C3 46E7        C             jp RTI
                         C      ;
  4E95    04 42 41 53    C      CBASE: db 4,'BASE'
  4E99    45             C
  4E9A    4E84           C             dw CPAGE
  4E9C    4E9E           C      BASE:  dw $+2
  4E9E    21 4246        C             ld hl,PBAS
  4EA1    C3 46E6        C             jp RPhl
                         C      ;
  4EA4    06 4E 55 4D    C      CNUMBER: db 6,'NUMBER'
  4EA8    42 45 52       C
  4EAB    4E95           C               dw CBASE
  4EAD    4717           C      NUMBER:  dw FUN
  4EAF    495F 4E3D      C               dw DPL,RESET,PUSHN,TUN,RESET
  4EB3    5640 4284      C
  4EB7    4E3D           C
  4EB9    6382 6382      C               dw ZERO,ZERO,HERE,HERE,PEK8,SWAP
  4EBD    56C4 56C4      C
  4EC1    4D2E 5246      C
  4EC5    5953 47C2      C               dw MAIS1,DUP,PEK8,PUSHN,'-',IGU
  4EC9    4D2E 5640      C
  4ECD    002D 481E      C
  4ED1    4E64 4EE1      C               dw BRCH0,NUMB1,DPL,SET,MAIS1,ONE
  4ED5    495F 4E4F      C
  4ED9    5953 6390      C
  4EDD    4E79 4EE3      C               dw BRCH,NUMB1+2
  4EE1    6382 63AE      C      NUMB1:   dw ZERO,THREE,ROLL,SWAP,B_LOOP
  4EE5    4AF9 5246      C
  4EE9    4C3C           C
  4EEB    47C2 4D2E      C      NUMB2:   dw DUP,PEK8,DUP,PUSHN,'.',IGU
  4EEF    47C2 5640      C
  4EF3    002E 481E      C
  4EF7    4E64 4F07      C               dw BRCH0,NUMB3,PUSHN,TUN,SET
  4EFB    5640 4284      C
  4EFF    4E4F           C
  4F01    4886 4E79      C               dw DROP,BRCH,NUMB4
  4F05    4F31           C
  4F07    4E9C 4CF2      C      NUMB3:   dw BASE,PEK16,DIGIT,IGU0,BRCH0
  4F0B    50F5 4855      C
  4F0F    4E64           C
  4F11    4F17 4C9B      C               dw NUMB9,LEAVEX,NUMB5
  4F15    4F67           C
  4F17    5DCA 4E9C      C      NUMB9:   dw DSWAP,BASE,PEK16,UVEZES,DSWAP
  4F1B    4CF2 52AE      C
  4F1F    5DCA           C
  4F21    4E9C 4CF2      C               dw BASE,PEK16,UVEZES,DROP,DMAIS
  4F25    52AE 4886      C
  4F29    5D58           C
  4F2B    5246 63AE      C               dw SWAP,THREE,ROLL
  4F2F    4AF9           C
  4F31    5953 4C6A      C      NUMB4:   dw MAIS1,LOOP,NUMB2,DROP,SWAP,PUSHN
  4F35    4EEB 4886      C
  4F39    5246 5640      C
  4F3D    4284 4CF2      C               dw TUN,PEK16,IGU0,BRCH0,NUMB8,DROP
  4F41    4855 4E64      C
  4F45    4F49 4886      C
  4F49    495F 4CF2      C      NUMB8:   dw DPL,PEK16,BRCH0,NUMB6,PUSHN
  4F4D    4E64 4F63      C
  4F51    5640           C
  4F53    4284 4CF2      C               dw TUN,PEK16,BRCH0,NUMB7,DMINUS
  4F57    4E64 4F61      C
  4F5B    56F6           C
  4F5D    4E79 4F63      C               dw BRCH,NUMB6
  4F61    56E7           C      NUMB7:   dw MINUS
  4F63    6373 46CD      C      NUMB6:   dw TRUE,FIM
  4F67    5AC7 5AC7      C      NUMB5:   dw DDROP,DDROP,ZERO,FIM
  4F6B    6382 46CD      C
                         C      ;
  4F6F    7A             C      RM1:  ld a,d
  4F70    A8             C            xor b
  4F71    08             C            ex af,af'
  4F72    7A             C            ld a,d
  4F73    A7             C            and a
  4F74    F2 4F7D        C            jp p,RM11
  4F77    21 0000        C            ld hl,0
  4F7A    ED 52          C            sbc hl,de
  4F7C    EB             C            ex de,hl
  4F7D    60             C      RM11: ld h,b
  4F7E    69             C            ld l,c
  4F7F    78             C            ld a,b
  4F80    A7             C            and a
  4F81    F0             C            ret p
  4F82    21 0000        C            ld hl,0
  4F85    ED 42          C            sbc hl,bc
  4F87    C9             C            ret
                         C      ;
  4F88    7D             C      RM2:  ld a,l
  4F89    01 0800        C            ld bc,800H
  4F8C    61             C            ld h,c
  4F8D    69             C            ld l,c
  4F8E    29             C      RM22: add hl,hl
  4F8F    8F             C            adc a,a
  4F90    30 02          C            jr nc,RM21
  4F92    19             C            add hl,de
  4F93    89             C            adc a,c
  4F94    10 F8          C      RM21: djnz RM22
  4F96    4F             C            ld c,a
  4F97    C9             C            ret
                         C      ;
  4F98    08             C      RM3:  ex af,af'
  4F99    F0             C            ret p
  4F9A    EB             C            ex de,hl
  4F9B    21 0000        C            ld hl,0
  4F9E    ED 52          C            sbc hl,de
  4FA0    C9             C            ret
                         C      ;
  4FA1    01 2A          C      CVEZES: db 1,'*'
  4FA3    4EA4           C              dw CNUMBER
  4FA5    4FA7           C      VEZES:  dw $+2
  4FA7    D9             C              exx
  4FA8    E1             C              pop hl
  4FA9    D1             C              pop de
  4FAA    E5             C              push hl
  4FAB    D5             C              push de
  4FAC    AF             C              xor a
  4FAD    ED 52          C              sbc hl,de
  4FAF    D1             C              pop de
  4FB0    E1             C              pop hl
  4FB1    FA 4FB5        C              jp m,VEZ0
  4FB4    EB             C              ex de,hl
  4FB5    7C             C      VEZ0:   ld a,h
  4FB6    4D             C              ld c,l
  4FB7    21 0000        C              ld hl,0
  4FBA    06 10          C              ld b,16
  4FBC    1F             C              rra
  4FBD    CB 19          C              rr c
  4FBF    30 01          C      VEZ1:   jr nc,VEZ2
  4FC1    19             C              add hl,de
  4FC2    CB 1C          C      VEZ2:   rr h
  4FC4    CB 1D          C              rr l
  4FC6    1F             C              rra
  4FC7    CB 19          C              rr c
  4FC9    10 F4          C              djnz VEZ1
  4FCB    67             C              ld h,a
  4FCC    69             C              ld l,c
  4FCD    E5             C              push hl
  4FCE    C3 4B62        C              jp RG
                         C      ;
                         C      ;
                         C      ;  Rotina elaborada usando o metodo
                         C      ; do deslocamento
                         C      ;
                         C      ;        exx
                         C      ;        pop hl
                         C      ;        pop bc
                         C      ;        ld de,0
                         C      ;        push hl
                         C      ;        push bc
                         C      ;        xor a
                         C      ;        sbc hl,bc
                         C      ;        jp m,VEZ0
                         C      ;        pop bc
                         C      ;        pop hl
                         C      ;        jr VEZ1
                         C      ;VEZ0:   pop hl
                         C      ;        pop bc
                         C      ;VEZ1:   srl b
                         C      ;        rr c
                         C      ;        jr nc,VEZ2
                         C      ;        push hl
                         C      ;        add hl,de
                         C      ;        ex de,hl
                         C      ;        pop hl
                         C      ;VEZ2:   add hl,hl
                         C      ;        ld a,b
                         C      ;        or c
                         C      ;        jr nz,VEZ1
                         C      ;        push de
                         C      ;        jp RG
                         C      ;
                         C      ;
                         C      ; Rotina anterior (original)
                         C      ;
                         C      ;        exx
                         C      ;        pop bc
                         C      ;        pop de
                         C      ;        call RM1
                         C      ;        call RM2
                         C      ;        call RM3
                         C      ;        push hl
  4FD1    C3 4B62        C               jp RG
                         C      ;
  4FD4    01 2B          C      CMAIS: db 1,'+'
  4FD6    4FA1           C             dw CVEZES
  4FD8    4FDA           C      MAIS:  dw $+2
  4FDA    E1             C             pop hl
  4FDB    D1             C             pop de
  4FDC    19             C             add hl,de
  4FDD    C3 46E6        C             jp RPhl
                         C      ;
  4FE0    01 2D          C      CMENOS: db 1,'-'
  4FE2    4FD4           C             dw CMAIS
  4FE4    4FE6           C      MENOS: dw $+2
  4FE6    D1             C             pop de
  4FE7    E1             C             pop hl
  4FE8    A7             C             and a
  4FE9    ED 52          C             sbc hl,de
  4FEB    C3 46E6        C             jp RPhl
                         C      ;
  4FEE    05 44 2F 4D    C      CDMOD: db 5,'D/MOD' ; 2 0 '/' (ZERO SWAP D/MOD DROP)
  4FF2    4F 44          C
  4FF4    4FE0           C             dw CMENOS
  4FF6    4FF8           C      DMOD:  dw $+2
  4FF8    D9             C             exx
  4FF9    E1             C             pop hl ; 0
  4FFA    D1             C             pop de ; 0
  4FFB    C1             C             pop bc ; 2
  4FFC    7C             C             ld a,h
  4FFD    B5             C             or l
  4FFE    CA 5F96        C             jp z,ZRDIV
  5001    7C             C             ld a,h
  5002    AA             C             xor d
  5003    08             C             ex af,af'
  5004    7D             C             ld a,l
  5005    A7             C             and a
  5006    F2 500B        C             jp p,DMOD1
  5009    ED 44          C             neg
  500B    57             C      DMOD1: ld d,a
  500C    60             C             ld h,b
  500D    69             C             ld l,c
  500E    7B             C             ld a,e
  500F    5A             C             ld e,d
  5010    A7             C             and a
  5011    F2 501D        C             jp p,DMOD2
  5014    2F             C             cpl
  5015    21 0000        C             ld hl,0
  5018    ED 42          C             sbc hl,bc
  501A    20 01          C             jr nz,DMOD2
  501C    3C             C             inc a
  501D    57             C      DMOD2: ld d,a
  501E    CD 5029        C             call DMOD3
  5021    CD 4F98        C             call RM3
  5024    E5             C             push hl
  5025    C5             C             push bc
  5026    C3 4B62        C             jp RG
                         C
  5029    06 10          C      DMOD3: ld b,16
  502B    29             C      DMOD5: add hl,hl
  502C    7A             C             ld a,d
  502D    8A             C             adc a,d
  502E    57             C             ld d,a
  502F    93             C             sub e
  5030    FA 5035        C             jp m,DMOD4
  5033    2C             C             inc l
  5034    57             C             ld d,a
  5035    10 F4          C      DMOD4: djnz DMOD5
  5037    4A             C             ld c,d
  5038    C9             C             ret
                         C      ;
  5039    05 42 4C 41    C      CBLANK: db 5,'BLANK'
  503D    4E 4B          C
  503F    4FEE           C              dw CDMOD
  5041    5043           C      BLANK:  dw $+2
  5043    21 0020        C              ld hl,' '
  5046    C3 46E6        C              jp RPhl
                         C      ;
  5049    05 53 50 41    C      CSPACE: db 5,'SPACE'
  504D    43 45          C
  504F    5039           C              dw CBLANK
  5051    5053           C      SPACE:  dw $+2
  5053    3E 20          C              ld a,' '
  5055    CD 44D2        C              call VIDEO
  5058    C3 46E7        C              jp RTI
                         C      ;
  505B    06 53 54 52    C      CSTRING: db 6,'STRING'
  505F    49 4E 47       C
  5062    5049           C               dw CSPACE
  5064    4717           C      STRING:  dw FUN
  5066    5246 6382      C               dw SWAP,ZERO,MAX,DUPC,BRCH0
  506A    50AB 47D0      C
  506E    4E64           C
  5070    507E 6382      C               dw STRING2,ZERO,B_LOOP
  5074    4C3C           C
  5076    47C2 48BD      C      STRING1: dw DUP,EMIT,LOOP,STRING1
  507A    4C6A 5076      C
  507E    4886 46CD      C      STRING2: dw DROP,FIM
                         C      ;
  5082    06 53 50 41    C      CSPACS: db 6,'SPACES'
  5086    43 45 53       C
  5089    505B           C              dw CSTRING
  508B    4717           C      SPACS:  dw FUN
  508D    5041 5064      C              dw BLANK,STRING,FIM
  5091    46CD           C
                         C      ;
  5093    05 5A 45 52    C      CZEROS: db 5,'ZEROS'
  5097    4F 53          C
  5099    5082           C              dw CSPACS
  509B    4717           C      ZEROS:  dw FUN
  509D    5640 0030      C              dw PUSHN,'0',STRING,FIM
  50A1    5064 46CD      C
                         C      ;
  50A5    03 4D 41 58    C      CMAX: db 3,'MAX'
  50A9    5093           C            dw CZEROS
  50AB    4717           C      MAX:  dw FUN
  50AD    599F 47FF      C            dw DDUP,MENOR,BRCH0,MAX2,SWAP
  50B1    4E64 50B7      C
  50B5    5246           C
  50B7    4886 46CD      C      MAX2: dw DROP,FIM
                         C      ;
  50BB    03 4D 49 4E    C      CMIN: db 3,'MIN'
  50BF    50A5           C            dw CMAX
  50C1    4717           C      MIN:  dw FUN
  50C3    599F 4814      C            dw DDUP,MAIOR,BRCH0,MIN2,SWAP
  50C7    4E64 50CD      C
  50CB    5246           C
  50CD    4886 46CD      C      MIN2: dw DROP,FIM
                         C      ;
  50D1    05 41 53 43    C      CASCII: db 5,'ASCII'
  50D5    49 49          C
  50D7    50BB           C              dw CMIN
  50D9    50DB           C      ASCII:  dw $+2
  50DB    E1             C              pop hl
  50DC    7D             C              ld a,l
  50DD    E6 0F          C              and 15
  50DF    C6 30          C              add a,30H
  50E1    FE 3A          C              cp 3AH
  50E3    38 02          C              jr c,ASCI1
  50E5    C6 07          C              add a,7
  50E7    6F             C      ASCI1:  ld l,a
  50E8    26 00          C              ld h,0
  50EA    C3 46E6        C              jp RPhl
                         C      ;
  50ED    05 44 49 47    C      CDIGIT: db 5,'DIGIT'
  50F1    49 54          C
  50F3    50D1           C              dw CASCII
  50F5    50F7           C      DIGIT:  dw $+2
  50F7    E1             C              pop hl
  50F8    D1             C              pop de
  50F9    7B             C              ld a,e
  50FA    D6 30          C              sub 30H
  50FC    FA 5116        C              jp m,DIGI2
  50FF    FE 0A          C              cp 10
  5101    FA 510B        C              jp m,DIGI1
  5104    D6 07          C              sub 7
  5106    FE 0A          C              cp 10
  5108    FA 5116        C              jp m,DIGI2
  510B    BD             C      DIGI1:  cp l
  510C    F2 5116        C              jp p,DIGI2
  510F    5F             C              ld e,a
  5110    21 FFFF        C              ld hl,-1
  5113    C3 46E5        C              jp RPdehl
  5116    6C             C      DIGI2:  ld l,h
  5117    C3 46E6        C              jp RPhl
                         C      ;
  511A    04 4E 45 58    C      CNEXT1: db 4,'NEXT'
  511E    54             C
  511F    50ED           C              dw CDIGIT
  5121    4717           C              dw FUN
  5123    5640 00C3      C              dw PUSHN,0C3H,POKD8,PUSHN
  5127    596D 5640      C
  512B    46E7 5650      C              dw RTI,POKD16,FIM
  512F    46CD           C
                         C      ;
  5131    07 4E 45 58    C      CNEXT2: db 7,'NEXT->H'
  5135    54 2D 3E 48    C
  5139    511A           C              dw CNEXT1
  513B    4717           C              dw FUN
  513D    5640 00C3      C              dw PUSHN,0C3H,POKD8,PUSHN
  5141    596D 5640      C
  5145    46E6 5650      C              dw RPhl,POKD16,FIM
  5149    46CD           C
                         C      ;
  514B    08 4E 45 58    C      CNEXT3: db 8,'NEXT->DH'
  514F    54 2D 3E 44    C
  5153    48             C
  5154    5131           C              dw CNEXT2
  5156    4717           C              dw FUN
  5158    5640 00C3      C              dw PUSHN,0C3H,POKD8,PUSHN
  515C    596D 5640      C
  5160    46E5 5650      C              dw RPdehl,POKD16,FIM
  5164    46CD           C
                         C      ;
  5166    01 4A          C      CJ: db 1,'J'
  5168    514B           C          dw CNEXT3
  516A    516C           C          dw $+2
  516C    DD 6E 04       C          ld l,(ix+4)
  516F    DD 66 05       C          ld h,(ix+5)
  5172    C3 46E6        C          jp RPhl
                         C      ;
                         C      ; : ' BLANK WORD CONTEXT @ @ SEARCH IF ENTRY SEARCH IF COMPILER @ SEARCH IF QUESTION THEN THEN THEN ;
  5175    01 27          C      CPESQ: db 1,27H ;"'"
  5177    5166           C             dw CJ
  5179    4717           C      PESQ:  dw FUN
  517B    5041 4B1B      C             dw BLANK,WORD,CONTEXT
  517F    5569           C
  5181    4CF2 4CF2      C             dw PEK16,PEK16,SEARCH,BRCH0,P1
  5185    4BBB 4E64      C
  5189    519F           C
  518B    5699 4BBB      C             dw ENTRY,SEARCH,BRCH0,P1
  518F    4E64 519F      C
  5193    558E 4CF2      C             dw COMPILER,PEK16,SEARCH,BRCH0
  5197    4BBB 4E64      C
  519B    519F 5F1C      C             dw P1,QUESTION
  519F    5990 46CD      C      P1:    dw CR,FIM
                         C      ;
                         C      ; : DOES> R> ENTRY DUP C@ 5 + + ! SCODE ........
  51A3    05 44 4F 45    C      CDOES:    db 5,'DOES>'
  51A7    53 3E          C
  51A9    5175           C                dw CPESQ
  51AB    4717           C      DOES:     dw FUN
  51AD    4DEA 5699      C                dw OUTRP,ENTRY,DUP,PEK8
  51B1    47C2 4D2E      C
  51B5    5640 0005      C                dw PUSHN,5,MAIS,MAIS,POK16
  51B9    4FD8 4FD8      C
  51BD    4CE4           C
  51BF    5EB2           C                dw SCODE
  51C1    DD 2B          C      _ATIVATE: dec ix
  51C3    DD 70 00       C                ld (ix+0),b
  51C6    DD 2B          C                dec ix
  51C8    DD 71 00       C                ld (ix+0),c
  51CB    EB             C                ex de,hl
  51CC    4E             C                ld c,(hl)
  51CD    23             C                inc hl
  51CE    46             C                ld b,(hl)
  51CF    23             C                inc hl
  51D0    C3 46E6        C                jp RPhl
                         C      ;
                         C      ; : <BUILDS 0 CONST ;
  51D3    07 3C 42 55    C      CBUILDS: db 7,'<BUILDS'
  51D7    49 4C 44 53    C
  51DB    51A3           C               dw CDOES
  51DD    4717           C      BUILDS:  dw FUN
  51DF    6382 5EC7      C               dw ZERO,CONST,FIM
  51E3    46CD           C
                         C      ;
  51E5    03 50 54 43    C      CPTC: db 3,'PTC'
  51E9    51D3           C            dw CBUILDS
  51EB    51ED           C            dw $+2
                         C      IFDEF CPM
                         C            ld a,27
                         C            call VIDEO
                         C            ld a,'Y'
                         C            call VIDEO
                         C            pop hl
                         C            ld a,' '
                         C            add a,l
                         C            ld e,a
                         C            pop hl
                         C            ld a,' '
                         C            add a,l
                         C            call VIDEO
                         C            ld a,e
                         C            call VIDEO
                         C      ELSE
  51ED    E1             C            pop hl
  51EE    7D             C            ld a,l
  51EF    3C             C            inc a
  51F0    FE 21          C            cp 33
  51F2    F2 51F8        C            jp p,PT1
  51F5    32 F3DD        C            ld (MSX_CSRX),a
  51F8    E1             C      PT1:  pop hl
  51F9    7D             C            ld a,l
  51FA    3C             C            inc a
  51FB    FE 19          C            cp 25
  51FD    F2 46E7        C            jp p,RTI
  5200    32 F3DC        C            ld (MSX_CSRY),a
                         C      ENDIF
  5203    C3 46E7        C            jp RTI
                         C      ;
                         C      ;      pop de
                         C      ;      ld h,l
                         C      ;      inc h
                         C      ;      ld l,e
                         C      ;      inc l
                         C      ;      call 0C6H
                         C      ;      jp RTI
                         C      ;
                         C
  5206    03 2B 53 50    C      CMAISP: db 3,'+SP'
  520A    51E5           C              dw CPTC
  520C    520E           C      MAISP:  dw $+2
  520E    E1             C              pop hl
  520F    39             C              add hl,sp
  5210    C3 46E6        C              jp RPhl
                         C      ;
  5213    04 53 2D 3E    C      CC1632: db 4,'S->D'
  5217    44             C
  5218    5206           C              dw CMAISP
  521A    521C           C      C1632:  dw $+2
  521C    D1             C              pop de
  521D    21 0000        C              ld hl,0
  5220    7A             C              ld a,d
  5221    E6 80          C              and 80H
  5223    CA 46E5        C              jp z,RPdehl
  5226    2B             C              dec hl
  5227    C3 46E5        C              jp RPdehl
                         C      ;
                         C      ; : PICK 1- 2 * +SP @ ;
  522A    04 50 49 43    C      CPICK: db 4,'PICK'
  522E    4B             C
  522F    5213           C             dw CC1632
  5231    4717           C             dw FUN
  5233    62D7 639E      C             dw MENOS1,TWO,VEZES,MAISP
  5237    4FA5 520C      C
  523B    4CF2 46CD      C             dw PEK16,FIM
                         C      ;
  523F    04 53 57 41    C      CSWAP: db 4,'SWAP'
  5243    50             C
  5244    522A           C             dw CPICK
  5246    5248           C      SWAP:  dw $+2
  5248    E1             C             pop hl
  5249    E3             C             ex (sp),hl
  524A    C3 46E6        C             jp RPhl
                         C      ;
  524D    02 2B 2D       C      CMODUL: db 2,'+-'
  5250    523F           C              dw CSWAP
  5252    4717           C      MODUL:  dw FUN
  5254    4841 4E64      C              dw MEN0,BRCH0,MODU1,MINUS
  5258    525C 56E7      C
  525C    46CD           C      MODU1:  dw FIM
                         C      ;
  525E    03 44 2B 2D    C      CDMODUL: db 3,'D+-'
  5262    524D           C               dw CMODUL
  5264    4717           C      DMODUL:  dw FUN
  5266    4841 4E64      C               dw MEN0,BRCH0,DMODU1,DMINUS
  526A    526E 56F6      C
  526E    46CD           C      DMODU1:  dw FIM
                         C      ;
  5270    03 41 42 53    C      CABS: db 3,'ABS'
  5274    525E           C            dw CDMODUL
  5276    5278           C      ABS:  dw $+2
  5278    D1             C            pop de
  5279    CB 7A          C            bit 7,d
  527B    28 07          C            jr z,ABS2
  527D    21 0000        C      ABS1: ld hl,0
  5280    A7             C            and a
  5281    ED 52          C            sbc hl,de
  5283    EB             C            ex de,hl
  5284    D5             C      ABS2: push de
  5285    C3 46E7        C            jp RTI
                         C      ;
  5288    04 44 41 42    C      CDABS: db 4,'DABS'
  528C    53             C
  528D    5270           C             dw CABS
  528F    5291           C      DABS:  dw $+2
  5291    E1             C             pop hl
  5292    CB 7C          C             bit 7,h
  5294    CA 46E6        C             jp z,RPhl
  5297    E3             C      DABS1: ex (sp),hl
  5298    EB             C             ex de,hl
  5299    21 0000        C             ld hl,0
  529C    AF             C             xor a
  529D    ED 52          C             sbc hl,de
  529F    E3             C             ex (sp),hl
  52A0    EB             C             ex de,hl
  52A1    21 0000        C             ld hl,0
  52A4    ED 52          C             sbc hl,de
  52A6    C3 46E6        C             jp RPhl
                         C      ;
  52A9    02 55 2A       C      CUVEZES: db 2,'U*'
  52AC    5288           C               dw CDABS
  52AE    52B0           C      UVEZES:  dw $+2
  52B0    D1             C               pop de
  52B1    E1             C               pop hl
  52B2    C5             C               push bc
  52B3    4C             C               ld c,h
  52B4    7D             C               ld a,l
  52B5    CD 52CC        C               call UVEZESR
  52B8    E5             C               push hl
  52B9    67             C               ld h,a
  52BA    79             C               ld a,c
  52BB    4C             C               ld c,h
  52BC    CD 52CC        C               call UVEZESR
  52BF    D1             C               pop de
  52C0    41             C               ld b,c
  52C1    4A             C               ld c,d
  52C2    09             C               add hl,bc
  52C3    CE 00          C               adc a,0
  52C5    55             C               ld d,l
  52C6    6C             C               ld l,h
  52C7    67             C               ld h,a
  52C8    C1             C               pop bc
  52C9    C3 46E5        C               jp RPdehl
                         C
  52CC    21 0000        C      UVEZESR: ld hl,0
  52CF    06 08          C               ld b,8
  52D1    29             C      UVEZR1:  add hl,hl
  52D2    17             C               rla
  52D3    30 03          C               jr nc,UVEZR2
  52D5    19             C               add hl,de
  52D6    CE 00          C               adc a,0
  52D8    10 F7          C      UVEZR2:  djnz UVEZR1
  52DA    C9             C               ret
                         C      ;
  52DB    02 55 2F       C      CUDIV: db 2,'U/'
  52DE    52A9           C             dw CUVEZES
  52E0    52E2           C      UDIV:  dw $+2
  52E2    21 0004        C             ld hl,4
  52E5    39             C             add hl,sp
  52E6    5E             C             ld e,(hl)
  52E7    71             C             ld (hl),c
  52E8    23             C             inc hl
  52E9    56             C             ld d,(hl)
  52EA    70             C             ld (hl),b
  52EB    C1             C             pop bc
  52EC    E1             C             pop hl
  52ED    7D             C             ld a,l
  52EE    91             C             sub c
  52EF    7C             C             ld a,h
  52F0    98             C             sbc a,b
  52F1    38 08          C             jr c,UDIV1
  52F3    21 FFFF        C             ld hl,-1
  52F6    11 FFFF        C             ld de,-1
  52F9    18 26          C             jr UDIV6
  52FB    3E 10          C      UDIV1: ld a,10H
  52FD    29             C      UDIV2: add hl,hl
  52FE    17             C             rla
  52FF    EB             C             ex de,hl
  5300    29             C             add hl,hl
  5301    30 02          C             jr nc,UDIV3
  5303    13             C             inc de
  5304    A7             C             and a
  5305    EB             C      UDIV3: ex de,hl
  5306    1F             C             rra
  5307    F5             C             push af
  5308    30 08          C             jr nc,UDIV4
  530A    7D             C             ld a,l
  530B    91             C             sub c
  530C    6F             C             ld l,a
  530D    7C             C             ld a,h
  530E    98             C             sbc a,b
  530F    67             C             ld h,a
  5310    18 0A          C             jr UDIV5
  5312    7D             C      UDIV4: ld a,l
  5313    91             C             sub c
  5314    6F             C             ld l,a
  5315    7C             C             ld a,h
  5316    98             C             sbc a,b
  5317    67             C             ld h,a
  5318    30 02          C             jr nc,UDIV5
  531A    09             C             add hl,bc
  531B    1B             C             dec de
  531C    13             C      UDIV5: inc de
  531D    F1             C             pop af
  531E    3D             C             dec a
  531F    20 DC          C             jr nz,UDIV2
  5321    C1             C      UDIV6: pop bc
  5322    E5             C             push hl
  5323    D5             C             push de
  5324    C3 46E7        C             jp RTI
                         C      ;
  5327    05 4D 2F 4D    C      CMMOD: db 5,'M/MOD'
  532B    4F 44          C
  532D    52DB           C             dw CUDIV
  532F    4717           C      MMOD:  dw FUN
  5331    4DD5 6382      C             dw INRP,ZERO,LERP,UDIV,OUTRP
  5335    4DFD 52E0      C
  5339    4DEA           C
  533B    5246 4DD5      C             dw SWAP,INRP,UDIV,OUTRP,FIM
  533F    52E0 4DEA      C
  5343    46CD           C
                         C      ;
                         C      ; : <# PAD HLD ! ;
  5345    02 3C 23       C      CININUM: db 2,'<#'
  5348    5327           C               dw CMMOD
  534A    4717           C      ININUM:  dw FUN
  534C    4992 496D      C               dw PAD,HLD,POK16,FIM
  5350    4CE4 46CD      C
                         C      ;
                         C      ; : # BASE @ M/MOD ROT 9 OVER < 7 + THEN 48 + HOLD ;
  5354    01 23          C      CNUMCAR: db 1,'#'
  5356    5345           C               dw CININUM
  5358    4717           C      NUMCAR:  dw FUN
  535A    4E9C 4CF2      C               dw BASE,PEK16,MMOD,ROT,PUSHN
  535E    532F 4877      C
  5362    5640           C
  5364    0009 5982      C               dw 9,OVER,MENOR,BRCH0,NUMCA1
  5368    47FF 4E64      C
  536C    5374           C
  536E    5640 0007      C               dw PUSHN,7,MAIS
  5372    4FD8           C
  5374    5640 0030      C      NUMCA1:  dw PUSHN,48,MAIS,HOLD,FIM
  5378    4FD8 497C      C
  537C    46CD           C
                         C      ;
                         C      ; : #S BEGIN # OVER OVER OR 0= UNTIL ;
  537E    02 23 53       C      CNUMFRM: db 2,'#S'
  5381    5354           C               dw CNUMCAR
  5383    4717           C      NUMFRM:  dw FUN
  5385    5358 5982      C               dw NUMCAR,OVER,OVER,OR,IGU0
  5389    5982 632F      C
  538D    4855           C
  538F    4E64 5385      C               dw BRCH0,NUMFRM+2,FIM
  5393    46CD           C
                         C      ;
                         C      ; : SIGN ROT <0 IF '-' HOLD ELSE BLANK HOLD THEN ;
  5395    04 53 49 47    C      CSIGN: db 4,'SIGN'
  5399    4E             C
  539A    537E           C             dw CNUMFRM
  539C    4717           C      SIGN:  dw FUN
  539E    4877 4841      C             dw ROT,MEN0,BRCH0,SIGN1
  53A2    4E64 53AE      C
  53A6    5640 002D      C             dw PUSHN,'-',HOLD,FIM
  53AA    497C 46CD      C
  53AE    5041 497C      C      SIGN1: dw BLANK,HOLD,FIM
  53B2    46CD           C
                         C      ;
  53B4    05 53 49 47    C      CSIGN0: db 5,'SIGN0'
  53B8    4E 30          C
  53BA    5395           C              dw CSIGN
  53BC    4717           C      SIGN0:  dw FUN
  53BE    4877 4841      C              dw ROT,MEN0,BRCH0,SIGN01
  53C2    4E64 53CE      C
  53C6    5640 002D      C              dw PUSHN,'-',BRCH,SIGN01+2
  53CA    4E79 53D0      C
  53CE    5041 5640      C      SIGN01: dw BLANK,PUSHN,TUN,POK16,FIM
  53D2    4284 4CE4      C
  53D6    46CD           C
                         C      ;
                         C      ; : #> DROP DROP HLD @ PAD OVER - ;
  53D8    02 23 3E       C      CFIMNUM: db 2,'#>'
  53DB    53B4           C               dw CSIGN0
  53DD    4717           C      FIMNUM:  dw FUN
  53DF    4886 4886      C               dw DROP,DROP,HLD,PEK16,PAD
  53E3    496D 4CF2      C
  53E7    4992           C
  53E9    5982 4FE4      C               dw OVER,MENOS,FIM
  53ED    46CD           C
                         C      ;
  53EF    53F1           C      IMP: dw $+2
  53F1    DD 23          C           inc ix
  53F3    C3 53FF        C           jp SHOW+2
                         C      ;
  53F6    04 53 48 4F    C      CSHOW: db 4,'SHOW'
  53FA    57             C
  53FB    53D8           C             dw CFIMNUM
  53FD    53FF           C      SHOW:  dw $+2
  53FF    D9             C             exx
  5400    E1             C      SHOW1: pop hl
  5401    7D             C             ld a,l
  5402    FE FF          C             cp -1
  5404    CA 4B62        C             jp z,RG
  5407    CD 44D2        C             call VIDEO
  540A    18 F4          C             jr SHOW1
                         C      ;
                         C      ; : D.R {PSG} @ IF {IMPDUF+2} THREE {VZ} >R SWAP OVER DABS <# #S SIGN #> R> OVER - SPACES TYPE ;
  540C    03 44 2E 52    C      CIMPDSF: db 3,'D.R'
  5410    53F6           C               dw CSHOW
  5412    4717           C      IMPDSF:  dw FUN
  5414    63AE 5F66      C               dw THREE,VZ,INRP,SWAP,OVER
  5418    4DD5 5246      C
  541C    5982           C
  541E    528F 534A      C               dw DABS,ININUM,NUMFRM,SIGN,FIMNUM
  5422    5383 539C      C
  5426    53DD           C
  5428    4DEA 5982      C               dw OUTRP,OVER,MENOS,SPACS,TYPE
  542C    4FE4 508B      C
  5430    554F           C
  5432    46CD           C               dw FIM
                         C      ;
                         C      ; : DU.R THREE {VZ} >R SWAP OVER <# #S BLANK HOLD #> >R OVER - SPACES TYPE ;
  5434    04 44 55 2E    C      CIMPDUF: db 4,'DU.R'
  5438    52             C
  5439    540C           C               dw CIMPDSF
  543B    4717           C      IMPDUF:  dw FUN
  543D    63AE 5F66      C               dw THREE,VZ,INRP,SWAP,OVER
  5441    4DD5 5246      C
  5445    5982           C
  5447    534A 5383      C               dw ININUM,NUMFRM,ROT,DROP,BLANK
  544B    4877 4886      C
  544F    5041           C
  5451    497C 53DD      C               dw HOLD,FIMNUM,OUTRP,OVER,MENOS
  5455    4DEA 5982      C
  5459    4FE4           C
  545B    508B 554F      C               dw SPACS,TYPE,FIM
  545F    46CD           C
                         C      ;
  5461    04 44 2E 58    C      CIDSFX: db 4,'D.XR'
  5465    52             C
  5466    5434           C              dw CIMPDUF
  5468    4717           C      IDSFX:  dw FUN
  546A    5640 0004      C              dw PUSHN,4,VZ,INRP,INRP,SWAP,OVER
  546E    5F66 4DD5      C
  5472    4DD5 5246      C
  5476    5982           C
  5478    528F 534A      C              dw DABS,ININUM,NUMFRM,SIGN0
  547C    5383 53BC      C
  5480    53DD 5640      C              dw FIMNUM,PUSHN,TUN,PEK16,EMIT
  5484    4284 4CF2      C
  5488    48BD           C
  548A    4DEA 5982      C              dw OUTRP,OVER,MENOS,OUTRP,STRING,TYPE
  548E    4FE4 4DEA      C
  5492    5064 554F      C
  5496    46CD           C              dw FIM
                         C      ;
  5498    05 44 55 2E    C      CIDUFX: db 5,'DU.XR'
  549C    58 52          C
  549E    5461           C              dw CIDSFX
  54A0    4717           C      IDUFX:  dw FUN
  54A2    5640 0004      C              dw PUSHN,4,VZ,INRP,INRP,SWAP,OVER
  54A6    5F66 4DD5      C
  54AA    4DD5 5246      C
  54AE    5982           C
  54B0    534A 5383      C              dw ININUM,NUMFRM,ROT,DROP,FIMNUM
  54B4    4877 4886      C
  54B8    53DD           C
  54BA    4DEA 5982      C              dw OUTRP,OVER,MENOS,OUTRP,STRING,TYPE
  54BE    4FE4 4DEA      C
  54C2    5064 554F      C
  54C6    46CD           C              dw FIM
                         C      ;
                         C      ; : D. ZERO D.R SPACE ;
  54C8    02 44 2E       C      CIMPDS: db 2,'D.'
  54CB    5498           C              dw CIDUFX
  54CD    4717           C      IMPDS:  dw FUN
  54CF    6382 5412      C              dw ZERO,IMPDSF,FIM ;; SPACE,FIM
  54D3    46CD           C
                         C      ;
                         C      ; : DU. ZERO DU.R SPACE ;
  54D5    03 44 55 2E    C      CIMPDU: db 3,'DU.'
  54D9    54C8           C              dw CIMPDS
  54DB    4717           C      IMPDU:  dw FUN
  54DD    6382 543B      C              dw ZERO,IMPDUF,FIM ;; SPACE,FIM
  54E1    46CD           C
                         C      ;
  54E3    02 2E 52       C      CIMPSF: db 2,'.R'
  54E6    54D5           C              dw CIMPDU
  54E8    4717           C              dw FUN
  54EA    4DD5 521A      C              dw INRP,C1632,OUTRP,IMPDSF,FIM
  54EE    4DEA 5412      C
  54F2    46CD           C
                         C      ;
  54F4    03 55 2E 52    C      CIMPUF: db 3,'U.R'
  54F8    54E3           C              dw CIMPSF
  54FA    4717           C              dw FUN
  54FC    6382 5246      C              dw ZERO,SWAP,IMPDUF,FIM
  5500    543B 46CD      C
                         C      ;
  5504    03 2E 58 52    C      CISFX: db 3,'.XR'
  5508    54F4           C             dw CIMPUF
  550A    4717           C             dw FUN
  550C    4DD5 4DD5      C             dw INRP,INRP,C1632,OUTRP,OUTRP,IDSFX,FIM
  5510    521A 4DEA      C
  5514    4DEA 5468      C
  5518    46CD           C
                         C      ;
  551A    04 55 2E 58    C      CIUFX: db 4,'U.XR'
  551E    52             C
  551F    5504           C             dw CISFX
  5521    4717           C             dw FUN
  5523    4DD5 6382      C             dw INRP,ZERO,SWAP,OUTRP,IDUFX,FIM
  5527    5246 4DEA      C
  552B    54A0 46CD      C
                         C      ;
  552F    01 2E          C      CIMPSS: db 1,'.'
  5531    551A           C              dw CIUFX
  5533    4717           C      IMPSS:  dw FUN
  5535    521A 54CD      C              dw C1632,IMPDS,FIM
  5539    46CD           C
                         C      ;
  553B    02 55 2E       C      CIMPSU: db 2,'U.'
  553E    552F           C              dw CIMPSS
  5540    4717           C      IMPSU:  dw FUN
  5542    6382 54DB      C              dw ZERO,IMPDU,FIM
  5546    46CD           C
                         C      ;
  5548    04 54 59 50    C      CTYPE: db 4,'TYPE'
  554C    45             C
  554D    553B           C             dw CIMPSU
  554F    5551           C      TYPE:  dw $+2
  5551    D9             C             exx
  5552    C1             C             pop bc
  5553    E1             C             pop hl
  5554    41             C             ld b,c
  5555    7E             C      CT1:   ld a,(hl)
  5556    CD 44D2        C             call VIDEO
  5559    23             C             inc hl
  555A    10 F9          C             djnz CT1
  555C    C3 4B62        C             jp RG
                         C      ;
                         C      ; OBTEM A ULTIMA PALAVRA DO DICIONARIO PRINCIPAL (FORTH)
  555F    07 43 4F 4E    C      CCONTEXT: db 7,'CONTEXT'
  5563    54 45 58 54    C
  5567    5548           C                dw CTYPE
  5569    556B           C      CONTEXT:  dw $+2
  556B    21 4248        C                ld hl,PUPDP
  556E    C3 46E6        C                jp RPhl
                         C      ;
                         C      ; OBTEM A ULTIMA PALAVRA DO DICIONARIO CORRENTE
  5571    07 43 55 52    C      CCURRENT: db 7,'CURRENT'
  5575    52 45 4E 54    C
  5579    555F           C                dw CCONTEXT
  557B    557D           C      CURRENT:  dw $+2
  557D    21 424A        C                ld hl,PUPDC
  5580    C3 46E6        C                jp RPhl
                         C      ;
                         C      ; OBTEM O ENDERECO A ULTIMA PALAVRA DO DICIONARIO DE COMPILACAO
  5583    08 43 4F 4D    C      CCOMPILER: db 8,'COMPILER'
  5587    50 49 4C 45    C
  558B    52             C
  558C    5571           C                 dw CCURRENT
  558E    5590           C      COMPILER:  dw $+2
  5590    21 4250        C                 ld hl,UPCC
  5593    C3 46E6        C                 jp RPhl
                         C      ;
                         C      ; : TAKE 0C3H C! {POKD16} ;
  5596    04 54 41 4B    C      CTAKE: db 4,'TAKE'
  559A    45             C
  559B    5583           C             dw CCOMPILER
  559D    4717           C             dw FUN
  559F    5640 00C3      C             dw PUSHN,0C3H,POKD8,PUSHN
  55A3    596D 5640      C
  55A7    4B62 5650      C             dw RG,POKD16,FIM
  55AB    46CD           C
                         C      ;
  55AD    05 53 54 41    C      CSTATE:  db 5,'STATE'
  55B1    54 45          C
  55B3    5596           C               dw CTAKE
  55B5    55B7           C      STATE:   dw $+2
  55B7    21 4258        C               ld hl,PSTE
  55BA    C3 46E6        C               jp RPhl
                         C      ;
                         C      ; : ?SEARCH CONTEXT @ @ SEARCH DUP IF MODE @ IF DROP COMPILER @ SEARCH DUP IF ZERO ELSE TRUE THEN STATE ! THEN THEN ;
  55BD    07 3F 53 45    C      CISEARCH: db 7,'?SEARCH'
  55C1    41 52 43 48    C
  55C5    55AD           C                dw CSTATE
  55C7    4717           C      ISEARCH:  dw FUN
  55C9    5569 4CF2      C                dw CONTEXT,PEK16,PEK16
  55CD    4CF2           C
  55CF    4BBB 47C2      C                dw SEARCH,DUP,BRCH0,IS1,MODE
  55D3    4E64 55F9      C
  55D7    4C08           C
  55D9    4CF2 4E64      C                dw PEK16,BRCH0,IS1,DROP
  55DD    55F9 4886      C
  55E1    558E 4CF2      C                dw COMPILER,PEK16,SEARCH,DUP
  55E5    4BBB 47C2      C
  55E9    4E64 55F3      C                dw BRCH0,IS2,ZERO,BRCH,IS2+2
  55ED    6382 4E79      C
  55F1    55F5           C
  55F3    6373 55B5      C      IS2:      dw TRUE,STATE,POK16
  55F7    4CE4           C
  55F9    46CD           C      IS1:      dw FIM
                         C      ;
                         C      ; : ?NUMBER NUMBER IF MODE @ IF {TUN} C@ IF {DPUSHN} , D, ELSE {PUSHN} , , THEN ELSE ZERO THEN ELSE TRUE THEN ;
  55FB    07 3F 4E 55    C      CINUMBER: db 7,'?NUMBER'
  55FF    4D 42 45 52    C
  5603    55BD           C                dw CISEARCH
  5605    4717           C      INUMBER:  dw FUN
  5607    4EAD 4E64      C                dw NUMBER,BRCH0,IN1,MODE
  560B    5637 4C08      C
  560F    4CF2 4E64      C                dw PEK16,BRCH0,IN2,PUSHN,TUN
  5613    5633 5640      C
  5617    4284           C
  5619    4D2E 4E64      C                dw PEK8,BRCH0,IN3,PUSHN,DPUSHN
  561D    562B 5640      C
  5621    5666           C
  5623    5650 567C      C                dw POKD16,POKD32,BRCH,IN2
  5627    4E79 5633      C
  562B    5640 5640      C      IN3:      dw PUSHN,PUSHN,POKD16,POKD16
  562F    5650 5650      C
  5633    6382 46CD      C      IN2:      dw ZERO,FIM
  5637    6373 46CD      C      IN1:      dw TRUE,FIM
                         C      ;
  563B    02 2A 23       C      CPUSHN: db 2,'*#'
  563E    55FB           C              dw CINUMBER
  5640    5642           C      PUSHN:  dw $+2
  5642    0A             C              ld a,(bc)
  5643    5F             C              ld e,a
  5644    03             C              inc bc
  5645    0A             C              ld a,(bc)
  5646    57             C              ld d,a
  5647    03             C              inc bc
  5648    D5             C              push de
  5649    C3 46E7        C              jp RTI
                         C      ;
                         C      ; INCLUI UM VALOR 16 BITS NO DICIONARIO
  564C    01 2C          C      CPOKD16: db 1,','
  564E    563B           C               dw CPUSHN
  5650    5652           C      POKD16:  dw $+2
  5652    D1             C               pop de
  5653    2A 4254        C               ld hl,(PRECOMP)
  5656    73             C               ld (hl),e
  5657    23             C               inc hl
  5658    72             C               ld (hl),d
  5659    23             C               inc hl
  565A    22 4254        C               ld (PRECOMP),hl
  565D    C3 46E7        C               jp RTI
                         C      ;
  5660    03 44 2A 23    C      CDPUSHN: db 3,'D*#'
  5664    564C           C               dw CPOKD16
  5666    5668           C      DPUSHN:  dw $+2
  5668    0A             C               ld a,(bc)
  5669    6F             C               ld l,a
  566A    03             C               inc bc
  566B    0A             C               ld a,(bc)
  566C    67             C               ld h,a
  566D    03             C               inc bc
  566E    0A             C               ld a,(bc)
  566F    5F             C               ld e,a
  5670    03             C               inc bc
  5671    0A             C               ld a,(bc)
  5672    57             C               ld d,a
  5673    03             C               inc bc
  5674    C3 46E5        C               jp RPdehl
                         C      ;
                         C      ; INCLUI UM VALOR 32 BITS NO DICIONARIO
  5677    02 44 2C       C      CPOKD32: db 2,'D,'
  567A    5660           C               dw CDPUSHN
  567C    567E           C      POKD32:  dw $+2
  567E    D1             C               pop de      ; MSB
  567F    2A 4254        C               ld hl,(PRECOMP)
  5682    73             C               ld (hl),e
  5683    23             C               inc hl
  5684    72             C               ld (hl),d
  5685    23             C               inc hl
  5686    D1             C               pop de      ; LSB
  5687    73             C               ld (hl),e
  5688    23             C               inc hl
  5689    72             C               ld (hl),d
  568A    23             C               inc hl
  568B    22 4254        C               ld (PRECOMP),hl
  568E    C3 46E7        C               jp RTI
                         C      ;
                         C      ; : ENTRY CURRENT @ @ ;
  5691    05 45 4E 54    C      CENTRY: db 5,'ENTRY'
  5695    52 59          C
  5697    5677           C              dw CPOKD32
  5699    4717           C      ENTRY:  dw FUN
  569B    557B 4CF2      C              dw CURRENT,PEK16,PEK16,FIM
  569F    4CF2 46CD      C
                         C      ;
                         C      ; OBTEM A PROXIMA POSICAO DE MEMORIA APONTADA POR "PRECOMP"
  56A3    56A5           C      PROXIMA: dw $+2
  56A5    2A 4254        C               ld hl,(PRECOMP)
  56A8    16 00          C               ld d,0
  56AA    5E             C               ld e,(hl)
  56AB    13             C               inc de
  56AC    D5             C               push de
  56AD    C3 46E7        C               jp RTI
                         C      ;
                         C      ; OBTEM O ENDERECO DE "PRECOMP"
  56B0    02 44 50       C      CDP:  db 2,'DP'
  56B3    5691           C            dw CENTRY
  56B5    56B7           C      DP:   dw $+2
  56B7    21 4254        C            ld hl,PRECOMP
  56BA    C3 46E6        C            jp RPhl
                         C      ;
                         C      ; OBTEM O VALOR DE 32 BITS APONTADOS POR "PRECOMP"
  56BD    04 48 45 52    C      CHERE: db 4,'HERE'
  56C1    45             C
  56C2    56B0           C             dw CDP
  56C4    56C6           C      HERE:  dw $+2
  56C6    2A 4254        C             ld hl,(PRECOMP)
  56C9    C3 46E6        C             jp RPhl
                         C      ;
  56CC    02 2B 21       C      CSOMEM: db 2,'+!'
  56CF    56BD           C              dw CHERE
  56D1    56D3           C      SOMEM:  dw $+2
  56D3    E1             C              pop hl
  56D4    D1             C              pop de
  56D5    7E             C              ld a,(hl)
  56D6    83             C              add a,e
  56D7    77             C              ld (hl),a
  56D8    23             C              inc hl
  56D9    7E             C              ld a,(hl)
  56DA    8A             C              adc a,d
  56DB    77             C              ld (hl),a
  56DC    C3 46E7        C              jp RTI
                         C      ;
  56DF    05 4D 49 4E    C      CMINUS: db 5,'MINUS'
  56E3    55 53          C
  56E5    56CC           C              dw CSOMEM
  56E7    56E9           C      MINUS:  dw $+2
  56E9    D1             C              pop de
  56EA    C3 527D        C              jp ABS1
                         C      ;
  56ED    06 44 4D 49    C      CDMINUS: db 6,'DMINUS'
  56F1    4E 55 53       C
  56F4    56DF           C               dw CMINUS
  56F6    56F8           C      DMINUS:  dw $+2
  56F8    E1             C               pop hl
  56F9    C3 5297        C               jp DABS1
                         C      ;
  56FC    02 32 2B       C      CMAIS2: db 2,'2+'
  56FF    56ED           C              dw CDMINUS
  5701    5703           C      MAIS2:  dw $+2
  5703    E1             C              pop hl
  5704    23             C              inc hl
  5705    23             C              inc hl
  5706    C3 46E6        C              jp RPHL
                         C      ;
                         C      ; : CREATE ENTRY BLANK WORD HERE CURRENT @ ! {PROXIMA} DP +! , HERE 2+ , ;
  5709    06 43 52 45    C      CCREATE: db 6,'CREATE'
  570D    41 54 45       C
  5710    56FC           C               dw CMAIS2
  5712    4717           C      CREATE:  dw FUN
  5714    5699 5041      C               dw ENTRY,BLANK,WORD,CONTEXT
  5718    4B1B 5569      C
  571C    4CF2 4CF2      C               dw PEK16,PEK16,SEARCH,NOT
  5720    4BBB 6355      C
  5724    4E64 572E      C               dw BRCH0,CREAT1,NU,BRCH,CREAT3
  5728    5764 4E79      C
  572C    574C           C
  572E    5699 4BBB      C      CREAT1:  dw ENTRY,SEARCH,NOT,BRCH0
  5732    6355 4E64      C
  5736    573E 5764      C               dw CREAT2,NU,BRCH,CREAT3
  573A    4E79 574C      C
  573E    558E 4CF2      C      CREAT2:  dw COMPILER,PEK16,SEARCH,NOT
  5742    4BBB 6355      C
  5746    4E64 574C      C               dw BRCH0,CREAT3,NU
  574A    5764           C
  574C    56C4 557B      C      CREAT3:  dw HERE,CURRENT,PEK16,POK16,PROXIMA
  5750    4CF2 4CE4      C
  5754    56A3           C
  5756    56B5 56D1      C               dw DP,SOMEM,POKD16,HERE
  575A    5650 56C4      C
  575E    5701 5650      C               dw MAIS2,POKD16,FIM
  5762    46CD           C
                         C      ;
  5764    4717           C      NU: dw FUN
  5766    5802           C          dw DISP
  5768    12 20 50 41    C          db 18,' PALAVRA N',0B0H,'O ',8BH,'NICA'
  576C    4C 41 56 52    C
  5770    41 20 4E B0    C
  5774    4F 20 8B 4E    C
  5778    49 43 41       C
  577B    4886 46CD      C          dw DROP,FIM
                         C      ;
  577F    5781           C      ULTIMA: dw $+2
  5781    ED 5B 424C     C              ld de,(UPDC)
  5785    26 00          C              ld h,0
  5787    1A             C              ld a,(de)
  5788    6F             C              ld l,a
  5789    19             C              add hl,de
  578A    11 0003        C              ld de,3
  578D    19             C              add hl,de
  578E    C3 46E6        C              jp RPhl
                         C      ;
                         C      ; : : CURRENT @ CONTEXT ! CREATE {FUN} {ULTIMA} ! MODE 1SET ;
  5791    01 3A          C      CCRIA: db 1,':'
  5793    5709           C             dw CCREATE
  5795    4717           C             dw FUN
  5797    557B 4CF2      C             dw CURRENT,PEK16,CONTEXT
  579B    5569           C
  579D    4CE4 5712      C             dw POK16,CREATE,PUSHN,FUN
  57A1    5640 4717      C
  57A5    577F 4CE4      C             dw ULTIMA,POK16,MODE,SET,FIM
  57A9    4C08 4E4F      C
  57AD    46CD           C
                         C      ;
                         C      ; : ; {FIM} , MODE 0SET ;
  57AF    01 3B          C      CFINAL: db 1,';'
  57B1    0000           C              dw 0
  57B3    4717           C              dw FUN
  57B5    5640 46CD      C              dw PUSHN,FIM,POKD16,MODE
  57B9    5650 4C08      C
  57BD    4E3D 46CD      C              dw RESET,FIM
                         C      ;
                         C      ; : EXIT {FIM} , ;
  57C1    04 45 58 49    C      CEXIT: db 4,'EXIT'
  57C5    54             C
  57C6    57AF           C             dw CFINAL
  57C8    4717           C             dw FUN
  57CA    5640 46CD      C             dw PUSHN,FIM,POKD16,FIM
  57CE    5650 46CD      C
                         C      ;
                         C      ; : ?EXECUTE STATE @ STATE 0SET MODE @ = IF EXECUTE ZERO {VZ} ELSE , THEN ;
  57D2    08 3F 45 58    C      CIEXEC: db 8,'?EXECUTE'
  57D6    45 43 55 54    C
  57DA    45             C
  57DB    5791           C              dw CCRIA
  57DD    4717           C      IEXEC:  dw FUN
  57DF    55B5 4CF2      C              dw STATE,PEK16,STATE,RESET
  57E3    55B5 4E3D      C
  57E7    4C08 4CF2      C              dw MODE,PEK16,IGU,BRCH0,IE1
  57EB    481E 4E64      C
  57EF    57F9           C
  57F1    4BFB 6382      C              dw EXEC,ZERO,VZ,FIM
  57F5    5F66 46CD      C
  57F9    5650 46CD      C      IE1:    dw POKD16,FIM
                         C      ;
  57FD    02 2A 28       C      CDISP: db 2,'*('
  5800    57D2           C             dw CIEXEC
  5802    5804           C      DISP:  dw $+2
  5804    0A             C             ld a,(bc)
  5805    57             C             ld d,a
  5806    03             C      DISP1: inc bc
  5807    0A             C             ld a,(bc)
  5808    CD 44D2        C             call VIDEO
  580B    15             C             dec d
  580C    20 F8          C             jr nz,DISP1
  580E    03             C             inc bc
  580F    C3 46E7        C             jp RTI
                         C      ;
                         C      ; : +LOOP {S_LOOP} COMPILE END, ;
  5812    05 2B 4C 4F    C      CPASSO: db 5,'+LOOP'
  5816    4F 50          C
  5818    57C1           C              dw CEXIT
  581A    4717           C              dw FUN
  581C    5640 4C65      C              dw PUSHN,S_LOOP,MARK_E,FIM
  5820    4E1F 46CD      C
                         C      ;
                         C      ; : LEAVE {LEAVE} , ;
  5824    05 4C 45 41    C      CLEAVE: db 5,'LEAVE'
  5828    56 45          C
  582A    5812           C              dw CPASSO
  582C    4717           C              dw FUN
  582E    5640 4C54      C              dw PUSHN,LEAVE,POKD16,FIM
  5832    5650 46CD      C
                         C      ;
                         C      ; : DO {B_LOOP} COMPILE DO, ;
  5836    02 44 4F       C      CDO: db 2,'DO'
  5839    5824           C           dw CLEAVE
  583B    4717           C           dw FUN
  583D    5640 4C3C      C           dw PUSHN,B_LOOP,MARK_S,FIM
  5841    5960 46CD      C
                         C      ;
                         C      ; : LOOP {LOOP} COMPILE END, ;
  5845    04 4C 4F 4F    C      CLOOP: db 4,'LOOP'
  5849    50             C
  584A    5836           C             dw CDO
  584C    4717           C             dw FUN
  584E    5640 4C6A      C             dw PUSHN,LOOP,MARK_E,FIM
  5852    4E1F 46CD      C
                         C      ;
                         C      ; : ." LCASE COMPILE *( , 22H WORD HERE C@ 1+ DP +! UPCASE ;
  5856    02 2E 22       C      CPRINT: db 2,'."'
  5859    5845           C              dw CLOOP
  585B    4717           C              dw FUN
  585D    4BAA 5640      C              dw LCASE,PUSHN,DISP,POKD16
  5861    5802 5650      C
  5865    5640 0022      C              dw PUSHN,22H,WORD,HERE,PEK8
  5869    4B1B 56C4      C
  586D    4D2E           C
  586F    5953 56B5      C              dw MAIS1,DP,SOMEM,UCASE,FIM
  5873    56D1 4B98      C
  5877    46CD           C
                         C      ;
  5879    06 3B 53 43    C      CCODE:  db 6,';SCODE'
  587D    4F 44 45       C
  5880    5856           C              dw CPRINT
  5882    4717           C              dw FUN
  5884    5640 5EB2      C              dw PUSHN,SCODE,POKD16,MODE
  5888    5650 4C08      C
  588C    4E3D 46CD      C              dw RESET,FIM
                         C      ;
  5890    02 49 46       C      CIF: db 2,'IF'
  5893    5879           C           dw CCODE
  5895    4717           C           dw FUN
  5897    5640 4E64      C           dw PUSHN,BRCH0,MARK_S,ZERO
  589B    5960 6382      C
  589F    5650 46CD      C           dw POKD16,FIM
                         C      ;
  58A3    04 45 4C 53    C      CELSE: db 4,'ELSE'
  58A7    45             C
  58A8    5890           C             dw CIF
  58AA    4717           C             dw FUN
  58AC    5640 4E79      C             dw PUSHN,BRCH,MARK_S,ZERO
  58B0    5960 6382      C
  58B4    5650 5246      C             dw POKD16,SWAP,THEN,FIM
  58B8    58C3 46CD      C
                         C      ;
  58BC    04 54 48 45    C      CTHEN: db 4,'THEN'
  58C0    4E             C
  58C1    58A3           C             dw CELSE
  58C3    4717           C      THEN:  dw FUN
  58C5    56C4 5246      C             dw HERE,SWAP,POK16,FIM
  58C9    4CE4 46CD      C
                         C      ;
  58CD    07 43 4F 4D    C      CCMPILE: db 7,'COMPILE'
  58D1    50 49 4C 45    C
  58D5    58BC           C               dw CTHEN
  58D7    4717           C      CMPILE:  dw FUN
  58D9    5640 5640      C               dw PUSHN,PUSHN,POKD16,PESQ
  58DD    5650 5179      C
  58E1    5650 5640      C               dw POKD16,PUSHN,POKD16,POKD16
  58E5    5650 5650      C
  58E9    46CD           C               dw FIM
                         C      ;
  58EB    09 5B 43 4F    C      CCMPL: db 9,'[COMPILE]'
  58EF    4D 50 49 4C    C
  58F3    45 5D          C
  58F5    58CD           C             dw CCMPILE
  58F7    4717           C             dw FUN
  58F9    5041 4B1B      C             dw BLANK,WORD,COMPILER,PEK16
  58FD    558E 4CF2      C
  5901    4BBB 6355      C             dw SEARCH,NOT,BRCH0,CP1,POKD16
  5905    4E64 590F      C
  5909    5650           C
  590B    4E79 5911      C             dw BRCH,CP1+2
  590F    5F1C 46CD      C      CP1:   dw QUESTION,FIM
                         C      ;
  5913    01 5D          C      C_DEF:  db 1,']'
  5915    58EB           C              dw CCMPL
  5917    4717           C      _DEFIN: dw FUN
                         C      IFNDEF CPM
  5919    5640 00C0      C              dw PUSHN,MSX_BEEP
                         C      ENDIF
  591D    55B5 4CE4      C              dw STATE,POK16,FIM
  5921    46CD           C
                         C      ;
  5923    01 5B          C      CF_DEF:  db 1,'['
  5925    58EB           C               dw CCMPL
  5927    4717           C      F_DEFIN: dw FUN
  5929    6382 55B5      C               dw ZERO,STATE,POK16,FIM
  592D    4CE4 46CD      C
                         C      ;
  5931    04 43 4F 44    C      CCODI: db 4,'CODI'
  5935    49             C
  5936    5923           C             dw CF_DEF
  5938    4717           C             dw FUN
  593A    5640 5640      C             dw PUSHN,PUSHN,POKD16
  593E    5650           C
  5940    5041 4B1B      C             dw BLANK,WORD,HERE,MAIS1,PEK8
  5944    56C4 5953      C
  5948    4D2E           C
  594A    5650 46CD      C             dw POKD16,FIM
                         C      ;
  594E    02 31 2B       C      CMAIS1: db 2,'1+'
  5951    57FD           C              dw CDISP
  5953    5955           C      MAIS1:  dw $+2
  5955    E1             C              pop hl
  5956    23             C              inc hl
  5957    C3 46E6        C              jp RPhl
                         C      ;
  595A    03 44 4F 2C    C      CMARK_S: db 3,'DO,'
  595E    594E           C               dw CMAIS1
  5960    4717           C      MARK_S:  dw FUN
  5962    5650 56C4      C               dw POKD16,HERE,FIM
  5966    46CD           C
                         C      ;
                         C      ; INCLUI UM VALOR 8 BITS NO DICIONARIO
  5968    02 43 2C       C      CPOKD8: db 2,'C,'
  596B    595A           C              dw CMARK_S
  596D    596F           C      POKD8:  dw $+2
  596F    D1             C              pop de
  5970    2A 4254        C              ld hl,(PRECOMP)
  5973    73             C              ld (hl),e
  5974    23             C              inc hl
  5975    22 4254        C              ld (PRECOMP),hl
  5978    C3 46E7        C              jp RTI
                         C      ;
  597B    04 4F 56 45    C      COVER: db 4,'OVER'
  597F    52             C
  5980    5968           C             dw CPOKD8
  5982    5984           C      OVER:  dw $+2
  5984    E1             C             pop hl
  5985    D1             C             pop de
  5986    D5             C             push de
  5987    EB             C             ex de,hl
  5988    C3 46E5        C             jp RPdehl
                         C      ;
  598B    02 43 52       C      CCR: db 2,'CR'
  598E    597B           C           dw COVER
  5990    5992           C      CR:  dw $+2
  5992    CD 46B7        C           call CRLF
  5995    C3 46E7        C           jp RTI
                         C      ;
                         C         INCLUDE FORTHLNG.INC
                         C      ;
  5998    04 32 44 55    C      CDDUP:   db 4,'2DUP'
  599C    50             C
  599D    5EE7           C         dw CVARIAB
  599F    59A1           C      DDUP:   dw $+2
  59A1    E1             C         pop hl   ; MSB
  59A2    D1             C         pop de   ; LSB
  59A3    D5             C         push de   ; LSB
  59A4    E5             C         push hl   ; MSB
  59A5    C3 46E5        C         jp RPdehl
                         C      ;
  59A8    02 44 3C       C      CDMENOR:db 2,'D<'
  59AB    5998           C         dw CDDUP
  59AD    59AF           C      DMENOR:   dw $+2
  59AF    DD 22 432D     C         ld (VAR3),ix
  59B3    DD 21 0008     C         ld ix,8
  59B7    DD 39          C         add ix,sp
  59B9    DD F9          C         ld sp,ix
  59BB    DD 5E FF       C         ld e,(ix-1)
  59BE    DD 56 FE       C         ld d,(ix-2)   ; LSB2
  59C1    DD 6E FB       C      DMENOR3:ld l,(ix-5)
  59C4    DD 66 FA       C         ld h,(ix-6)   ; LSB1
  59C7    AF             C      DMENOR2:xor a
  59C8    ED 52          C         sbc hl,de
  59CA    DD 5E FD       C         ld e,(ix-3)
  59CD    DD 56 FC       C         ld d,(ix-4)   ; LSB1
  59D0    DD 6E F9       C         ld l,(ix-7)
  59D3    DD 66 F8       C         ld h,(ix-8)   ; LSB2
  59D6    ED 52          C         sbc hl,de
  59D8    DD 2A 432D     C         ld ix,(VAR3)
  59DC    21 0000        C         ld hl,0
  59DF    F2 46E6        C         jp p,RPhl
  59E2    2B             C         dec hl
  59E3    C3 46E6        C         jp RPhl
                         C      ;
  59E6    02 44 3E       C      CDMAIOR: db 2,'D>'
  59E9    59A8           C               dw CDMENOR
  59EB    4717           C      DMAIOR:  dw FUN
  59ED    5DCA 59AD      C               dw DSWAP,DMENOR,FIM
  59F1    46CD           C
                         C      ;
  59F3    02 44 3D       C      CDIGU:   db 2,'D='
  59F6    59E6           C         dw CDMAIOR
  59F8    59FA           C      DIGU:   dw $+2
  59FA    DD 22 432D     C         ld (VAR3),ix
  59FE    DD 21 0008     C         ld ix,8
  5A02    DD 39          C         add ix,sp
  5A04    DD F9          C         ld sp,ix
  5A06    DD 5E FF       C         ld e,(ix-1)
  5A09    DD 56 FE       C         ld d,(ix-2)   ; LSB2
  5A0C    DD 6E FB       C         ld l,(ix-5)
  5A0F    DD 66 FA       C         ld h,(ix-6)   ; LSB1
  5A12    AF             C         xor a
  5A13    ED 52          C         sbc hl,de
  5A15    DD 56 FD       C         ld d,(ix-3)
  5A18    DD 5E FC       C         ld e,(ix-4)   ; LSB1
  5A1B    DD 66 F9       C         ld h,(ix-7)
  5A1E    DD 6E F8       C         ld l,(ix-8)   ; LSB2
  5A21    ED 52          C         sbc hl,de
  5A23    DD 2A 432D     C         ld ix,(VAR3)
  5A27    21 0000        C         ld hl,0
  5A2A    C2 46E6        C         jp nz,RPhl
  5A2D    2B             C         dec hl
  5A2E    C3 46E6        C         jp RPhl
                         C      ;
  5A31    03 44 3C 3E    C      CDDIF: db 3,'D<>'
  5A35    59F3           C             dw CDIGU
  5A37    4717           C             dw FUN
  5A39    59F8 6355      C             dw DIGU,NOT,FIM
  5A3D    46CD           C
                         C      ;
  5A3F    03 44 30 3C    C      CDMEN0:   db 3,'D0<'
  5A43    5A31           C         dw CDDIF
  5A45    5A47           C         dw $+2
  5A47    E1             C         pop hl
  5A48    D1             C         pop de
  5A49    CB 7C          C         bit 7,h
  5A4B    21 0000        C         ld hl,0
  5A4E    CA 46E6        C         jp z,RPhl
  5A51    2B             C         dec hl
  5A52    C3 46E6        C         jp RPhl
                         C      ;
  5A55    03 44 30 3D    C      CDIGU0:   db 3,'D0='
  5A59    5A3F           C         dw CDMEN0
  5A5B    4717           C      DIGU0:   dw FUN
  5A5D    632F 4855      C             dw OR,IGU0,FIM
  5A61    46CD           C
                         C      ;
  5A63    03 44 30 3E    C      CDMAI0:   db 3,'D0>'
  5A67    5A55           C         dw CDIGU0
  5A69    4717           C      DMAI0:   dw FUN
  5A6B    6382 6382      C             dw ZERO,ZERO,DMAIOR,FIM
  5A6F    59EB 46CD      C
                         C      ;
  5A73    04 32 52 4F    C      CDROT:   db 4,'2ROT'
  5A77    54             C
  5A78    5A63           C         dw CDMAI0
  5A7A    5A7C           C      DROT:   dw $+2
  5A7C    C5             C         push bc
  5A7D    DD 22 4329     C         ld (VAR1),ix
  5A81    DD 21 000C     C         ld ix,12
  5A85    DD 39          C         add ix,sp
  5A87    DD 66 FF       C         ld h,(ix-1)
  5A8A    DD 6E FE       C         ld l,(ix-2)
  5A8D    E5             C         push hl
  5A8E    DD 66 FD       C         ld h,(ix-3)
  5A91    DD 6E FC       C         ld l,(ix-4)
  5A94    E5             C         push hl
  5A95    DD E5          C         push ix
  5A97    DD E5          C         push ix
  5A99    11 FFFB        C         ld de,-5
  5A9C    DD 19          C         add ix,de
  5A9E    DD E5          C         push ix
  5AA0    E1             C         pop hl
  5AA1    DD E1          C         pop ix
  5AA3    D1             C         pop de
  5AA4    01 0008        C         ld bc,8
  5AA7    ED B0          C         ldir
  5AA9    E1             C         pop hl
  5AAA    DD 74 F7       C         ld (ix-9),h
  5AAD    DD 75 F6       C         ld (ix-10),l
  5AB0    E1             C         pop hl
  5AB1    DD 74 F5       C         ld (ix-11),h
  5AB4    DD 75 0C       C         ld (ix+12),l
  5AB7    DD 2A 4329     C         ld ix,(VAR1)
  5ABB    C1             C         pop bc
  5ABC    C3 46E7        C         jp RTI
                         C      ;
  5ABF    05 32 44 52    C      CDDROP:   db 5,'2DROP'
  5AC3    4F 50          C
  5AC5    5A73           C         dw CDROT
  5AC7    5AC9           C      DDROP:   dw $+2
  5AC9    E1             C         pop hl
  5ACA    E1             C         pop hl
  5ACB    C3 46E7        C         jp RTI
                         C      ;
  5ACE    05 32 52 41    C      CDRAND:   db 5,'2RAND'
  5AD2    4E 44          C
  5AD4    5ABF           C         dw CDDROP
  5AD6    5AD8           C         dw $+2
  5AD8    C5             C         push bc
  5AD9    2A 4278        C         ld hl,(SEMT)
  5ADC    ED 5B 427A     C         ld de,(SEMT+2)
  5AE0    06 08          C         ld b,8
  5AE2    7D             C      DRND1:   ld a,l
  5AE3    1F             C         rra
  5AE4    1F             C         rra
  5AE5    AC             C         xor h
  5AE6    1F             C         rra
  5AE7    1F             C         rra
  5AE8    CB 1C          C         rr h
  5AEA    CB 1D          C         rr l
  5AEC    7B             C         ld a,e
  5AED    1F             C         rra
  5AEE    1F             C         rra
  5AEF    AA             C         xor d
  5AF0    1F             C         rra
  5AF1    1F             C         rra
  5AF2    CB 1A          C         rr d
  5AF4    CB 1B          C         rr e
  5AF6    10 EA          C         djnz DRND1
  5AF8    22 4278        C         ld (SEMT),hl
  5AFB    ED 53 427A     C         ld (SEMT+2),de
  5AFF    C1             C         pop bc
  5B00    C3 46E5        C         jp RPdehl
                         C      ;
  5B03    05 32 52 4F    C      CDROLL:   db 5,'2ROLL'
  5B07    4C 4C          C
  5B09    5ACE           C         dw CDRAND
  5B0B    5B0D           C         dw $+2
  5B0D    D9             C         exx
  5B0E    DD 22 4329     C         ld (VAR1),ix
  5B12    DD E1          C         pop ix
  5B14    DD 29          C         add ix,ix
  5B16    DD 29          C         add ix,ix
  5B18    DD E5          C         push ix      ; TAM. DESL.
  5B1A    DD 39          C         add ix,sp
  5B1C    DD 2B          C         dec ix
  5B1E    DD E5          C         push ix
  5B20    DD E5          C         push ix
  5B22    DD 46 00       C         ld b,(ix+0)   ; MSB do MSB
  5B25    DD 4E FF       C         ld c,(ix-1)   ; LSB do MSB
  5B28    DD 66 FE       C         ld h,(ix-2)   ; MSB do LSB
  5B2B    DD 6E FD       C         ld l,(ix-3)   ; LSB do LSB
  5B2E    ED 43 432B     C         ld (VAR2),bc
  5B32    22 432D        C         ld (VAR3),hl
  5B35    D1             C         pop de
  5B36    E1             C         pop hl
  5B37    01 0004        C         ld bc,4
  5B3A    09             C         add hl,bc
  5B3B    C1             C         pop bc
  5B3C    ED B8          C         lddr
  5B3E    ED 4B 432B     C         ld bc,(VAR2)
  5B42    2A 432D        C         ld hl,(VAR3)
  5B45    DD 70 F7       C         ld (ix-9),b
  5B48    DD 71 F6       C         ld (ix-10),c
  5B4B    DD 74 F5       C         ld (ix-11),h
  5B4E    DD 75 F4       C         ld (ix-12),l
  5B51    DD 2A 4329     C         ld ix,(VAR1)
  5B55    C3 4B62        C         jp RG
                         C      ;
  5B58    03 44 3C 3C    C      CDSLA:   db 3,'D<<'
  5B5C    5B03           C         dw CDROLL
  5B5E    5B60           C         dw $+2
  5B60    D9             C         exx
  5B61    C1             C         pop bc
  5B62    E1             C         pop hl
  5B63    D1             C         pop de
  5B64    41             C         ld b,c
  5B65    CB 23          C      DSLA1:   sla e
  5B67    CB 12          C         rl d
  5B69    CB 15          C         rl l
  5B6B    CB 14          C         rl h
  5B6D    10 F6          C         djnz DSLA1
  5B6F    D5             C         push de
  5B70    E5             C         push hl
  5B71    D9             C         exx
  5B72    C3 46E7        C         jp RTI
                         C      ;
  5B75    03 44 3E 3E    C      CDSRA:   db 3,'D>>'
  5B79    5B58           C         dw CDSLA
  5B7B    5B7D           C         dw $+2
  5B7D    D9             C         exx
  5B7E    C1             C         pop bc
  5B7F    E1             C         pop hl
  5B80    D1             C         pop de
  5B81    41             C         ld b,c
  5B82    CB 3C          C      DSRA1:   srl h
  5B84    CB 1D          C         rr l
  5B86    CB 1A          C         rr d
  5B88    CB 1B          C         rr e
  5B8A    10 F6          C         djnz DSRA1
  5B8C    D5             C         push de
  5B8D    E5             C         push hl
  5B8E    D9             C         exx
  5B8F    C3 46E7        C         jp RTI
                         C      ;
  5B92    5B94           C      DB_LOOP:dw $+2
  5B94    E1             C         pop hl
  5B95    DD 75 F8       C         ld (ix-8),l
  5B98    DD 74 F9       C         ld (ix-7),h
  5B9B    E1             C         pop hl
  5B9C    DD 75 FA       C         ld (ix-6),l
  5B9F    DD 74 FB       C         ld (ix-5),h
  5BA2    E1             C         pop hl
  5BA3    DD 75 FC       C         ld (ix-4),l
  5BA6    DD 74 FD       C         ld (ix-3),h
  5BA9    E1             C         pop hl
  5BAA    DD 75 FE       C         ld (ix-2),l
  5BAD    DD 74 FF       C         ld (ix-1),h
  5BB0    11 FFF8        C         ld de,-8
  5BB3    DD 19          C         add ix,de
  5BB5    C3 46E7        C         jp RTI
                         C      ;
  5BB8    5BBA           C      DLEAVE:   dw $+2
  5BBA    DD 7E 00       C         ld a,(ix+0)
  5BBD    DD 77 04       C         ld (ix+4),a
  5BC0    DD 7E 01       C         ld a,(ix+1)
  5BC3    DD 77 05       C         ld (ix+5),a
  5BC6    DD 7E 02       C         ld a,(ix+2)
  5BC9    DD 77 06       C         ld (ix+6),a
  5BCC    DD 7E 03       C         ld a,(ix+3)
  5BCF    DD 77 07       C         ld (ix+7),a
  5BD2    C3 46E7        C         jp RTI
                         C      ;
  5BD5    5BD7           C      DS_LOOP:dw $+2
  5BD7    E1             C         pop hl
  5BD8    D1             C         pop de
  5BD9    18 08          C         jr DLOOP1
                         C      ;
  5BDB    5BDD           C      DLOOP:   dw $+2
  5BDD    21 0000        C         ld hl,0
  5BE0    11 0001        C         ld de,1
  5BE3    C5             C      DLOOP1:   push bc
  5BE4    E5             C         push hl
  5BE5    CB 14          C         rl h
  5BE7    08             C         ex af,af'
  5BE8    DD 6E 02       C         ld l,(ix+2)
  5BEB    DD 66 03       C         ld h,(ix+3)
  5BEE    19             C         add hl,de
  5BEF    DD 75 02       C         ld (ix+2),l
  5BF2    DD 74 03       C         ld (ix+3),h
  5BF5    EB             C         ex de,hl
  5BF6    E1             C         pop hl
  5BF7    D5             C         push de
  5BF8    DD 5E 00       C         ld e,(ix+0)
  5BFB    DD 56 01       C         ld d,(ix+1)
  5BFE    ED 5A          C         adc hl,de
  5C00    DD 75 00       C         ld (ix+0),l
  5C03    DD 74 01       C         ld (ix+1),h
  5C06    44             C         ld b,h
  5C07    4D             C         ld c,l
  5C08    D1             C         pop de
  5C09    DD 6E 06       C         ld l,(ix+6)
  5C0C    DD 66 07       C         ld h,(ix+7)
  5C0F    08             C         ex af,af'
  5C10    38 12          C         jr c,DLOOP3
  5C12    AF             C         xor a
  5C13    EB             C         ex de,hl
  5C14    ED 52          C         sbc hl,de
  5C16    DD 6E 04       C         ld l,(ix+4)
  5C19    DD 66 05       C         ld h,(ix+5)
  5C1C    C5             C         push bc
  5C1D    E5             C         push hl
  5C1E    C1             C         pop bc
  5C1F    E1             C         pop hl
  5C20    ED 42          C         sbc hl,bc
  5C22    18 0B          C         jr DLOOP4
  5C24    AF             C      DLOOP3:   xor a
  5C25    ED 52          C         sbc hl,de
  5C27    DD 6E 04       C         ld l,(ix+4)
  5C2A    DD 66 05       C         ld h,(ix+5)
  5C2D    ED 42          C         sbc hl,bc
  5C2F    C1             C      DLOOP4:   pop bc
  5C30    FA 4E7B        C         jp m,BRCH+2
  5C33    11 0008        C         ld de,8
  5C36    DD 19          C         add ix,de
  5C38    03             C         inc bc
  5C39    03             C         inc bc
  5C3A    C3 46E7        C         jp RTI
                         C      ;
  5C3D    02 32 21       C      CPOK32:   db 2,'2!'
  5C40    5B75           C         dw CDSRA
  5C42    5C44           C      POK32:   dw $+2
  5C44    DD 22 4329     C         ld (VAR1),ix
  5C48    DD E1          C         pop ix
  5C4A    E1             C         pop hl      ; MSB
  5C4B    D1             C         pop de      ; LSB
  5C4C    DD 75 00       C         ld (ix+0),l
  5C4F    DD 74 01       C         ld (ix+1),h
  5C52    DD 73 02       C         ld (ix+2),e
  5C55    DD 72 03       C         ld (ix+3),d
  5C58    DD 2A 4329     C         ld ix,(VAR1)
  5C5C    C3 46E7        C         jp RTI
                         C      ;
  5C5F    02 32 40       C      CPEK32:   db 2,'2@'
  5C62    5C3D           C         dw CPOK32
  5C64    5C66           C      PEK32:   dw $+2
  5C66    E1             C         pop hl
  5C67    5E             C         ld e,(hl)
  5C68    23             C         inc hl
  5C69    56             C         ld d,(hl)
  5C6A    23             C         inc hl
  5C6B    D5             C         push de
  5C6C    5E             C         ld e,(hl)
  5C6D    23             C         inc hl
  5C6E    56             C         ld d,(hl)
  5C6F    EB             C         ex de,hl
  5C70    E3             C         ex (sp),hl
  5C71    C3 46E6        C         jp RPhl
                         C      ;
  5C74    03 44 3E 52    C      CDINRP:   db 3,'D>R'
  5C78    5C5F           C         dw CPEK32
  5C7A    5C7C           C      DINRP:   dw $+2
  5C7C    E1             C         pop hl      ; MSB
  5C7D    D1             C         pop de      ; LSB
  5C7E    DD 2B          C         dec ix
  5C80    DD 73 00       C         ld (ix+0),e
  5C83    DD 2B          C         dec ix
  5C85    DD 72 00       C         ld (ix+0),d
  5C88    DD 2B          C         dec ix
  5C8A    DD 74 00       C         ld (ix+0),h
  5C8D    DD 2B          C         dec ix
  5C8F    DD 75 00       C         ld (ix+0),l
  5C92    C3 46E7        C         jp RTI
                         C      ;
  5C95    03 44 52 3E    C      CDOUTRP:db 3,'DR>'
  5C99    5C74           C         dw CDINRP
  5C9B    5C9D           C      DOUTRP:   dw $+2
  5C9D    DD 6E 00       C         ld l,(ix+0)   ; LSB
  5CA0    DD 23          C         inc ix
  5CA2    DD 66 00       C         ld h,(ix+0)
  5CA5    DD 23          C         inc ix
  5CA7    DD 5E 00       C         ld e,(ix+0)   ; MSB
  5CAA    DD 23          C         inc ix
  5CAC    DD 56 00       C         ld d,(ix+0)
  5CAF    DD 23          C         inc ix
  5CB1    C3 46E5        C         jp RPdehl
                         C      ;
  5CB4    02 32 52       C      CDLERP:   db 2,'2R'
  5CB7    5C95           C         dw CDOUTRP
  5CB9    5CBB           C      DLERP:   dw $+2
  5CBB    DD 6E 00       C         ld l,(ix+0)
  5CBE    DD 66 01       C         ld h,(ix+1)
  5CC1    DD 5E 02       C         ld e,(ix+2)
  5CC4    DD 56 03       C         ld d,(ix+3)
  5CC7    C3 46E5        C         jp RPdehl
                         C      ;
  5CCA    02 32 49       C      CCNT32:   db 2,'2I'
  5CCD    5CB4           C         dw CDLERP
  5CCF    5CD1           C         dw $+2
  5CD1    DD 6E 00       C         ld l,(ix+0)
  5CD4    DD 66 01       C         ld h,(ix+1)
  5CD7    DD 5E 02       C         ld e,(ix+2)
  5CDA    DD 56 03       C         ld d,(ix+3)
  5CDD    C3 46E5        C         jp RPdehl
                         C      ;
  5CE0    05 44 30 53    C      CDRESET:db 5,'D0SET'
  5CE4    45 54          C
  5CE6    5CCA           C         dw CCNT32
  5CE8    5CEA           C      DRESET:   dw $+2
  5CEA    E1             C         pop hl
  5CEB    36 00          C         ld (hl),0
  5CED    23             C         inc hl
  5CEE    36 00          C         ld (hl),0
  5CF0    23             C         inc hl
  5CF1    36 00          C         ld (hl),0
  5CF3    23             C         inc hl
  5CF4    36 00          C         ld (hl),0
  5CF6    C3 46E7        C         jp RTI
                         C      ;
  5CF9    05 44 31 53    C      CDSET:   db 5,'D1SET'
  5CFD    45 54          C
  5CFF    5CE0           C         dw CDRESET
  5D01    5D03           C      DSET:   dw $+2
  5D03    E1             C         pop hl
  5D04    36 FF          C         ld (hl),-1
  5D06    23             C         inc hl
  5D07    36 FF          C         ld (hl),-1
  5D09    23             C         inc hl
  5D0A    36 FF          C         ld (hl),-1
  5D0C    23             C         inc hl
  5D0D    36 FF          C         ld (hl),-1
  5D0F    C3 46E7        C         jp RTI
                         C      ;
  5D12    02 44 2A       C      CDVEZES:db 2,'D*'
  5D15    5CF9           C         dw CDSET
  5D17    5D19           C      DVEZES:   dw $+2
  5D19    D1             C         pop de
  5D1A    7B             C         ld a,e
  5D1B    E1             C         pop hl
  5D1C    22 432B        C         ld (VAR2),hl
  5D1F    E1             C         pop hl
  5D20    C5             C         push bc
  5D21    11 0000        C         ld de,0
  5D24    ED 53 4329     C         ld (VAR1),de
  5D28    CB 3F          C      DVEZ1:   srl a
  5D2A    30 10          C         jr nc,DVEZ2
  5D2C    E5             C         push hl
  5D2D    19             C         add hl,de
  5D2E    EB             C         ex de,hl
  5D2F    ED 4B 4329     C         ld bc,(VAR1)
  5D33    2A 432B        C         ld hl,(VAR2)
  5D36    ED 4A          C         adc hl,bc
  5D38    22 4329        C         ld (VAR1),hl
  5D3B    E1             C         pop hl
  5D3C    A7             C      DVEZ2:   and a
  5D3D    28 0D          C         jr z,DVEZ3
  5D3F    29             C         add hl,hl
  5D40    E5             C         push hl
  5D41    2A 432B        C         ld hl,(VAR2)
  5D44    ED 6A          C         adc hl,hl
  5D46    22 432B        C         ld (VAR2),hl
  5D49    E1             C         pop hl
  5D4A    18 DC          C         jr DVEZ1
  5D4C    2A 4329        C      DVEZ3:   ld hl,(VAR1)
  5D4F    C1             C         pop bc
  5D50    C3 46E5        C         jp RPdehl
                         C      ;
  5D53    02 44 2B       C      CDMAIS:   db 2,'D+'
  5D56    5D12           C         dw CDVEZES
  5D58    5D5A           C      DMAIS:   dw $+2
  5D5A    21 0006        C         ld hl,6
  5D5D    39             C         add hl,sp
  5D5E    5E             C         ld e,(hl)
  5D5F    71             C         ld (hl),c
  5D60    23             C         inc hl
  5D61    56             C         ld d,(hl)
  5D62    70             C         ld (hl),b
  5D63    C1             C         pop bc
  5D64    E1             C         pop hl
  5D65    19             C         add hl,de
  5D66    EB             C         ex de,hl
  5D67    E1             C         pop hl
  5D68    7D             C         ld a,l
  5D69    89             C         adc a,c
  5D6A    6F             C         ld l,a
  5D6B    7C             C         ld a,h
  5D6C    88             C         adc a,b
  5D6D    67             C         ld h,a
  5D6E    C1             C         pop bc
  5D6F    C3 46E5        C         jp RPdehl
                         C      ;
  5D72    02 44 2D       C      CDMENOS:db 2,'D-'
  5D75    5D53           C         dw CDMAIS
  5D77    5D79           C      DMENOS:   dw $+2
  5D79    21 0006        C         ld hl,6
  5D7C    39             C         add hl,sp
  5D7D    5E             C         ld e,(hl)
  5D7E    71             C         ld (hl),c
  5D7F    23             C         inc hl
  5D80    56             C         ld d,(hl)
  5D81    70             C         ld (hl),b
  5D82    C1             C         pop bc
  5D83    E1             C         pop hl
  5D84    EB             C         ex de,hl
  5D85    AF             C         xor a
  5D86    ED 52          C         sbc hl,de
  5D88    EB             C         ex de,hl
  5D89    E1             C         pop hl
  5D8A    7D             C         ld a,l
  5D8B    99             C         sbc a,c
  5D8C    6F             C         ld l,a
  5D8D    7C             C         ld a,h
  5D8E    98             C         sbc a,b
  5D8F    67             C         ld h,a
  5D90    C1             C         pop bc
  5D91    C3 46E5        C         jp RPdehl
                         C      ;
  5D94    02 32 4A       C      CDJ:   db 2,'2J'
  5D97    5D72           C         dw CDMENOS
  5D99    5D9B           C         dw $+2
  5D9B    DD 5E 08       C         ld e,(ix+8)
  5D9E    DD 56 09       C         ld d,(ix+9)
  5DA1    DD 6E 0A       C         ld l,(ix+10)
  5DA4    DD 66 0B       C         ld h,(ix+11)
  5DA7    C3 46E5        C         jp RPdehl
                         C      ;
  5DAA    05 32 50 49    C      CDPICK:   db 5,'2PICK'
  5DAE    43 4B          C
  5DB0    5D94           C         dw CDJ
  5DB2    4717           C         dw FUN
  5DB4    62D7 5640      C             dw MENOS1,PUSHN,4,VEZES
  5DB8    0004 4FA5      C
  5DBC    520C 5C64      C         dw MAISP,PEK32,FIM
  5DC0    46CD           C
                         C      ;
  5DC2    05 32 53 57    C      CDSWAP:   db 5,'2SWAP'
  5DC6    41 50          C
  5DC8    5DAA           C         dw CDPICK
  5DCA    5DCC           C      DSWAP:   dw $+2
  5DCC    E1             C         pop hl   ; MSB1
  5DCD    D1             C         pop de   ; LSB1
  5DCE    D9             C         exx
  5DCF    E1             C         pop hl   ; MSB2
  5DD0    D1             C         pop de   ; LSB2
  5DD1    D9             C         exx
  5DD2    D5             C         push de   ; LSB1
  5DD3    E5             C         push hl   ; MSB1
  5DD4    D9             C         exx
  5DD5    D5             C         push de   ; LSB2
  5DD6    E5             C         push hl ; MSB2
  5DD7    C3 4B62        C         jp RG
                         C      ;
  5DDA    03 44 2B 21    C      CDSOMEM:db 3,'D+!'
  5DDE    5DC2           C         dw CDSWAP
  5DE0    5DE2           C      DSOMEM:   dw $+2
  5DE2    E1             C         pop hl
  5DE3    D1             C         pop de
  5DE4    E3             C         ex (sp),hl
  5DE5    7E             C         ld a,(hl)
  5DE6    83             C         add a,e
  5DE7    77             C         ld (hl),a
  5DE8    23             C         inc hl
  5DE9    7E             C         ld a,(hl)
  5DEA    8A             C         adc a,d
  5DEB    77             C         ld (hl),a
  5DEC    23             C         inc hl
  5DED    D1             C         pop de
  5DEE    7E             C         ld a,(hl)
  5DEF    8B             C         adc a,e
  5DF0    77             C         ld (hl),a
  5DF1    23             C         inc hl
  5DF2    7E             C         ld a,(hl)
  5DF3    8A             C         adc a,d
  5DF4    77             C         ld (hl),a
  5DF5    C3 46E7        C         jp RTI
                         C      ;
  5DF8    06 2B 32 4C    C      CDPASSO:db 6,'+2LOOP'
  5DFC    4F 4F 50       C
  5DFF    5931           C         dw CCODI
  5E01    4717           C         dw FUN
  5E03    5640 5BD5      C             dw PUSHN,DS_LOOP,MARK_E,FIM
  5E07    4E1F 46CD      C
                         C      ;
  5E0B    06 32 4C 45    C      CDLEAVE:db 6,'2LEAVE'
  5E0F    41 56 45       C
  5E12    5DF8           C         dw CDPASSO
  5E14    4717           C         dw FUN
  5E16    5640 5BB8      C             dw PUSHN,DLEAVE,POKD16,FIM
  5E1A    5650 46CD      C
                         C      ;
  5E1E    03 32 44 4F    C      CDDO:   db 3,'2DO'
  5E22    5E0B           C         dw CDLEAVE
  5E24    4717           C         dw FUN
  5E26    5640 5B92      C             dw PUSHN,DB_LOOP,MARK_S,FIM
  5E2A    5960 46CD      C
                         C      ;
  5E2E    05 32 4C 4F    C      CDLOOP:   db 5,'2LOOP'
  5E32    4F 50          C
  5E34    5E1E           C         dw CDDO
  5E36    4717           C         dw FUN
  5E38    5640 5BDB      C             dw PUSHN,DLOOP,MARK_E,FIM
  5E3C    4E1F 46CD      C
                         C      ;
  5E40    05 32 4F 56    C      CDOVER:   db 5,'2OVER'
  5E44    45 52          C
  5E46    5DDA           C         dw CDSOMEM
  5E48    5E4A           C      DOVER:   dw $+2
  5E4A    E1             C         pop hl
  5E4B    D1             C         pop de
  5E4C    D5             C         push de
  5E4D    EB             C         ex de,hl
  5E4E    C3 46E5        C         jp RPdehl
                         C      ;
  5E51    09 32 43 4F    C      CDCONST:db 9,'2CONSTANT'
  5E55    4E 53 54 41    C
  5E59    4E 54          C
  5E5B    5E40           C         dw CDOVER
  5E5D    4717           C      DCONST:   dw FUN
  5E5F    5712 567C      C             dw CREATE,POKD32,SCODE
  5E63    5EB2           C
  5E65    EB             C         ex de,hl
  5E66    11 0003        C         ld de,3
  5E69    19             C         add hl,de
  5E6A    56             C         ld d,(hl)
  5E6B    2B             C         dec hl
  5E6C    5E             C         ld e,(hl)
  5E6D    2B             C         dec hl
  5E6E    D5             C         push de
  5E6F    56             C         ld d,(hl)
  5E70    2B             C         dec hl
  5E71    5E             C         ld e,(hl)
  5E72    D5             C         push de
  5E73    C3 46E7        C         jp RTI
                         C      ;
  5E76    04 32 56 41    C      CDVAR:   db 4,'2VAR'
  5E7A    52             C
  5E7B    5E51           C         dw CDCONST
  5E7D    4717           C      DVAR:   dw FUN
  5E7F    5E5D 5EB2      C             dw DCONST,SCODE
  5E83    D5             C         push de
  5E84    C3 46E7        C         jp RTI
                         C      ;
  5E87    09 32 56 41    C      CDVARIAB:db 9,'2VARIABLE'
  5E8B    52 49 41 42    C
  5E8F    4C 45          C
  5E91    5E76           C         dw CDVAR
  5E93    4717           C      DVARIAB:dw FUN
  5E95    6382 6382      C             dw ZERO,ZERO,DVAR,FIM
  5E99    5E7D 46CD      C
                         C      ;
  5E9D    02 44 2F       C      CDDIV:   db 2,'D/'
  5EA0    5E87           C         dw CDVARIAB
  5EA2    4717           C      DDIV:   dw FUN
  5EA4    4FF6 5AC7      C             dw DMOD,DDROP,FIM
  5EA8    46CD           C
                         C      ;
                         C         INCLUDE FORTHDIC.IN2
                         C      ;
  5EAA    05 53 43 4F    C      CSCODE: db 5,'SCODE'
  5EAE    44 45          C
  5EB0    598B           C              dw CCR
  5EB2    4717           C      SCODE:  dw FUN
  5EB4    4DEA 577F      C              dw OUTRP,ULTIMA,POK16,FIM
  5EB8    4CE4 46CD      C
                         C      ;
                         C      ; : CONSTANT CREATE , ;CODE ...
  5EBC    08 43 4F 4E    C      CCONST: db 8,'CONSTANT'
  5EC0    53 54 41 4E    C
  5EC4    54             C
  5EC5    5EAA           C              dw CSCODE
  5EC7    4717           C      CONST:  dw FUN
  5EC9    5712 5650      C              dw CREATE,POKD16,SCODE
  5ECD    5EB2           C
  5ECF    EB             C      _CONST: ex de,hl
  5ED0    5E             C              ld e,(hl)
  5ED1    23             C              inc hl
  5ED2    56             C              ld d,(hl)
  5ED3    D5             C              push de
  5ED4    C3 46E7        C              jp RTI
                         C      ;
  5ED7    03 56 41 52    C      CVAR: db 3,'VAR'
  5EDB    5EBC           C            dw CCONST
  5EDD    4717           C      VAR:  dw FUN
  5EDF    5EC7 5EB2      C            dw CONST,SCODE
  5EE3    D5             C      _VAR: push de
  5EE4    C3 46E7        C            jp RTI
                         C      ;
  5EE7    08 56 41 52    C      CVARIAB: db 8,'VARIABLE'
  5EEB    49 41 42 4C    C
  5EEF    45             C
  5EF0    5ED7           C               dw CVAR
  5EF2    4717           C      VARIAB:  dw FUN
  5EF4    6382 5EDD      C               dw ZERO,VAR,FIM
  5EF8    46CD           C
                         C      ;
  5EFA    06 3F 45 52    C      CISERR:  db 6,'?ERROR'
  5EFE    52 4F 52       C
  5F01    5E9D           C               dw CDDIV   ;CVARIAB
  5F03    4717           C      ISERROR: dw FUN
  5F05    5246 4E64      C               dw SWAP,BRCH0,ISER1,QUESTION
  5F09    5F0D 5F1C      C
  5F0D    4886 46CD      C      ISER1:   dw DROP,FIM
                         C      ;
  5F11    08 51 55 45    C      CQUESTION: db 8,'QUESTION'
  5F15    53 54 49 4F    C
  5F19    4E             C
  5F1A    5EFA           C                 dw CISERR
  5F1C    5F1E           C      QUESTION:  dw $+2
  5F1E    CD 46B7        C                 call CRLF
  5F21    2A 4254        C                 ld hl,(PRECOMP)
  5F24    CD 46C1        C                 call IMM
  5F27    3E 20          C                 ld a,' '
  5F29    CD 44D2        C                 call VIDEO
  5F2C    3E 3F          C                 ld a,'?'
  5F2E    CD 44D2        C                 call VIDEO
  5F31    CD 46B7        C      Q2:        call CRLF
  5F34    CD 46B7        C                 call CRLF
  5F37    3A 4244        C                 ld a,(PMOD)
  5F3A    A7             C                 and a
  5F3B    CA 4785        C                 jp z,PREPARA
                         C                 ; REPOE PRECOMP COM A POSICAO DE MEMORIA LIVRE ANTES DA
                         C                 ; TENTATIVA DE COMPILACAO DA PALAVRA ATUAL
  5F3E    2A 424A        C                 ld hl,(PUPDC)
  5F41    5E             C                 ld e,(hl)
  5F42    23             C                 inc hl
  5F43    56             C                 ld d,(hl)
  5F44    EB             C                 ex de,hl
  5F45    22 4254        C                 ld (PRECOMP),hl
  5F48    7E             C                 ld a,(hl)
  5F49    85             C                 add a,l
  5F4A    6F             C                 ld l,a
  5F4B    30 01          C                 jr nc,Q1
  5F4D    24             C                 inc h
  5F4E    23             C      Q1:        inc hl
  5F4F    23             C                 inc hl
  5F50    7E             C                 ld a,(hl)
  5F51    12             C                 ld (de),a
  5F52    2B             C                 dec hl
  5F53    1B             C                 dec de
  5F54    7E             C                 ld a,(hl)
  5F55    12             C                 ld (de),a
  5F56    C3 4785        C                 jp PREPARA
                         C      ;
  5F59    0C 20 50 49    C      PVZ: db 12,' PILHA VAZIA'
  5F5D    4C 48 41 20    C
  5F61    56 41 5A 49    C
  5F65    41             C
                         C      ;
  5F66    5F68           C      VZ: dw $+2
  5F68    E1             C          pop hl
  5F69    29             C          add hl,hl
  5F6A    EB             C          ex de,hl
  5F6B    2A 4236        C          ld hl,(PPP)
  5F6E    AF             C          xor a
  5F6F    ED 52          C          sbc hl,de
  5F71    A7             C          and a
  5F72    ED 72          C          sbc hl,sp
  5F74    D2 46E7        C          jp nc,RTI
  5F77    CD 00C0        C          call MSX_BEEP
  5F7A    21 5F59        C          ld hl,PVZ
  5F7D    CD 46C1        C          call IMM
  5F80    C3 5F31        C          jp Q2
                         C      ;
                         C
  5F83    12 07 20 44    C      PZRDIV: db 18,07H,' DIVISAO POR ZERO'
  5F87    49 56 49 53    C
  5F8B    41 4F 20 50    C
  5F8F    4F 52 20 5A    C
  5F93    45 52 4F       C
                         C      ;
  5F96    5F98           C      ZRDIV: dw $+2
  5F98    21 5F83        C             ld hl,PZRDIV
  5F9B    CD 46C1        C             call IMM
  5F9E    C3 5F31        C             jp Q2
                         C
  5FA1    05 4F 55 54    C      COUTIN: db 5,'OUTIN'
  5FA5    49 4E          C
  5FA7    5F11           C              dw CQUESTION
  5FA9    4717           C      OUTIN:  dw FUN
  5FAB    5041 4B1B      C              dw BLANK,WORD,ISEARCH,BRCH0
  5FAF    55C7 4E64      C
  5FB3    5FC9 5605      C              dw OU1,INUMBER,IGU0,BRCH0,OU2
  5FB7    4855 4E64      C
  5FBB    5FCF           C
  5FBD    4E10 4CF2      C      OU4:    dw FWORD,PEK16,BRCH0,OU2+2,BRCH
  5FC1    4E64 5FD1      C
  5FC5    4E79           C
  5FC7    5FAB           C              dw OUTIN+2
  5FC9    57DD 4E79      C      OU1:    dw IEXEC,BRCH,OU4
  5FCD    5FBD           C
  5FCF    5F1C 4C08      C      OU2:    dw QUESTION,MODE,PEK16,IGU0,BRCH0,OU3,OK
  5FD3    4CF2 4855      C
  5FD7    4E64 5FDD      C
  5FDB    44B4           C
  5FDD    46CD           C      OU3:    dw FIM
                         C      ;
  5FDF    08 2B 50 52    C      CSET_PRN: db 8,'+PRINTER'
  5FE3    49 4E 54 45    C
  5FE7    52             C
  5FE8    5FA1           C                dw COUTIN
  5FEA    5FEC           C                dw $+2
  5FEC    3E FF          C                ld a,-1
  5FEE    32 4286        C                ld (LST),a
  5FF1    C3 46E7        C                jp RTI
                         C      ;
  5FF4    08 2D 50 52    C      CRST_PRN: db 8,'-PRINTER'
  5FF8    49 4E 54 45    C
  5FFC    52             C
  5FFD    5FDF           C                dw CSET_PRN
  5FFF    6001           C                dw $+2
  6001    AF             C                xor a
  6002    32 4286        C                ld (LST),a
  6005    C3 46E7        C                jp RTI
                         C      ;
  6008    07 2B 53 43    C      CSET_SCR: db 7,'+SCRMOD'
  600C    52 4D 4F 44    C
  6010    5FF4           C                dw CRST_PRN
  6012    6014           C                dw $+2
  6014    3E FF          C                ld a,-1
  6016    32 4287        C                ld (CONS),a
  6019    C3 46E7        C                jp RTI
                         C      ;
  601C    07 2D 53 43    C      CRST_SCR: db 7,'-SCRMOD'
  6020    52 4D 4F 44    C
  6024    6008           C                dw CSET_SCR
  6026    6028           C                dw $+2
  6028    AF             C                xor a
  6029    32 4287        C                ld (CONS),a
  602C    C3 46E7        C                jp RTI
                         C      ;
                         C      IFDEF   CPM
                         C      CROWS: db 4,'ROWS'
                         C             dw CRST_SCR
                         C      ROWS:  dw $+2
                         C             pop hl
                         C             ld a,l
                         C             ld (MSX_CRTCNT),a
                         C             jp RTI
                         C      ;
                         C      CCOLS: db 4,'COLS'
                         C             dw CROWS
                         C      COLS:  dw $+2
                         C             pop hl
                         C             ld a,l
                         C             ld (MSX_LINLEN),a
                         C             jp RTI
                         C      ;
                         C      CLIST: db 4,'LIST'
                         C             dw CCOLS
                         C      ELSE ; MSX
  602F    04 4C 49 53    C      CLIST: db 4,'LIST'
  6033    54             C
  6034    5FF4           C             dw CRST_PRN
                         C      ENDIF
  6036    4717           C             dw FUN
  6038    47C2 47C2      C             dw DUP,DUP,PEK8,MAIS,MAIS1
  603C    4D2E 4FD8      C
  6040    5953           C
  6042    5246 5953      C             dw SWAP,MAIS1,CR,B_LOOP
  6046    5990 4C3C      C
  604A    4E2B 4D2E      C      LIST1: dw LELOOP,PEK8,EMIT,LOOP,LIST1
  604E    48BD 4C6A      C
  6052    604A           C
  6054    5990 46CD      C             dw CR,FIM
                         C      ;
  6058    04 4C 4F 41    C      CLOAD: db 4,'LOAD'
  605C    44             C
  605D    602F           C             dw CLIST
  605F    4717           C             dw FUN
  6061    5953 49B7      C             dw MAIS1,LBP,POK16,ONE,FWORD
  6065    4CE4 6390      C
  6069    4E10           C
  606B    4CE4 5FA9      C             dw POK16,OUTIN,FIM
  606F    46CD           C
                         C      ;
  6071    06 49 4E 54    C      CINTXT: db 6,'INTEXT'
  6075    45 58 54       C
  6078    6058           C              dw CLOAD
  607A    4717           C              dw FUN
  607C    5990 49F2      C              dw CR,EXPECT,FIM
  6080    46CD           C
                         C      ;
  6082    06 42 55 46    C      CBUFFER: db 6,'BUFFER'
  6086    46 45 52       C
  6089    6071           C               dw CINTXT
  608B    4717           C               dw FUN
  608D    51DD 47C2      C               dw BUILDS,DUP,DUP,POKD16
  6091    47C2 5650      C
  6095    63BE 51AB      C               dw ALLOT,DOES,DUP,PEK16,SWAP
  6099    47C2 4CF2      C
  609D    5246           C
  609F    5701 5246      C               dw MAIS2,SWAP,FIM
  60A3    46CD           C
                         C      ;
  60A5    08 49 4E 42    C      CINBUFF: db 8,'INBUFFER'
  60A9    55 46 46 45    C
  60AD    52             C
  60AE    6082           C               dw CBUFFER
  60B0    4717           C               dw FUN
  60B2    5990 49F2      C               dw CR,EXPECT,FIM
  60B6    46CD           C
                         C      ;
  60B8    06 46 4F 52    C      CFORGET: db 6,'FORGET'
  60BC    47 45 54       C
  60BF    60A5           C               dw CINBUFF
  60C1    4717           C               dw FUN
  60C3    557B 4CF2      C               dw CURRENT,PEK16,CONTEXT
  60C7    5569           C
  60C9    4CE4 5179      C               dw POK16,PESQ,DUP,MENOS2,PEK16
  60CD    47C2 62E3      C
  60D1    4CF2           C
  60D3    557B 4CF2      C               dw CURRENT,PEK16,POK16,DP,PEK16
  60D7    4CE4 56B5      C
  60DB    4CF2           C
  60DD    4D2E 63AE      C               dw PEK8,THREE,MAIS,MENOS,DP,POK16
  60E1    4FD8 4FE4      C
  60E5    56B5 4CE4      C
  60E9    5640 46CD      C               dw PUSHN,FIM,PUSHN,FAR,POK16,FIM
  60ED    5640 4256      C
  60F1    4CE4 46CD      C
                         C      ;
                         C      ; TRANSFORMA A ULTIMA PALAVRA INCLUIDA NO DICIONARIO
                         C      ; EM COMANDO DE COMPILACAO (USADO ENTRE ":" E ";"
  60F5    09 49 4D 4D    C      CIMMEDIATE: db 9,'IMMEDIATE'
  60F9    45 44 49 41    C
  60FD    54 45          C
  60FF    60B8           C                  dw CFORGET
  6101    4717           C                  dw FUN
  6103    5699 47C2      C                  dw ENTRY,DUP,DUP,PEK8,MAIS1
  6107    47C2 4D2E      C
  610B    5953           C
  610D    4FD8 47C2      C                  dw MAIS,DUP,PEK16,CURRENT
  6111    4CF2 557B      C
  6115    4CF2 4CE4      C                  dw PEK16,POK16,COMPILER
  6119    558E           C
  611B    4CF2 5246      C                  dw PEK16,SWAP,POK16,COMPILER
  611F    4CE4 558E      C
  6123    4CE4 46CD      C                  dw POK16,FIM
                         C      ;
  6127    05 4C 4F 4F    C      CHLOOP: db 5,'LOOPS'
  612B    50 53          C
  612D    60F5           C              dw CIMMEDIATE
  612F    4717           C              dw FUN
  6131    5990 5990      C              dw CR,CR,DISP
  6135    5802           C
  6137    2C 46 69 6D    C              db 44,'Fim+1 In',0A1H,'cio DO <.[I].> [LEAVE] <.[I].> LOOP'
  613B    2B 31 20 49    C
  613F    6E A1 63 69    C
  6143    6F 20 44 4F    C
  6147    20 3C 2E 5B    C
  614B    49 5D 2E 3E    C
  614F    20 5B 4C 45    C
  6153    41 56 45 5D    C
  6157    20 3C 2E 5B    C
  615B    49 5D 2E 3E    C
  615F    20 4C 4F 4F    C
  6163    50             C
  6164    5990 5990      C              dw CR,CR,DISP
  6168    5802           C
  616A    33 46 69 6D    C              db 51,'Fim+1 In',0A1H,'cio DO <.[I].> [LEAVE] <.[I].> Valor +LOOP'
  616E    2B 31 20 49    C
  6172    6E A1 63 69    C
  6176    6F 20 44 4F    C
  617A    20 3C 2E 5B    C
  617E    49 5D 2E 3E    C
  6182    20 5B 4C 45    C
  6186    41 56 45 5D    C
  618A    20 3C 2E 5B    C
  618E    49 5D 2E 3E    C
  6192    20 56 61 6C    C
  6196    6F 72 20 2B    C
  619A    4C 4F 4F 50    C
  619E    5990 5990      C              dw CR,CR,DISP
  61A2    5802           C
  61A4    10 42 45 47    C              db 16,'BEGIN <..> AGAIN'
  61A8    49 4E 20 3C    C
  61AC    2E 2E 3E 20    C
  61B0    41 47 41 49    C
  61B4    4E             C
  61B5    5990 5990      C              dw CR,CR,DISP
  61B9    5802           C
  61BB    15 42 45 47    C              db 21,'BEGIN <..> Flag UNTIL'
  61BF    49 4E 20 3C    C
  61C3    2E 2E 3E 20    C
  61C7    46 6C 61 67    C
  61CB    20 55 4E 54    C
  61CF    49 4C          C
  61D1    5990 5990      C              dw CR,CR,DISP
  61D5    5802           C
  61D7    23 42 45 47    C              db 35,'BEGIN <..> Flag WHILE [<..>] REPEAT'
  61DB    49 4E 20 3C    C
  61DF    2E 2E 3E 20    C
  61E3    46 6C 61 67    C
  61E7    20 57 48 49    C
  61EB    4C 45 20 5B    C
  61EF    3C 2E 2E 3E    C
  61F3    5D 20 52 45    C
  61F7    50 45 41 54    C
  61FB    5990 5990      C              dw CR,CR,FIM
  61FF    46CD           C
                         C      ;
  6201    05 42 45 47    C      CBEGIN: db 5,'BEGIN'
  6205    49 4E          C
  6207    5E2E           C              dw CDLOOP   ;CCODI
  6209    4717           C              dw FUN
  620B    56C4 46CD      C              dw HERE,FIM
                         C      ;
  620F    05 57 48 49    C      CWHILE: db 5,'WHILE'
  6213    4C 45          C
  6215    6201           C              dw CBEGIN
  6217    4717           C              dw FUN
  6219    5640 4E64      C              dw PUSHN,BRCH0,MARK_S,ZERO
  621D    5960 6382      C
  6221    5650 46CD      C              dw POKD16,FIM
                         C      ;
  6225    06 52 45 50    C      CREPEAT: db 6,'REPEAT'
  6229    45 41 54       C
  622C    620F           C               dw CWHILE
  622E    4717           C               dw FUN
  6230    5246 5640      C               dw SWAP,PUSHN,BRCH
  6234    4E79           C
  6236    4E1F 56C4      C               dw MARK_E,HERE,SWAP,POK16
  623A    5246 4CE4      C
  623E    46CD           C               dw FIM
                         C      ;
  6240    05 55 4E 54    C      CUNTIL: db 5,'UNTIL'
  6244    49 4C          C
  6246    6225           C              dw CREPEAT
  6248    4717           C              dw FUN
  624A    5640 4E64      C              dw PUSHN,BRCH0,MARK_E,FIM
  624E    4E1F 46CD      C
                         C      ;
  6252    05 41 47 41    C      CAGAIN: db 5,'AGAIN'
  6256    49 4E          C
  6258    6240           C              dw CUNTIL
  625A    4717           C              dw FUN
  625C    5640 4E79      C              dw PUSHN,BRCH,MARK_E,FIM
  6260    4E1F 46CD      C
                         C      ;
  6264    01 28          C      CREM: db 1,'('
  6266    6127           C            dw CHLOOP
  6268    4717           C            dw FUN
  626A    5640 0029      C            dw PUSHN,29H,WORD,FIM
  626E    4B1B 46CD      C
                         C      ;
  6272    07 44 45 43    C      CDECIMAL: db 7,'DECIMAL'
  6276    49 4D 41 4C    C
  627A    6264           C                dw CREM
  627C    627E           C      DECIMAL:  dw $+2
  627E    3E 0A          C                ld a,10
  6280    32 4246        C      BA:       ld (PBAS),a
  6283    C3 46E7        C                jp RTI
                         C      ;
  6286    05 4F 43 54    C      COCTAL: db 5,'OCTAL'
  628A    41 4C          C
  628C    6272           C              dw CDECIMAL
  628E    6290           C              dw $+2
  6290    3E 08          C              ld a,8
  6292    18 EC          C              jr BA
                         C      ;
  6294    03 48 45 58    C      CHEX: db 3,'HEX'
  6298    6286           C            dw COCTAL
  629A    629C           C      HEX:  dw $+2
  629C    3E 10          C            ld a,16
  629E    18 E0          C            jr BA
                         C      ;
  62A0    06 42 49 4E    C      CBINARY: db 6,'BINARY'
  62A4    41 52 59       C
  62A7    6294           C               dw CHEX
  62A9    62AB           C               dw $+2
  62AB    3E 02          C               ld a,2
  62AD    18 D1          C               jr BA
                         C      ;
  62AF    04 2E 43 50    C      C_CPU: db 4,'.CPU'
  62B3    55             C
  62B4    62A0           C             dw CBINARY
  62B6    4717           C             dw FUN
  62B8    4E9C 4CF2      C             dw BASE,PEK16,PUSHN,24H,BASE
  62BC    5640 0024      C
  62C0    4E9C           C
  62C2    4CE4 5640      C             dw POK16,PUSHN,CPU,PEK32,IMPDS
  62C6    427C 5C64      C
  62CA    54CD           C
  62CC    4E9C 4CE4      C             dw BASE,POK16,FIM
  62D0    46CD           C
                         C      ;
  62D2    02 31 2D       C      CMENO1: db 2,'1-'
  62D5    62AF           C              dw C_CPU
  62D7    62D9           C      MENOS1: dw $+2
  62D9    E1             C              pop hl
  62DA    2B             C              dec hl
  62DB    C3 46E6        C              jp RPhl
                         C      ;
  62DE    02 32 2D       C      CMENO2: db 2,'2-'
  62E1    62D2           C              dw CMENO1
  62E3    62E5           C      MENOS2: dw $+2
  62E5    E1             C              pop hl
  62E6    2B             C              dec hl
  62E7    2B             C              dec hl
  62E8    C3 46E6        C              jp RPhl
                         C      ;
  62EB    03 23 49 4E    C      CNUIN: db 3,'#IN'
  62EF    62DE           C             dw CMENO2
  62F1    4717           C      NUIN:  dw FUN
  62F3    5802 2301      C             dw DISP,2301H,PUSHN,BFTC
  62F7    5640 425C      C
  62FB    4CF2 47C2      C             dw PEK16,DUP,MAIS1,LBP,POK16
  62FF    5953 49B7      C
  6303    4CE4           C
  6305    5640 0008      C             dw PUSHN,8,EXPECT,BLANK,WORD
  6309    49F2 5041      C
  630D    4B1B           C
  630F    4EAD 4E64      C             dw NUMBER,BRCH0,NUIN+2,FIM
  6313    62F3 46CD      C
                         C      ;
  6317    03 41 4E 44    C      CAND: db 3,'AND'
  631B    62EB           C            dw CNUIN
  631D    631F           C      AND:  dw $+2
  631F    E1             C            pop hl
  6320    D1             C            pop de
  6321    7B             C            ld a,e
  6322    A5             C            and l
  6323    6F             C            ld l,a
  6324    7A             C            ld a,d
  6325    A4             C            and h
  6326    67             C            ld h,a
  6327    C3 46E6        C            jp RPhl
                         C      ;
  632A    02 4F 52       C      COR: db 2,'OR'
  632D    6317           C           dw CAND
  632F    6331           C      OR:  dw $+2
  6331    E1             C           pop hl
  6332    D1             C           pop de
  6333    7B             C           ld a,e
  6334    B5             C           or l
  6335    6F             C           ld l,a
  6336    7A             C           ld a,d
  6337    B4             C           or h
  6338    67             C           ld h,a
  6339    C3 46E6        C           jp RPhl
                         C      ;
  633C    03 58 4F 52    C      CXOR: db 3,'XOR'
  6340    632A           C            dw COR
  6342    6344           C      XOR:  dw $+2
  6344    E1             C            pop hl
  6345    D1             C      XO:   pop de
  6346    7B             C            ld a,e
  6347    AD             C            xor l
  6348    6F             C            ld l,a
  6349    7A             C            ld a,d
  634A    AC             C            xor h
  634B    67             C            ld h,a
  634C    C3 46E6        C            jp RPhl
                         C      ;
  634F    03 4E 4F 54    C      CNOT: db 3,'NOT'
  6353    633C           C            dw CXOR
  6355    4717           C      NOT:  dw FUN
  6357    4855 46CD      C            dw IGU0,FIM
                         C      ;
  635B    06 49 4E 56    C      CINV: db 6,'INVERT'
  635F    45 52 54       C
  6362    634F           C            dw CNOT
  6364    4717           C            dw FUN
  6366    6373 6342      C            dw TRUE,XOR,FIM
  636A    46CD           C
                         C      ;
  636C    04 54 52 55    C      CTRUE: db 4,'TRUE'
  6370    45             C
  6371    635B           C             dw CINV
  6373    6375           C      TRUE:  dw $+2
  6375    21 FFFF        C             ld hl,-1
  6378    C3 46E6        C             jp RPhl
                         C      ;
  637B    04 5A 45 52    C      CZERO: db 4,'ZERO'
  637F    4F             C
  6380    636C           C             dw CTRUE
  6382    6384           C      ZERO:  dw $+2
  6384    21 0000        C             ld hl,0
  6387    C3 46E6        C             jp RPhl
                         C      ;
  638A    03 4F 4E 45    C      CONE: db 3,'ONE'
  638E    637B           C            dw CZERO
  6390    6392           C      ONE:  dw $+2
  6392    21 0001        C            ld hl,1
  6395    C3 46E6        C            jp RPhl
                         C      ;
  6398    03 54 57 4F    C      CTWO: db 3,'TWO'
  639C    638A           C            dw CONE
  639E    63A0           C      TWO:  dw $+2
  63A0    21 0002        C            ld hl,2
  63A3    C3 46E6        C            jp RPhl
                         C      ;
  63A6    05 54 48 52    C      CTHREE: db 5,'THREE'
  63AA    45 45          C
  63AC    6398           C              dw CTWO
  63AE    63B0           C      THREE:  dw $+2
  63B0    21 0003        C              ld hl,3
  63B3    C3 46E6        C              jp RPhl
                         C      ;
  63B6    05 41 4C 4C    C      CALLOT: db 5,'ALLOT'
  63BA    4F 54          C
  63BC    63A6           C              dw CTHREE
  63BE    4717           C      ALLOT:  dw FUN
  63C0    56B5 56D1      C              dw DP,SOMEM,FIM
  63C4    46CD           C
                         C      ;
  63C6    02 4D 2A       C      CM_VEZES: db 2,'M*'
  63C9    63B6           C                dw CALLOT
  63CB    4717           C      M_VEZES:  dw FUN
  63CD    599F 6342      C                dw DDUP,XOR,INRP,ABS,SWAP
  63D1    4DD5 5276      C
  63D5    5246           C
  63D7    5276 52AE      C                dw ABS,UVEZES,OUTRP,DMODUL,FIM
  63DB    4DEA 5264      C
  63DF    46CD           C
                         C      ;
  63E1    02 4D 2F       C      CM_DIV: db 2,'M/'
  63E4    63C6           C              dw CM_VEZES
  63E6    4717           C      M_DIV:  dw FUN
  63E8    5982 4DD5      C              dw OVER,INRP,INRP,DABS,LERP
  63EC    4DD5 528F      C
  63F0    4DFD           C
  63F2    5276 52E0      C              dw ABS,UDIV,OUTRP,LERP,XOR,MODUL
  63F6    4DEA 4DFD      C
  63FA    6342 5252      C
  63FE    5246 4DEA      C              dw SWAP,OUTRP,MODUL,SWAP,FIM
  6402    5252 5246      C
  6406    46CD           C
                         C      ;
  6408    01 2F          C      CDIV: db 1,'/'
  640A    63E1           C            dw CM_DIV
  640C    4717           C      DIV:  dw FUN
  640E    6382 5246      C            dw ZERO,SWAP,DMOD,DROP,FIM
  6412    4FF6 4886      C
  6416    46CD           C
                         C      ;
  6418    04 2F 4D 4F    C      CDVMOD: db 4,'/MOD'
  641C    44             C
  641D    6408           C              dw CDIV
  641F    4717           C      DVMOD:  dw FUN
  6421    6382 5246      C              dw ZERO,SWAP,DMOD,SWAP,FIM
  6425    4FF6 5246      C
  6429    46CD           C
                         C      ;
  642B    03 4D 4F 44    C      CMOD: db 3,'MOD'
  642F    6418           C            dw CDVMOD
  6431    4717           C      _MOD: dw FUN
  6433    641F 4886      C            dw DVMOD,DROP,FIM
  6437    46CD           C
                         C      ;
  6439    05 2A 2F 4D    C      CVDMOD: db 5,'*/MOD'
  643D    4F 44          C
  643F    642B           C              dw CMOD
  6441    4717           C      VDMOD:  dw FUN
  6443    4DD5 63CB      C              dw INRP,M_VEZES,OUTRP,M_DIV,FIM
  6447    4DEA 63E6      C
  644B    46CD           C
                         C      ;
  644D    02 2A 2F       C      CVDIV:   db 2,'*/'
  6450    6439           C               dw CVDMOD
  6452    4717           C      VEZ_DIV: dw FUN
  6454    6441 5246      C               dw VDMOD,SWAP,DROP,FIM
  6458    4886 46CD      C
                         C      ;
  645C    03 44 54 5A    C      CDTZ: db 3,'DTZ'
  6460    644D           C            dw CVDIV
  6462    4717           C            dw FUN
  6464    47C2 4CF2      C            dw DUP,PEK16,MENOS1,DUP,OVER
  6468    62D7 47C2      C
  646C    5982           C
  646E    4CE4 4855      C            dw POK16,IGU0,SWAP,DROP,FIM
  6472    5246 4886      C
  6476    46CD           C
                         C      ;
  6478    02 50 40       C      CPPEK: db 2,'P@'
  647B    645C           C             dw CDTZ
  647D    647F           C             dw $+2
  647F    D9             C             exx
  6480    C1             C             pop bc
  6481    ED 68          C             in l,(c)
  6483    26 00          C             ld h,0
  6485    E5             C             push hl
  6486    C3 4B62        C             jp RG
                         C      ;
  6489    02 50 21       C      CPPOK: db 2,'P!'
  648C    6478           C             dw CPPEK
  648E    6490           C             dw $+2
  6490    D9             C             exx
  6491    C1             C             pop bc
  6492    E1             C             pop hl
  6493    ED 69          C             out (c),l
  6495    C3 4B62        C             jp RG
                         C      ;
                         C      IFDEF CPM
                         C      CVLFLG: db 0
                         C      ENDIF
                         C      ;
  6498    05 56 4C 49    C      CVLIST: db 5,'VLIST'
  649C    53 54          C
  649E    6489           C              dw CPPOK
  64A0    64A2           C              dw $+2
  64A2    D9             C              exx
  64A3    CD 44AB        C              call LNCND
  64A6    2A 424C        C              ld hl,(UPDC)
  64A9    22 425F        C              ld (PF),hl
  64AC    ED 5B 4250     C              ld de,(UPCC)
  64B0    ED 53 4261     C              ld (PC),de
  64B4    AF             C              xor a
  64B5    32 4263        C              ld (NL),a
  64B8    32 4265        C              ld (NA),a
  64BB    3C             C              inc a
  64BC    32 F3DD        C              ld (MSX_CSRX),a
  64BF    2A 4261        C      VL7:    ld hl,(PC)
  64C2    ED 5B 425F     C              ld de,(PF)
  64C6    AF             C              xor a
  64C7    BC             C              cp h
  64C8    20 03          C              jr nz,VL10
  64CA    BD             C              cp l
  64CB    28 0C          C              jr z,VL12
  64CD    BA             C      VL10:   cp d
  64CE    20 03          C              jr nz,VL11
  64D0    BB             C              cp e
  64D1    28 0D          C              jr z,VL1
  64D3    AF             C      VL11:   xor a
  64D4    ED 52          C              sbc hl,de
  64D6    F2 64E0        C              jp p,VL1
  64D9    2A 425F        C      VL12:   ld hl,(PF)
  64DC    3E 20          C              ld a,' '
  64DE    18 05          C              jr VL2
  64E0    2A 4261        C      VL1:   ld hl,(PC)
                         C      IFNDEF CPM
  64E3    3E CF          C             ld a,MSX_SHOWKEYS
                         C      ELSE
                         C             ld a,10H
                         C      ENDIF
  64E5    F5             C      VL2:   push af
  64E6    46             C             ld b,(hl)
  64E7    3A F3B0        C             ld a,(MSX_LINLEN)
  64EA    5F             C             ld e,a
  64EB    3A 4265        C             ld a,(NA)
  64EE    80             C             add a,b
  64EF    C6 03          C             add a,3
  64F1    32 4265        C             ld (NA),a
  64F4    BB             C             cp e
  64F5    FA 6527        C             jp m,VL0
  64F8    78             C             ld a,b
  64F9    3C             C             inc a
  64FA    32 4265        C             ld (NA),a
  64FD    CD 46B7        C             call CRLF
  6500    E5             C             push hl
                         C      IFDEF CPM
                         C             ld a,1
                         C             ld (MSX_CSRX),a
                         C      ENDIF
  6501    3A F3B1        C             ld a,(MSX_CRTCNT)
  6504    3D             C             dec a
  6505    3D             C             dec a
  6506    5F             C             ld e,a
  6507    21 4263        C             ld hl,NL
  650A    34             C             inc (hl)
  650B    7E             C             ld a,(hl)
  650C    BB             C             cp e
  650D    FA 6526        C             jp m,VL4
  6510    AF             C             xor a
  6511    77             C             ld (hl),a
  6512    CD 46A8        C             call TECLA
  6515    FE 03          C             cp 3
  6517    28 04          C             jr z,VL5
  6519    FE 1B          C             cp 27
  651B    20 09          C             jr nz,VL4
  651D                   C      VL5:
                         C      IFNDEF CPM
  651D    AF             C             xor a
  651E    32 FC9B        C             ld (MSX_INTFLG),a
                         C      ENDIF
  6521    E1             C             pop hl
  6522    E1             C             pop hl
  6523    C3 4B62        C      VL8:   jp RG
  6526    E1             C      VL4:   pop hl
  6527                   C      VL0:
                         C      IFNDEF  CPM
  6527    3A F3DD        C             ld a,(MSX_CSRX)
  652A    FE 01          C             cp 1
  652C    28 0A          C             jr z,VLA
                         C      ELSE
                         C             ld a,(MSX_CSRX)
                         C             cp 1
                         C             push af
                         C             xor a
                         C             ld (MSX_CSRX),a
                         C             pop af
                         C             jr z,VLA
                         C      ENDIF
  652E    3E 20          C             ld a,' '
  6530    CD 44D2        C             call VIDEO
  6533    3E 20          C             ld a,' '
  6535    CD 44D2        C             call VIDEO
  6538    F1             C      VLA:   pop af
  6539    F5             C             push af
  653A    CD 44D2        C             call VIDEO
  653D    23             C      VL3:   inc hl
  653E    7E             C             ld a,(hl)
  653F    CD 44D2        C             call VIDEO
  6542    10 F9          C             djnz VL3
  6544    23             C             inc hl
  6545    5E             C             ld e,(hl)
  6546    23             C             inc hl
  6547    56             C             ld d,(hl)
  6548    EB             C             ex de,hl
  6549    F1             C             pop af
  654A    FE 20          C             cp ' '
  654C    28 05          C             jr z,VL6
  654E    22 4261        C             ld (PC),hl
  6551    18 03          C             jr VL9
  6553    22 425F        C      VL6:   ld (PF),hl
  6556    2A 4261        C      VL9:   ld hl,(PC)
  6559    ED 5B 425F     C             ld de,(PF)
  655D    7C             C             ld a,h
  655E    B5             C             or l
  655F    B2             C             or d
  6560    B3             C             or e
  6561    28 03          C             jr z,VLB
  6563    C3 64BF        C             jp VL7
  6566    CD 46B7        C      VLB:   call CRLF
  6569    C3 4B62        C             jp RG
                         C      ;
  656C    05 57 4F 52    C      CWORDS: db 5,'WORDS'
  6570    44 53          C
  6572    6498           C              dw CVLIST
  6574    6576           C             dw $+2
  6576    D9             C             exx
  6577    21 0000        C             ld hl,0
  657A    22 4329        C             ld (VAR1),hl
  657D    2A 424C        C             ld hl,(UPDC)
  6580    22 425F        C             ld (PF),hl
  6583    ED 5B 4250     C             ld de,(UPCC)
  6587    ED 53 4261     C             ld (PC),de
  658B    2A 4261        C      WS1:   ld hl,(PC)
  658E    ED 5B 425F     C             ld de,(PF)
  6592    AF             C             xor a
  6593    BC             C             cp h
  6594    20 03          C             jr nz,WS2
  6596    BD             C             cp l
  6597    28 0C          C             jr z,WS4
  6599    BA             C      WS2:   cp d
  659A    20 03          C             jr nz,WS3
  659C    BB             C             cp e
  659D    28 0B          C             jr z,WS5
  659F    AF             C      WS3:   xor a
  65A0    ED 52          C             sbc hl,de
  65A2    F2 65AA        C             jp p,WS5
  65A5    2A 425F        C      WS4:   ld hl,(PF)
  65A8    18 04          C             jr WS6
  65AA    2A 4261        C      WS5:   ld hl,(PC)
  65AD    3D             C             dec a
  65AE    F5             C      WS6:   push af
  65AF    5E             C             ld e,(hl)
  65B0    16 00          C             ld d,0
  65B2    23             C             inc hl
  65B3    19             C             add hl,de
  65B4    E5             C             push hl
  65B5    2A 4329        C             ld hl,(VAR1)
  65B8    23             C             inc hl
  65B9    22 4329        C             ld (VAR1),hl
  65BC    E1             C             pop hl
  65BD    5E             C             ld e,(hl)
  65BE    23             C             inc hl
  65BF    56             C             ld d,(hl)
  65C0    EB             C             ex de,hl
  65C1    F1             C             pop af
  65C2    A7             C             and a
  65C3    28 05          C             jr z,WS7
  65C5    22 4261        C             ld (PC),hl
  65C8    18 03          C             jr WS8
  65CA    22 425F        C      WS7:   ld (PF),hl
  65CD    2A 4261        C      WS8:   ld hl,(PC)
  65D0    ED 5B 425F     C             ld de,(PF)
  65D4    AF             C             xor a
  65D5    B4             C             or h
  65D6    B5             C             or l
  65D7    B2             C             or d
  65D8    B3             C             or e
  65D9    20 B0          C             jr nz,WS1
  65DB    2A 4329        C             ld hl,(VAR1)
  65DE    E5             C             push hl
  65DF    C3 4B62        C             jp RG
                         C      ;
  65E2    06 44 45 46    C      CDEFSTR: db 6,'DEFSTR'
  65E6    53 54 52       C
  65E9    656C           C               dw CWORDS
  65EB    4717           C               dw FUN
  65ED    51DD 47C2      C               dw BUILDS,DUP,POKD16,ALLOT
  65F1    5650 63BE      C
  65F5    51AB 639E      C               dw DOES,TWO,MAIS,MAIS,FIM
  65F9    4FD8 4FD8      C
  65FD    46CD           C
                         C      ;
  65FF    01 22          C      CTRANS: db 1,'"'
  6601    65E2           C              dw CDEFSTR
  6603    4717           C              dw FUN
  6605    5640 0022      C              dw PUSHN,'"',WORD,HERE,SWAP
  6609    4B1B 56C4      C
  660D    5246           C
  660F    56C4 4D2E      C              dw HERE,PEK8,MAIS1,CMOVE,FIM
  6613    5953 4CD5      C
  6617    46CD           C
                         C      ;
                         C      IFNDEF CPM
  6619    05 53 50 45    C      CSPEED: db 5,'SPEED'
  661D    45 44          C
  661F    65FF           C              dw CTRANS
  6621    6623           C              dw $+2
  6623    21 4269        C              ld hl,SPD
  6626    C3 46E6        C              jp RPhl
                         C      ;
  6629    06 50 52 4F    C      CPROMPT: db 6,'PROMPT'
  662D    4D 50 54       C
  6630    6619           C               dw CSPEED
                         C      ELSE
                         C      CPROMPT: db 6,'PROMPT'
                         C               dw CTRANS
                         C      ENDIF
  6632    6634           C               dw $+2
  6634    21 4267        C               ld hl,PMPT
  6637    C3 46E6        C               jp RPhl
                         C      ;
  663A    04 50 4F 53    C      CPOSX: db 4,'POSX'
  663E    58             C
  663F    6629           C             dw CPROMPT
  6641    6643           C             dw $+2
  6643    21 F3DD        C             ld hl,MSX_CSRX
  6646    C3 46E6        C             jp RPhl
                         C      ;
  6649    04 50 4F 53    C      CPOSY: db 4,'POSY'
  664D    59             C
  664E    663A           C             dw CPOSX
  6650    6652           C             dw $+2
  6652    21 F3DC        C             ld hl,MSX_CSRY
  6655    C3 46E6        C             jp RPhl
                         C      ;
                         C      ; INCLUI AS PALAVRAS NOVAS NO DICIONARIO FIXO
  6658    07 49 4E 43    C      CINCL: db 7,'INCLUDE'
  665C    4C 55 44 45    C
  6660    6649           C             dw CPOSY
  6662    6664           C             dw $+2
  6664    2A 4254        C             ld hl,(PRECOMP)
  6667    22 4252        C             ld (PPD),hl
  666A    2A 424C        C             ld hl,(UPDC)
  666D    22 424E        C             ld (UPFXD),hl
  6670    21 46CD        C             ld hl,FIM
  6673    22 4256        C             ld (FAR),hl
  6676    C3 46E7        C             jp RTI
                         C      ;
                         C      ; LIMPA AS PALAVRAS QUE NAO FORAM FIXADAS
  6679    03 4E 45 57    C      CNEW: db 3,'NEW'
  667D    6658           C            dw CINCL
  667F    6681           C      NEW:  dw $+2
  6681    2A 4252        C            ld hl,(PPD)
  6684    22 4254        C            ld (PRECOMP),hl
  6687    2A 424E        C            ld hl,(UPFXD)
  668A    22 424C        C            ld (UPDC),hl
  668D    21 46CD        C            ld hl,FIM
  6690    22 4256        C            ld (FAR),hl
  6693    C3 46E7        C            jp RTI
                         C      ;
                         C      ; EXECUTA A PALAVRA FORTH APONTADA PELA PILHA DE EXECUCAO
  6696    03 52 55 4E    C      CRUN: db 3,'RUN'
  669A    6679           C            dw CNEW
  669C    4717           C            dw FUN
  669E    5640 4256      C            dw PUSHN,FAR,PEK16,EXEC,FIM
  66A2    4CF2 4BFB      C
  66A6    46CD           C
                         C      ;
                         C      ; MUDA O INTERPRETADOR FORTH PARA A
                         C      ; ULTIMA PALAVRA INCLUIDA NO DICIONARIO
  66A8    06 41 53 53    C      CASS: db 6,'ASSIGN'
  66AC    49 47 4E       C
  66AF    6696           C            dw CRUN
  66B1    66B3           C            dw $+2
  66B3    2A 424C        C            ld hl,(UPDC)
  66B6    7E             C            ld a,(hl)
  66B7    5F             C            ld e,a
  66B8    16 00          C            ld d,0
  66BA    19             C            add hl,de
  66BB    11 0003        C            ld de,3
  66BE    19             C            add hl,de
  66BF    22 4256        C            ld (FAR),hl
  66C2    C3 46E7        C            jp RTI
                         C      ;
                         C         INCLUDE FORTHCAS.INC
                         C      ;
  66C5    05 4D 4F 54    C      CMOTOR: db 5,'MOTOR'
  66C9    4F 52          C
  66CB    66A8           C         dw CASS
  66CD    66CF           C         dw $+2
  66CF    E1             C         pop hl
  66D0    7D             C         ld a,l
  66D1    CD 00F3        C         call 0F3H
  66D4    C3 46E7        C         jp RTI
                         C      ;
  66D7    06 53 54 41    C      CTAPION:db 6,'STAPE>'
  66DB    50 45 3E       C
  66DE    66C5           C         dw CMOTOR
  66E0    66E2           C      TAPION:   dw $+2
  66E2    CD 6D65        C         call SAVEREGS
  66E5    CD 00E1        C         call 00E1H
  66E8    CD 6D72        C         call RESTREGS
  66EB    21 FFFF        C         ld hl,-1
  66EE    DA 46E6        C         jp c,RPhl
  66F1    2B             C         dec hl
  66F2    C3 46E6        C         jp RPhl
                         C      ;
  66F5    05 54 41 50    C      CTAPIN:   db 5,'TAPE>'
  66F9    45 3E          C
  66FB    66D7           C         dw CTAPION
  66FD    66FF           C      TAPIN:   dw $+2
  66FF    CD 6D65        C         call SAVEREGS
  6702    E1             C         pop hl      ; END.
  6703    D1             C         pop de      ; TAM.
  6704    D5             C      TAPIN0:   push de
  6705    E5             C         push hl
  6706    CD 00E4        C         call 00E4H
  6709    E1             C         pop hl
  670A    D1             C         pop de
  670B    38 08          C         jr c,TAPIN1
  670D    77             C         ld (hl),a
  670E    23             C         inc hl
  670F    1B             C         dec de
  6710    7B             C         ld a,e
  6711    B2             C         or d
  6712    20 F0          C         jr nz,TAPIN0
  6714    AF             C         xor a
  6715    CD 6D72        C      TAPIN1:   call RESTREGS
  6718    21 FFFF        C         ld hl,-1
  671B    DA 46E6        C         jp c,RPhl
  671E    23             C         inc hl
  671F    C3 46E6        C         jp RPhl
                         C      ;
  6722    06 45 54 41    C      CTAPIOF:db 6,'ETAPE>'
  6726    50 45 3E       C
  6729    66F5           C         dw CTAPIN
  672B    672D           C      TAPIOF:   dw $+2
  672D    CD 00E7        C         call 00E7H
  6730    C3 46E7        C         jp RTI
                         C      ;
  6733    06 3E 53 54    C      CTAPOON:db 6,'>STAPE'
  6737    41 50 45       C
  673A    6722           C         dw CTAPIOF
  673C    673E           C      TAPOON:   dw $+2
  673E    CD 6D65        C         call SAVEREGS
  6741    E1             C         pop hl
  6742    7D             C         ld a,l
  6743    CD 00EA        C         call 0EAH
  6746    CD 6D72        C         call RESTREGS
  6749    21 FFFF        C         ld hl,-1
  674C    DA 46E6        C         jp c,RPhl
  674F    23             C         inc hl
  6750    C3 46E6        C         jp RPhl
                         C      ;
  6753    05 3E 54 41    C      CTAPON:   db 5,'>TAPE'
  6757    50 45          C
  6759    6733           C         dw CTAPOON
  675B    675D           C      TAPON:   dw $+2
  675D    CD 6D65        C         call SAVEREGS
  6760    E1             C         pop hl      ; END.
  6761    D1             C         pop de      ; TAM.
  6762    D5             C      TAPON0:   push de
  6763    E5             C         push hl
  6764    7E             C         ld a,(hl)
  6765    CD 00ED        C         call 00EDH
  6768    E1             C         pop hl
  6769    D1             C         pop de
  676A    38 07          C         jr c,TAPON1
  676C    23             C         inc hl
  676D    1B             C         dec de
  676E    7B             C         ld a,e
  676F    B2             C         or d
  6770    20 F0          C         jr nz,TAPON0
  6772    AF             C         xor a
  6773    CD 6D72        C      TAPON1:   call RESTREGS
  6776    21 FFFF        C         ld hl,-1
  6779    DA 46E6        C         jp c,RPhl
  677C    23             C         inc hl
  677D    C3 46E6        C         jp RPhl
                         C      ;
  6780    06 3E 45 54    C      CTAPOOF:db 6,'>ETAPE'
  6784    41 50 45       C
  6787    6753           C         dw CTAPON
  6789    678B           C      TAPOOF:   dw $+2
  678B    CD 00F0        C         call 00F0H
  678E    C3 46E7        C         jp RTI
                         C      ;
                         C         INCLUDE FORTHDSK.INC
                         C      ;
  6791    05 28 46 43    C      CFCBPS: db 5,'(FCB)'
  6795    42 29          C
  6797    6780           C              dw CTAPOOF
  6799    679B           C      FCBPS:  dw $+2
  679B    2A 4234        C              ld hl,(FCB)
  679E    C3 46E6        C              jp RPhl
                         C      ;
  67A1    03 46 43 42    C      CFCB: db 3,'FCB'
  67A5    6791           C            dw CFCBPS
  67A7    67A9           C            dw $+2
  67A9    21 4234        C            ld hl,FCB
  67AC    C3 46E6        C            jp RPhl
                         C      ;
  67AF    03 44 54 41    C      CDTA: db 3,'DTA'
  67B3    67A1           C            dw CFCB
  67B5    67B7           C      DTA:  dw $+2
  67B7    2A 4234        C            ld hl,(FCB)
  67BA    11 0028        C            ld de,40
  67BD    19             C            add hl,de
  67BE    C3 46E6        C            jp RPhl
                         C      ;
  67C1    02 41 3A       C      CDRVA: db 2,'A:'
  67C4    67AF           C             dw CDTA
  67C6    4717           C             dw FUN
  67C8    5640 000E      C             dw PUSHN,14,ZERO,DIOS,DROP,FIM
  67CC    6382 696E      C
  67D0    4886 46CD      C
                         C      ;
  67D4    02 42 3A       C      CDRVB: db 2,'B:'
  67D7    67C1           C             dw CDRVA
  67D9    4717           C             dw FUN
  67DB    5640 000E      C             dw PUSHN,14,ONE,DIOS,DROP,FIM
  67DF    6390 696E      C
  67E3    4886 46CD      C
                         C      ;
  67E7    08 46 49 4C    C      CFMASK: db 8,'FILEMASK'
  67EB    45 4D 41 53    C
  67EF    4B             C
  67F0    67D4           C              dw CDRVB
  67F2    67F4           C      FMASK:  dw $+2
  67F4    2A 4234        C              ld hl,(FCB)
  67F7    C5             C              push bc
  67F8    E5             C              push hl
  67F9    AF             C              xor a
  67FA    77             C              ld (hl),a
  67FB    E5             C              push hl
  67FC    D1             C              pop de
  67FD    13             C              inc de
  67FE    01 00A7        C              ld bc,167
  6801    ED B0          C              ldir   ; LIMPA FCB
  6803    E1             C              pop hl
  6804    C1             C              pop bc
  6805    D1             C              pop de
  6806    C5             C              push bc
  6807    13             C              inc de
  6808    1A             C              ld a,(de)
  6809    A7             C              and a
  680A    20 0F          C              jr nz,FLNMA
  680C    23             C              inc hl
  680D    3E 3F          C              ld a,'?'
  680F    77             C              ld (hl),a
  6810    E5             C              push hl
  6811    D1             C              pop de
  6812    13             C              inc de
  6813    01 000A        C              ld bc,10
  6816    ED B0          C              ldir
  6818    C3 6899        C              jp FLNM1+1
                         C
  681B    1B             C      FLNMA:  dec de
  681C    1A             C              ld a,(de)
  681D    F5             C              push af
  681E    47             C              ld b,a
  681F    0E 00          C              ld c,0
  6821    13             C      FLNMX:  inc de
  6822    1A             C              ld a,(de)
  6823    FE 20          C              cp 32
  6825    20 03          C              jr nz,FLNMX1
  6827    05             C              dec b
  6828    18 F7          C              jr FLNMX
                         C
  682A    F5             C      FLNMX1: push af
  682B    D5             C              push de
  682C    13             C              inc de
  682D    1A             C              ld a,(de)
  682E    D1             C              pop de
  682F    1B             C              dec de
  6830    FE 3A          C              cp ":"
  6832    20 30          C              jr nz,FLNMY
  6834    13             C              inc de
  6835    13             C              inc de
  6836    F1             C              pop af
  6837    FE 41          C              cp 'A'
  6839    FA 6920        C              jp m,ERRNM3
  683C    FE 45          C              cp 'E'
  683E    F2 6845        C              jp p,FLNMN
  6841    D6 40          C              sub 40H
  6843    18 0C          C              jr FLNMM
  6845    FE 61          C      FLNMN:  cp 'a'
  6847    FA 6920        C              jp m,ERRNM3
  684A    FE 65          C              cp 'e'
  684C    F2 6920        C              jp p,ERRNM3
  684F    D6 60          C              sub 60H
  6851    77             C      FLNMM:  ld (hl),a
  6852    05             C              dec b
  6853    10 0E          C              djnz FLNM
  6855    23             C              inc hl
  6856    3E 3F          C              ld a,'?'
  6858    77             C              ld (hl),a
  6859    E5             C              push hl
  685A    D1             C              pop de
  685B    13             C              inc de
  685C    01 000A        C              ld bc,10
  685F    ED B0          C              ldir
  6861    18 35          C              jr FLNM1
                         C
  6863    F5             C      FLNM:   push af
  6864    F1             C      FLNMY:  pop af
  6865    23             C      FLNMZ:  inc hl
  6866    13             C              inc de
  6867    1A             C              ld a,(de)
  6868    FE 2E          C              cp '.'
  686A    20 0A          C              jr nz,FLNM2
  686C    3E 20          C              ld a,32
  686E    32 6929        C              ld (FLL+1),a
  6871    CD 6928        C              call FLL
  6874    18 3E          C              jr EXT
                         C
  6876    FE 2A          C      FLNM2: cp '*'
  6878    20 26          C             jr nz,FLNM3
  687A    3E 3F          C             ld a,'?'
  687C    32 6929        C             ld (FLL+1),a
  687F    CD 6928        C             call FLL
  6882    05             C      FLNM4: dec b
  6883    13             C             inc de
  6884    1A             C             ld a,(de)
  6885    FE 2E          C             cp '.'
  6887    28 2B          C             jr z,EXT
  6889    0C             C             inc c
  688A    79             C             ld a,c
  688B    FE 0C          C             cp 12
  688D    FA 6882        C             jp m,FLNM4
  6890    06 03          C             ld b,3
  6892    3E 20          C             ld a,32
  6894    77             C      FLNM5: ld (hl),a
  6895    23             C             inc hl
  6896    10 FC          C             djnz FLNM5
  6898    F1             C      FLNM1: pop af
  6899    C1             C             pop bc
  689A    21 0000        C             ld hl,0
  689D    C3 46E6        C             jp RPhl
                         C
  68A0    CD 68F7        C      FLNM3: call VERNOM
  68A3    77             C             ld (hl),a
  68A4    0C             C             inc c
  68A5    79             C             ld a,c
  68A6    FE 0C          C             cp 12
  68A8    F2 6898        C             jp p,FLNM1
  68AB    10 B8          C             djnz FLNMZ
  68AD    3E 0B          C             ld a,11
  68AF    91             C             sub c
  68B0    47             C             ld b,a
  68B1    23             C             inc hl
  68B2    18 DE          C             jr FLNM5-2
                         C      ;
  68B4    F1             C      EXT:   pop af
  68B5    F5             C             push af
  68B6    B8             C             cp b
  68B7    28 5F          C             jr z,ERRNM1
  68B9    79             C             ld a,c
  68BA    FE 0A          C             cp 10
  68BC    F2 6918        C             jp p,ERRNM1
  68BF    13             C             inc de
  68C0    05             C             dec b
  68C1    0E 00          C             ld c,0
  68C3    1A             C      EXT1:  ld a,(de)
  68C4    FE 2A          C             cp '*'
  68C6    20 0F          C             jr nz,EXT2
  68C8    3E 05          C             ld a,5
  68CA    81             C             add a,c
  68CB    4F             C             ld c,a
  68CC    3E 3F          C             ld a,'?'
  68CE    32 6929        C             ld (FLL+1),a
  68D1    CD 6928        C             call FLL
  68D4    C3 6898        C             jp FLNM1
  68D7    CD 68F7        C      EXT2:  call VERNOM
  68DA    77             C             ld (hl),a
  68DB    23             C             inc hl
  68DC    13             C             inc de
  68DD    0C             C             inc c
  68DE    79             C             ld a,c
  68DF    FE 04          C             cp 4
  68E1    F2 6898        C             jp p,FLNM1
  68E4    10 DD          C             djnz EXT1
  68E6    3E 05          C             ld a,5
  68E8    81             C             add a,c
  68E9    4F             C             ld c,a
  68EA    FE 08          C             cp 8
  68EC    3E 20          C             ld a,32
  68EE    32 6929        C             ld (FLL+1),a
  68F1    FC 6928        C             call m,FLL
  68F4    C3 6898        C             jp FLNM1
                         C      ;
  68F7    FE 21          C      VERNOM: cp 33
  68F9    FA 6917        C              jp m,ERRNOM
  68FC    E5             C              push hl
  68FD    C5             C              push bc
  68FE    21 690B        C              ld hl,TABERRN
  6901    01 000C        C              ld bc,ERRNOM-TABERRN
  6904    ED B1          C              cpir
  6906    C1             C              pop bc
  6907    E1             C              pop hl
  6908    28 0D          C              jr z,ERRNOM
  690A    C9             C              ret
                         C      ;
  690B    22 2B 2C 2F    C      TABERRN: db '"+,/:;<=>[\]'
  690F    3A 3B 3C 3D    C
  6913    3E 5B 5C 5D    C
                         C      ;
  6917    F1             C      ERRNOM: pop af
  6918    F1             C      ERRNM1: pop af
  6919    C1             C      ERRNM2: pop bc
  691A    21 FFFF        C              ld hl,-1
  691D    C3 46E6        C              jp RPhl
  6920    F1             C      ERRNM3: pop af
  6921    C1             C              pop bc
  6922    21 0001        C              ld hl,1
  6925    C3 46E6        C              jp RPhl
                         C      ;
  6928    3E 00          C      FLL: ld a,0
  692A    77             C           ld (hl),a
  692B    23             C           inc hl
  692C    0C             C           inc c
  692D    79             C           ld a,c
  692E    FE 08          C           cp 8
  6930    FA 6928        C           jp m,FLL
  6933    C9             C           ret
                         C      ;
  6934    04 42 44 4F    C      CBDOS: db 4,'BDOS'
  6938    53             C
  6939    67E7           C             dw CFMASK
  693B    693D           C      BDOS:  dw $+2
  693D    ED 43 425F     C             ld (PF),bc
  6941    DD 22 4261     C             ld (PC),ix
  6945    FD 22 432D     C             ld (VAR3),iy
  6949    D1             C             pop de   ;PEGA de
  694A    C1             C             pop bc   ;PEGA bc
  694B    E1             C             pop hl   ;PEGA Acc
  694C    7D             C             ld a,l
  694D    21 6955        C             ld hl,BDS1
  6950    E5             C             push hl
  6951    2A 4232        C             ld hl,(BDS)
  6954    E9             C             jp (hl)
  6955    FD 2A 432D     C      BDS1:  ld iy,(VAR3)
  6959    DD 2A 4261     C             ld ix,(PC)
  695D    ED 4B 425F     C             ld bc,(PF)
  6961    6F             C             ld l,a
  6962    26 00          C             ld h,0
  6964    C3 46E6        C             jp RPhl
                         C      ;
  6967    04 44 49 4F    C      CDIOS: db 4,'DIOS'
  696B    53             C
  696C    6934           C             dw CBDOS
  696E    6970           C      DIOS:  dw $+2
  6970    D1             C             pop de
  6971    E1             C             pop hl
  6972    E5             C             push hl
  6973    E5             C             push hl
  6974    D5             C             push de
  6975    18 C6          C             jr BDOS+2
                         C      ;
  6977    06 45 52 52    C      CERRDSK: db 6,'ERRDSK'
  697B    44 53 4B       C
  697E    6967           C               dw CDIOS
  6980    4717           C      ERRDSK:  dw FUN
  6982    47C2 6382      C               dw DUP,ZERO,IGU,BRCH0,ERRD0
  6986    481E 4E64      C
  698A    6990           C
  698C    4E79 6A61      C               dw BRCH,ERRFIM+4
  6990    47C2 6390      C      ERRD0:   dw DUP,ONE,IGU,BRCH0,ERRD1,DISP
  6994    481E 4E64      C
  6998    69AB 5802      C
  699C    0A 4E B0 4F    C               db 10,'N',0B0H,'O ACHADO'
  69A0    20 41 43 48    C
  69A4    41 44 4F       C
  69A7    4E79 6A5D      C               dw BRCH,ERRFIM
  69AB    47C2 639E      C      ERRD1:   dw DUP,TWO,IGU,BRCH0,ERRD2,DISP
  69AF    481E 4E64      C
  69B3    69CA 5802      C
  69B7    0E 44 52 49    C               db 14,'DRIVE INV',84H,'LIDO'
  69BB    56 45 20 49    C
  69BF    4E 56 84 4C    C
  69C3    49 44 4F       C
  69C6    4E79 6A5D      C               dw BRCH,ERRFIM
  69CA    47C2 63AE      C      ERRD2:   dw DUP,THREE,IGU,BRCH0,ERRD3,DISP
  69CE    481E 4E64      C
  69D2    69F3 5802      C
  69D6    18 4E 4F 4D    C               db 24,'NOME DE ARQUIVO INV',84H,'LIDO'
  69DA    45 20 44 45    C
  69DE    20 41 52 51    C
  69E2    55 49 56 4F    C
  69E6    20 49 4E 56    C
  69EA    84 4C 49 44    C
  69EE    4F             C
  69EF    4E79 6A5D      C               dw BRCH,ERRFIM
  69F3    47C2 5640      C      ERRD3:   dw DUP,PUSHN,4,IGU,BRCH0,ERRD4,DISP
  69F7    0004 481E      C
  69FB    4E64 6A11      C
  69FF    5802           C
  6A01    0B 44 49 53    C               db 11,'DISCO CHEIO'
  6A05    43 4F 20 43    C
  6A09    48 45 49 4F    C
  6A0D    4E79 6A5D      C               dw BRCH,ERRFIM
  6A11    47C2 5640      C      ERRD4:   dw DUP,PUSHN,5,IGU,BRCH0,ERRD5,DISP
  6A15    0005 481E      C
  6A19    4E64 6A33      C
  6A1D    5802           C
  6A1F    0F 44 49 52    C               db 15,'DIRET',8AH,'RIO CHEIO'
  6A23    45 54 8A 52    C
  6A27    49 4F 20 43    C
  6A2B    48 45 49 4F    C
  6A2F    4E79 6A5D      C               dw BRCH,ERRFIM
  6A33    5802           C      ERRD5:   dw DISP
  6A35    1D 45 52 52    C               db 29,'ERRO DE DISCO INDETERMINADO ('
  6A39    4F 20 44 45    C
  6A3D    20 44 49 53    C
  6A41    43 4F 20 49    C
  6A45    4E 44 45 54    C
  6A49    45 52 4D 49    C
  6A4D    4E 41 44 4F    C
  6A51    20 28          C
  6A53    47C2 5533      C               dw DUP,IMPSS,PUSHN,')',EMIT
  6A57    5640 0029      C
  6A5B    48BD           C
  6A5D    5990 4886      C      ERRFIM:  dw CR,DROP,FIM
  6A61    46CD           C
                         C      ;
  6A63    05 46 49 4C    C      CFILES: db 5,'FILES'
  6A67    45 53          C
  6A69    6977           C              dw CERRDSK
  6A6B    4717           C              dw FUN
  6A6D    44A3 5041      C              dw LNCOND,BLANK
  6A71    4B1B 56C4      C              dw WORD,HERE,FMASK,DUP,IGU0
  6A75    67F2 47C2      C
  6A79    4855           C
  6A7B    4E64 6B25      C              dw BRCH0,FILES1,DROP,PUSHN,MSX_LINLEN
  6A7F    4886 5640      C
  6A83    F3B0           C
  6A85    4D2E 5640      C              dw PEK8,PUSHN,13,DVMOD,MENOS1,PUSHN
  6A89    000D 641F      C
  6A8D    62D7 5640      C
  6A91    4329 4CE4      C              dw VAR1,POK16,PUSHN,VAR2,POK16
  6A95    5640 432B      C
  6A99    4CE4           C
  6A9B    5640 001A      C              dw PUSHN,26,DTA,DIOS,PUSHN,17
  6A9F    67B5 696E      C
  6AA3    5640 0011      C
  6AA7    6799 693B      C              dw FCBPS,BDOS,DUP,IGU0,BRCH0
  6AAB    47C2 4855      C
  6AAF    4E64           C
  6AB1    6B1D 6373      C              dw FILES2,TRUE,PUSHN,NL,POK16
  6AB5    5640 4263      C
  6AB9    4CE4           C
  6ABB    4855 4E64      C      FILES3: dw IGU0,BRCH0,FILES4,PUSHN,NL,PEK16
  6ABF    6B37 5640      C
  6AC3    4263 4CF2      C
  6AC7    5953 47C2      C              dw MAIS1,DUP,PUSHN,NL,POK16,PUSHN
  6ACB    5640 4263      C
  6ACF    4CE4 5640      C
  6AD3    4329 4CF2      C              dw VAR1,PEK16,MAIOR,BRCH0,FILES5
  6AD7    4814 4E64      C
  6ADB    6AF1           C
  6ADD    5640 432B      C              dw PUSHN,VAR2,PEK16,MAI0,BRCH0
  6AE1    4CF2 4869      C
  6AE5    4E64           C
  6AE7    6AEB 5990      C              dw FILES7,CR
  6AEB    5640 4263      C      FILES7: dw PUSHN,NL,RESET
  6AEF    4E3D           C
  6AF1    67B5 47C2      C      FILES5: dw DTA,DUP,MAIS1,PUSHN,8,TYPE
  6AF5    5953 5640      C
  6AF9    0008 554F      C
  6AFD    5640 002E      C              dw PUSHN,'.',EMIT,PUSHN,9,MAIS
  6B01    48BD 5640      C
  6B05    0009 4FD8      C
  6B09    5640 0003      C              dw PUSHN,3,TYPE,SPACE,PUSHN
  6B0D    554F 5051      C
  6B11    5640           C
  6B13    0012 6799      C              dw 18,FCBPS,DIOS,BRCH,FILES3
  6B17    696E 4E79      C
  6B1B    6ABB           C
  6B1D    6390 6980      C      FILES2: dw ONE,ERRDSK,DROP,FIM
  6B21    4886 46CD      C
  6B25    6390 481E      C      FILES1: dw ONE,IGU,BRCH0,FILES8,TWO
  6B29    4E64 6B33      C
  6B2D    639E           C
  6B2F    6980 46CD      C              dw ERRDSK,FIM
  6B33    63AE 6980      C      FILES8: dw THREE,ERRDSK
  6B37    5990 46CD      C      FILES4: dw CR,FIM
                         C      ;
  6B3B    04 4B 49 4C    C      CKILL: db 4,'KILL'
  6B3F    4C             C
  6B40    6A63           C             dw CFILES
  6B42    4717           C             dw FUN
  6B44    44A3 5041      C             dw LNCOND,BLANK,WORD,HERE
  6B48    4B1B 56C4      C
  6B4C    67F2 47C2      C             dw FMASK,DUP,DUP,IGU0,BRCH0
  6B50    47C2 4855      C
  6B54    4E64           C
  6B56    6BDD 4886      C             dw KILL1,DROP,FCBPS,MAIS1,PUSHN
  6B5A    6799 5953      C
  6B5E    5640           C
  6B60    000B 6382      C             dw 11,ZERO,B_LOOP
  6B64    4C3C           C
  6B66    4D4D 5640      C      KILL2: dw PE8I,PUSHN,'?',IGU,BRCH0,KILL7
  6B6A    003F 481E      C
  6B6E    4E64 6BC3      C
  6B72    4C6A 6B66      C             dw LOOP,KILL2,DISP
  6B76    5802           C
  6B78    14 0D 0A 41    C             db 20,0DH,0AH,'APAGA TUDO (S/N)? '
  6B7C    50 41 47 41    C
  6B80    20 54 55 44    C
  6B84    4F 20 28 53    C
  6B88    2F 4E 29 3F    C
  6B8C    20             C
  6B8D    48CD 47C2      C      KILL4: dw KEY,DUP,DUP,PUSHN,0DFH,AND
  6B91    47C2 5640      C
  6B95    00DF 631D      C
  6B99    47C2 47C2      C             dw DUP,DUP,PUSHN,'N',IGU,SWAP
  6B9D    5640 004E      C
  6BA1    481E 5246      C
  6BA5    5640 0053      C             dw PUSHN,'S',IGU,OR,BRCH0,KILL4
  6BA9    481E 632F      C
  6BAD    4E64 6B8D      C
  6BB1    5246 48BD      C             dw SWAP,EMIT,PUSHN,'S',IGU,BRCH0
  6BB5    5640 0053      C
  6BB9    481E 4E64      C
  6BBD    6BEF 4E79      C             dw KILL5,BRCH,KILL3
  6BC1    6BCB           C
  6BC3    4DEA 4DEA      C      KILL7: dw OUTRP,OUTRP,DROP,DROP
  6BC7    4886 4886      C
  6BCB    5640 0013      C      KILL3: dw PUSHN,19,FCBPS,DIOS,BRCH0
  6BCF    6799 696E      C
  6BD3    4E64           C
  6BD5    6BEF 6390      C             dw KILL5,ONE,ERRDSK,FIM
  6BD9    6980 46CD      C
  6BDD    6390 481E      C      KILL1: dw ONE,IGU,BRCH0,KILL6,TWO
  6BE1    4E64 6BEB      C
  6BE5    639E           C
  6BE7    6980 46CD      C             dw ERRDSK,FIM
  6BEB    63AE 6980      C      KILL6: dw THREE,ERRDSK
  6BEF    46CD           C      KILL5: dw FIM
                         C      ;

                                ;
  6BF1    06 42 41 43           CBACKUP: db 6,'BACKUP'
  6BF5    4B 55 50
  6BF8    6B3B                           dw CKILL
  6BFA    4717 5640                      dw FUN,PUSHN,MSX_INTFLG,DUP,DUP
  6BFE    FC9B 47C2
  6C02    47C2
  6C04    4D2E 5246                      dw PEK8,SWAP,ONE,SWAP,POK8,SWAP
  6C08    6390 5246
  6C0C    4D21 5246
  6C10    5990 6799                      dw CR,FCBPS,PUSHN,40,ZERO
  6C14    5640 0028
  6C18    6382
  6C1A    4CBC 5640                      dw FILL,PUSHN,NOMFORTH,FCBPS
  6C1E    6D59 6799
  6C22    5640 000C                      dw PUSHN,12,CMOVE,PUSHN,26,DTA
  6C26    4CD5 5640
  6C2A    001A 67B5
  6C2E    696E 5640                      dw DIOS,PUSHN,17,FCBPS,DIOS
  6C32    0011 6799
  6C36    696E
  6C38    4855 4E64                      dw IGU0,BRCH0,BACK1,DISP
  6C3C    6C91 5802
  6C40    24 20 20 20                    db 36,'   Arquivo ja existe.'
  6C44    41 72 71 75
  6C48    69 76 6F 20
  6C4C    6A 61 20 65
  6C50    78 69 73 74
  6C54    65 2E
  6C56    20 41 70 61                    db ' Apaga (S/N) ? '
  6C5A    67 61 20 28
  6C5E    53 2F 4E 29
  6C62    20 3F 20
  6C65    48CD 5640             BACK2:   dw KEY,PUSHN,0DFH,AND,DUP,PUSHN
  6C69    00DF 631D
  6C6D    47C2 5640
  6C71    0053 481E                      dw 'S',IGU,NOT,BRCH0,BACK3,DUP
  6C75    6355 4E64
  6C79    6C8D 47C2
  6C7D    5640 004E                      dw PUSHN,'N',IGU,BRCH0,BACK2
  6C81    481E 4E64
  6C85    6C65
  6C87    48BD 4E79                      dw EMIT,BRCH,BACK4
  6C8B    6D4E
  6C8D    48BD 5990             BACK3:   dw EMIT,CR
  6C91    5640 0016             BACK1:   dw PUSHN,22,FCBPS,DIOS,DUP
  6C95    6799 696E
  6C99    47C2
  6C9B    4E64 6CA3                      dw BRCH0,BACK5,ERRDSK,FIM
  6C9F    6980 46CD
  6CA3    5640 6D52             BACK5:   dw PUSHN,CABEC,PUSHN,HEADER,PUSHN
  6CA7    5640 41F9
  6CAB    5640
  6CAD    0007 4CD5                      dw 7,CMOVE,DROP,HERE,PUSHN,HEADER
  6CB1    4886 56C4
  6CB5    5640 41F9
  6CB9    4FE4 47C2                      dw MENOS,DUP,PUSHN,128,DVMOD,SWAP
  6CBD    5640 0080
  6CC1    641F 5246
  6CC5    4855 4E64                      dw IGU0,BRCH0,BACK6,MAIS1
  6CC9    6CCD 5953
  6CCD    47C2 5640             BACK6:   dw DUP,PUSHN,HEADER,SWAP,ZERO,B_LOOP
  6CD1    41F9 5246
  6CD5    6382 4C3C
  6CD9    47C2 67B5             BACK7:   dw DUP,DTA,PUSHN,128,CMOVE
  6CDD    5640 0080
  6CE1    4CD5
  6CE3    5640 0015                      dw PUSHN,21,FCBPS,DIOS,IGU0,NOT
  6CE7    6799 696E
  6CEB    4855 6355
  6CEF    4E64 6D1D                      dw BRCH0,BACK8,DISP
  6CF3    5802
  6CF5    1B 45 52 52                    db 27,'ERRO NA GRAVACAO DO ARQUIVO'
  6CF9    4F 20 4E 41
  6CFD    20 47 52 41
  6D01    56 41 43 41
  6D05    4F 20 44 4F
  6D09    20 41 52 51
  6D0D    55 49 56 4F
  6D11    4DEA 4DEA                      dw OUTRP,OUTRP,DROP,DROP,BRCH,BACK9+2
  6D15    4886 4886
  6D19    4E79 6D44
  6D1D    5640 0080             BACK8:   dw PUSHN,128,MAIS,LOOP,BACK7,DROP,CR,DISP
  6D21    4FD8 4C6A
  6D25    6CD9 4886
  6D29    5990 5802
  6D2D    14 52 45 47                    db 20,'REGISTROS GRAVADOS: '
  6D31    49 53 54 52
  6D35    4F 53 20 47
  6D39    52 41 56 41
  6D3D    44 4F 53 3A
  6D41    20
  6D42    5540 5990             BACK9:   dw IMPSU,CR,PUSHN,16,FCBPS,DIOS
  6D46    5640 0010
  6D4A    6799 696E
  6D4E    4D21 46CD             BACK4:   dw POK8,FIM
                                ;
                                ;  Cabecalho para Gravacao do arquivo
                                ; FORTHBKP.BIN
                                ;
  6D52    FE                    CABEC: DB 0FEH
  6D53    8200 B20D                    DW 8200H,KBO+4000H,8200H
  6D57    8200
                                ;
  6D59    00 46 4F 52           NOMFORTH: db 0,'FORTHBKPBIN'
  6D5D    54 48 42 4B
  6D61    50 42 49 4E
                                ;
                         C         INCLUDE FORTHMSX.INC
                         C      ;
  0041                   C      MSX_SCROFF   equ 41H
  0044                   C      MSX_SCRON    equ 44H
  0047                   C      MSX_WVDP     equ 47H
  004A                   C      MSX_RDVRAM   equ 4AH
  004D                   C      MSX_WRTVRAM  equ 4DH
  0056                   C      MSX_VFILL    equ 56H
  0059                   C      MSX_LDIRVR   equ 59H
  005C                   C      MSX_LDIRRV   equ 5CH
  005F                   C      MSX_CHGMOD   equ 5FH
  0062                   C      MSX_COLOR    equ 62H
  0093                   C      MSX_WRTPSG   equ 93H
  0096                   C      MSX_RDPSG    equ 96H
  009F                   C      MSX_CHRGET   equ 9FH
  00A2                   C      MSX_CON      equ 0A2H
  00A5                   C      MSX_PRN      equ 0A5H
  00A8                   C      MSX_SLOTCFG  equ 0A8H
  00AB                   C      MSX_PRNSTAT  equ 0ABH
  00C0                   C      MSX_BEEP     equ 0C0H
  00C6                   C      MSX_POSIT    equ 0C6H
  00CC                   C      MSX_HIDEKEYS equ 0CCH
  00CF                   C      MSX_SHOWKEYS equ 0CFH
  00D5                   C      MSX_GTSTCK   equ 0D5H
  00D8                   C      MSX_GTTRIG   equ 0D8H
  00DB                   C      MSX_GTPAD    equ 0DBH
  00DE                   C      MSX_GTPDL    equ 0DEH
  0777                   C      MSX_CLS      equ 0777H
  0D6A                   C      MSX_ISKEY    equ 0D6AH
                         C      ;
                         C
  6D65    ED 43 4329     C      SAVEREGS:ld (VAR1),bc
  6D69    DD 22 432B     C         ld (VAR2),ix
  6D6D    FD 22 432D     C         ld (VAR3),iy
  6D71    C9             C         ret
                         C      ;
  6D72    ED 4B 4329     C      RESTREGS:ld bc,(VAR1)
  6D76    DD 2A 432B     C         ld ix,(VAR2)
  6D7A    FD 2A 432D     C         ld iy,(VAR3)
  6D7E    C9             C         ret
                         C      ;
  6D7F    04 54 49 4D    C      CTIME:   db 4,'TIME'
  6D83    45             C
  6D84    6BF1           C         dw CBACKUP
  6D86    6D88           C         dw $+2
  6D88    21 FC9E        C         ld hl,0FC9EH
  6D8B    C3 46E6        C         jp RPhl
                         C      ;
  6D8E    05 46 53 54    C      CFSTOP:   db 5,'FSTOP'
  6D92    4F 50          C
  6D94    6D7F           C         dw CTIME
  6D96    6D98           C      FSTOP:   dw $+2
  6D98    21 FC9B        C         ld hl,MSX_INTFLG
  6D9B    C3 46E6        C         jp RPhl
                         C      ;
  6D9E    04 4C 4F 43    C      CLOCK:   db 4,'LOCK'
  6DA2    4B             C
  6DA3    6D8E           C         dw CFSTOP
  6DA5    6DA7           C      LOCK:   dw $+2
  6DA7    3E FF          C         ld a,-1
  6DA9    32 FC9B        C         ld (MSX_INTFLG),a
  6DAC    C3 46E7        C         jp RTI
                         C      ;
  6DAF    06 55 4E 4C    C      CULOCK:   db 6,'UNLOCK'
  6DB3    4F 43 4B       C
  6DB6    6D9E           C         dw CLOCK
  6DB8    6DBA           C      ULOCK:   dw $+2
  6DBA    AF             C         xor a
  6DBB    32 FC9B        C         ld (MSX_INTFLG),a
  6DBE    32 FC9B        C         ld (MSX_INTFLG),a
  6DC1    C3 46E7        C         jp RTI
                         C      ;
  6DC4    07 43 4F 4C    C      CCOLUMN:db 7,'COLUMNS'
  6DC8    55 4D 4E 53    C
  6DCC    6DAF           C         dw CULOCK
  6DCE    6DD0           C         dw $+2
  6DD0    E1             C         pop hl
  6DD1    7D             C         ld a,l
  6DD2    21 F3B0        C         ld hl,MSX_LINLEN
  6DD5    BE             C         cp (hl)
  6DD6    CA 46E7        C         jp z,RTI
  6DD9    77             C         ld (hl),a
  6DDA    F5             C         push af
  6DDB    C5             C         push bc
  6DDC    CD 469C        C         call CLS
  6DDF    CD 00CF        C         call MSX_SHOWKEYS
  6DE2    C1             C         pop bc
  6DE3    3A FCAF        C         ld a,(MSX_SCRMOD)
  6DE6    FE 02          C         cp 2
  6DE8    FA 6DF3        C         jp m,COL1
  6DEB    F1             C         pop af
  6DEC    3C             C         inc a
  6DED    32 425E        C         ld (NCOLG),a
  6DF0    C3 46E7        C         jp RTI
  6DF3    FE 01          C      COL1:   cp 1
  6DF5    20 07          C         jr nz,COL0
  6DF7    F1             C         pop af
  6DF8    32 F3AF        C         ld (MSX_LINL32),a
  6DFB    C3 46E7        C         jp RTI
  6DFE    F1             C      COL0:   pop af
  6DFF    32 F3AE        C         ld (MSX_LINL40),a
  6E02    C3 46E7        C         jp RTI
                         C      ;
  6E05    04 52 4F 57    C      CROWS:   db 4,'ROWS'
  6E09    53             C
  6E0A    6DC4           C         dw CCOLUMN
  6E0C    6E0E           C         dw $+2
  6E0E    E1             C         pop hl
  6E0F    7D             C         ld a,L
  6E10    21 F3B1        C         ld hl,MSX_CRTCNT
  6E13    BE             C         cp (hl)
  6E14    CA 46E7        C         jp z,RTI
  6E17    77             C         ld (hl),a
  6E18    C5             C         push bc
  6E19    CD 469C        C         call CLS
  6E1C    CD 00CF        C         call MSX_SHOWKEYS
  6E1F    C1             C         pop bc
  6E20    C3 46E7        C         jp RTI
                         C      ;
  6E23    06 43 41 4C    C      CCALSLT:db 6,'CALSLT'
  6E27    53 4C 54       C
  6E2A    6E05           C         dw CROWS
  6E2C    6E2E           C         dw $+2
  6E2E    CD 6D65        C         call SAVEREGS
  6E31    E1             C         pop hl
  6E32    7D             C         ld a,l
  6E33    32 6E40        C         ld (CALLS),a
  6E36    E1             C         pop hl
  6E37    22 6E41        C         ld (CALLS+1),hl
  6E3A    E1             C         pop hl
  6E3B    7D             C         ld a,l
  6E3C    C1             C         pop bc
  6E3D    D1             C         pop de
  6E3E    E1             C         pop hl
  6E3F    F7             C         rst 30H
  6E40    00             C      CALLS:   db 0
  6E41    0000           C         dw 0
  6E43    CD 6D72        C         call RESTREGS
  6E46    C3 46E7        C         jp RTI
                         C      ;
  6E49    02 56 21       C      CESCVRA:db 2,'V!'
  6E4C    6E23           C         dw CCALSLT
  6E4E    6E50           C         dw $+2
  6E50    D9             C         exx
  6E51    E1             C         pop hl
  6E52    D1             C         pop de
  6E53    7B             C         ld a,e
  6E54    CD 004D        C         call MSX_WRTVRAM
  6E57    C3 4B62        C         jp RG
                         C      ;
  6E5A    02 56 40       C      CLEVRAM:db 2,'V@'
  6E5D    6E49           C         dw CESCVRA
  6E5F    6E61           C         dw $+2
  6E61    D9             C         exx
  6E62    E1             C         pop hl
  6E63    CD 004A        C         call MSX_RDVRAM
  6E66    26 00          C         ld h,0
  6E68    6F             C         ld l,a
  6E69    E5             C         push hl
  6E6A    C3 4B62        C         jp RG
                         C      ;
  6E6D    06 4C 44 49    C      CLDIRVR:db 6,'LDIRVR'
  6E71    52 56 52       C
  6E74    6E5A           C         dw CLEVRAM
  6E76    6E78           C         dw $+2
  6E78    D9             C         exx
  6E79    C1             C         pop bc
  6E7A    D1             C         pop de
  6E7B    E1             C         pop hl
  6E7C    CD 0059        C         call MSX_LDIRVR
  6E7F    C3 4B62        C         jp RG
                         C      ;
  6E82    06 4C 44 49    C      CLDIRRV:db 6,'LDIRRV'
  6E86    52 52 56       C
  6E89    6E6D           C         dw CLDIRVR
  6E8B    6E8D           C         dw $+2
  6E8D    D9             C         exx
  6E8E    C1             C         pop bc
  6E8F    D1             C         pop de
  6E90    E1             C         pop hl
  6E91    CD 005C        C         call MSX_LDIRRV
  6E94    C3 4B62        C         jp RG
                         C      ;
  6E97    05 56 46 49    C      CVFILL:   db 5,'VFILL'
  6E9B    4C 4C          C
  6E9D    6E82           C         dw CLDIRRV
  6E9F    6EA1           C         dw $+2
  6EA1    D9             C         exx
  6EA2    E1             C         pop hl
  6EA3    7D             C         ld a,l
  6EA4    C1             C         pop bc
  6EA5    E1             C         pop hl
  6EA6    CD 0056        C         call MSX_VFILL
  6EA9    C3 4B62        C         jp RG
                         C      ;
  6EAC    06 53 43 52    C      CSCREEN:db 6,'SCREEN'
  6EB0    45 45 4E       C
  6EB3    6E97           C         dw CVFILL
  6EB5    6EB7           C         dw $+2
  6EB7    D9             C         exx
  6EB8    E1             C         pop hl
  6EB9    7D             C         ld a,l
  6EBA    32 FCAF        C         ld (MSX_SCRMOD),a
  6EBD    F5             C         push af
  6EBE    CD 005F        C         call MSX_CHGMOD
  6EC1    21 0101        C         ld hl,0101H
  6EC4    22 F3DC        C         ld (MSX_CSRY),hl
  6EC7    F1             C         pop af
  6EC8    FE 02          C         cp 2
  6ECA    FA 6ED6        C         jp m,SCRN0
  6ECD    3A 425E        C         ld a,(NCOLG)
  6ED0    32 F3B0        C         ld (MSX_LINLEN),a
  6ED3    C3 4B62        C         jp RG
                         C      ;
  6ED6    D9             C      SCRN0:   exx
  6ED7    2A 4274        C         ld hl,(TABCAR)
  6EDA    C3 7196        C         jp PUTT
                         C      ;
  6EDD    03 53 43 52    C      CSCR:   db 3,'SCR'
  6EE1    6EAC           C         dw CSCREEN
  6EE3    6EE5           C         dw $+2
  6EE5    D1             C         pop de
  6EE6    C5             C         push bc
  6EE7    7B             C         ld a,e
  6EE8    B2             C         or d
  6EE9    20 07          C         jr nz,SCRON
  6EEB    CD 0041        C         call MSX_SCROFF
  6EEE    C1             C         pop bc
  6EEF    C3 46E7        C         jp RTI
                         C      ;
  6EF2    CD 0044        C      SCRON:   call MSX_SCRON
  6EF5    C1             C         pop bc
  6EF6    C3 46E7        C         jp RTI
                         C      ;
  6EF9    04 56 44 50    C      CESCVDP:db 4,'VDP!'
  6EFD    21             C
  6EFE    6EDD           C         dw CSCR
  6F00    6F02           C         dw $+2
  6F02    D9             C         exx
  6F03    E1             C         pop hl
  6F04    4D             C         ld c,l
  6F05    E1             C         pop hl
  6F06    45             C         ld b,l
  6F07    CD 0047        C         call MSX_WVDP
  6F0A    C3 4B62        C         jp RG
                         C      ;
  6F0D    04 56 44 50    C      CLEVDP:   db 4,'VDP@'
  6F11    40             C
  6F12    6EF9           C         dw CESCVDP
  6F14    6F16           C         dw $+2
  6F16    D1             C         pop de
  6F17    21 F3DF        C         ld hl,MSX_RG0SAV
  6F1A    19             C         add hl,de
  6F1B    5E             C         ld e,(hl)
  6F1C    16 00          C         ld d,0
  6F1E    C3 46E7        C         jp RTI
                         C      ;
  6F21    03 49 4E 4B    C      CINK:   db 3,'INK'
  6F25    6F0D           C         dw CLEVDP
  6F27    6F29           C         dw $+2
  6F29    21 F3E9        C         ld hl,MSX_FORCLR
  6F2C    D1             C      NK:   pop de
  6F2D    C5             C         push bc
  6F2E    7B             C         ld a,e
  6F2F    77             C         ld (hl),a
  6F30    CD 0062        C         call MSX_COLOR
  6F33    C1             C         pop bc
  6F34    3A F3E9        C         ld a,(MSX_FORCLR)
  6F37    32 F3F2        C         ld (MSX_ATRBYT),a
  6F3A    C3 46E7        C         jp RTI
                         C      ;
  6F3D    05 50 41 50    C      CPAPER:   db 5,'PAPER'
  6F41    45 52          C
  6F43    6F21           C         dw CINK
  6F45    6F47           C         dw $+2
  6F47    21 F3EA        C         ld hl,MSX_BAKCLR
  6F4A    18 E0          C         jr NK
                         C      ;
  6F4C    06 42 4F 52    C      CBORDER:db 6,'BORDER'
  6F50    44 45 52       C
  6F53    6F3D           C         dw CPAPER
  6F55    6F57           C         dw $+2
  6F57    21 F3EB        C         ld hl,MSX_BDRCLR
  6F5A    18 D0          C         jr NK
                         C      ;
  6F5C    05 42 41 53    C      CESCTB:   db 5,'BASE!'
  6F60    45 21          C
  6F62    6F4C           C         dw CBORDER
  6F64    6F66           C         dw $+2
  6F66    E1             C         pop hl
  6F67    29             C         add hl,hl
  6F68    11 F3B3        C         ld de,MSX_TXTNAM
  6F6B    19             C         add hl,de
  6F6C    D1             C         pop de
  6F6D    73             C         ld (hl),e
  6F6E    23             C         inc hl
  6F6F    72             C         ld (hl),d
  6F70    C3 46E7        C         jp RTI
                         C      ;
  6F73    05 42 41 53    C      CLETAB:   db 5,'BASE@'
  6F77    45 40          C
  6F79    6F5C           C         dw CESCTB
  6F7B    6F7D           C         dw $+2
  6F7D    E1             C         pop hl
  6F7E    29             C         add hl,hl
  6F7F    11 F3B3        C         ld de,MSX_TXTNAM
  6F82    19             C         add hl,de
  6F83    5E             C         ld e,(hl)
  6F84    23             C         inc hl
  6F85    56             C         ld d,(hl)
  6F86    D5             C         push de
  6F87    C3 46E7        C         jp RTI
                         C      ;
  6F8A    06 53 45 54    C      CSETINK:db 6,'SETINK'
  6F8E    49 4E 4B       C
  6F91    6F73           C         dw CLETAB
  6F93    6F95           C         dw $+2
  6F95    E1             C         pop hl
  6F96    7D             C         ld a,l
  6F97    32 F3F2        C         ld (MSX_ATRBYT),a
  6F9A    C3 46E7        C         jp RTI
                         C      ;
  6F9D    04 50 53 45    C      CPSET:   db 4,'PSET'
  6FA1    54             C
  6FA2    6F8A           C         dw CSETINK
  6FA4    6FA6           C      PSET:   dw $+2
  6FA6    D9             C         exx
  6FA7    E1             C         pop hl
  6FA8    22 FCB9        C         ld (MSX_GRPACY),hl
  6FAB    EB             C         ex de,hl
  6FAC    E1             C         pop hl
  6FAD    22 FCB7        C         ld (MSX_GRPACX),hl
  6FB0    4D             C         ld c,l
  6FB1    44             C         ld b,h
  6FB2    CD 010E        C         call 010EH
  6FB5    CD 0111        C         call 0111H
  6FB8    CD 0120        C         call 0120H
  6FBB    3A F3E9        C         ld a,(MSX_FORCLR)
  6FBE    32 F3F2        C         ld (MSX_ATRBYT),a
  6FC1    C3 4B62        C         jp RG
                         C      ;
  6FC4    06 50 52 45    C      CPRESET:db 6,'PRESET'
  6FC8    53 45 54       C
  6FCB    6F9D           C         dw CPSET
  6FCD    6FCF           C         dw $+2
  6FCF    3A F3EA        C         ld a,(MSX_BAKCLR)
  6FD2    32 F3F2        C         ld (MSX_ATRBYT),a
  6FD5    18 CF          C         jr PSET+2
                         C      ;
  6FD7    06 46 4F 4F    C      CFOOT:   db 6,'FOOTER'
  6FDB    54 45 52       C
  6FDE    6FC4           C         dw CPRESET
  6FE0    6FE2           C         dw $+2
  6FE2    D9             C         exx
  6FE3    E1             C         pop hl
  6FE4    7D             C         ld a,l
  6FE5    B4             C         or h
  6FE6    28 06          C         jr z,FTOFF
  6FE8    CD 00CF        C         call MSX_SHOWKEYS
  6FEB    C3 4B62        C         jp RG
                         C      ;
  6FEE    CD 00CC        C      FTOFF:   call MSX_HIDEKEYS
  6FF1    C3 4B62        C         jp RG
                         C      ;
  6FF4    04 4C 49 4E    C      CLINE:   db 4,'LINE'
  6FF8    45             C
  6FF9    6FD7           C         dw CFOOT
  6FFB    6FFD           C         dw $+2
  6FFD    21 58FC        C         ld hl,58FCH
  7000    18 0C          C         jr LBF
                         C      ;
  7002    04 46 55 4C    C      CFULL:   db 4,'FULL'
  7006    4C             C
  7007    6FF4           C         dw CLINE
  7009    700B           C         dw $+2
  700B    21 58C1        C         ld hl,58C1H
  700E    22 7039        C      LBF:   ld (CLBF),hl
  7011    ED 43 4329     C         ld (VAR1),bc
  7015    E1             C         pop hl
  7016    22 FCB5        C         ld (MSX_GYPOS),hl
  7019    22 FCB9        C         ld (MSX_GRPACY),hl
  701C    E1             C         pop hl
  701D    22 FCB3        C         ld (MSX_GXPOS),hl
  7020    22 FCB7        C         ld (MSX_GRPACX),hl
  7023    D1             C         pop de
  7024    C1             C         pop bc
  7025    DD E5          C         push ix
  7027    FD E5          C         push iy
  7029    CD 7037        C         call LESLOT
  702C    ED 4B 4329     C         ld bc,(VAR1)
  7030    FD E1          C         pop iy
  7032    DD E1          C         pop ix
  7034    C3 46E7        C         jp RTI
                         C      ;
  7037    F7             C      LESLOT:   rst 30H
  7038    00             C         db 0
  7039    0000           C      CLBF:   dw 0
  703B    C9             C         ret
                         C      ;
  703C    03 42 4F 58    C      CBOX:   db 3,'BOX'
  7040    7002           C         dw CFULL
  7042    7044           C         dw $+2
  7044    21 5912        C         ld hl,5912H
  7047    18 C5          C         jr LBF
                         C      ;
  7049    03 47 52 58    C      CGRX:   db 3,'GRX'
  704D    703C           C         dw CBOX
  704F    7051           C         dw $+2
  7051    21 FCB7        C         ld hl,MSX_GRPACX
  7054    C3 46E6        C         jp RPhl
                         C      ;
  7057    03 47 52 59    C      CGRY:   db 3,'GRY'
  705B    7049           C         dw CGRX
  705D    705F           C         dw $+2
  705F    21 FCB9        C         ld hl,MSX_GRPACY
  7062    C3 46E6        C         jp RPhl
                         C      ;
  7065    04 53 54 45    C      CSTEP:   db 4,'STEP'
  7069    50             C
  706A    7057           C         dw CGRY
  706C    706E           C         dw $+2
  706E    ED 5B FCB7     C         ld de,(MSX_GRPACX)
  7072    2A FCB9        C         ld hl,(MSX_GRPACY)
  7075    C3 46E5        C         jp RPdehl
                         C      ;
  7078    05 43 4C 49    C      CCLICK:   db 5,'CLICK'
  707C    43 4B          C
  707E    7065           C         dw CSTEP
  7080    7082           C         dw $+2
  7082    21 F3DB        C         ld hl,MSX_CLIKSW
  7085    C3 46E6        C         jp RPhl
                         C      ;
  7088    05 53 4F 55    C      CSOUND:   db 5,'SOUND'
  708C    4E 44          C
  708E    7078           C         dw CCLICK
  7090    7092           C         dw $+2
  7092    E1             C         pop hl
  7093    7D             C         ld a,l
  7094    D3 A0          C         out (160),a
  7096    E1             C         pop hl
  7097    7D             C         ld a,l
  7098    D3 A1          C         out (161),a
  709A    C3 46E7        C         jp RTI
                         C      ;
  709D    04 50 53 47    C      CESCPSG:db 4,'PSG!'
  70A1    21             C
  70A2    7088           C         dw CSOUND
  70A4    70A6           C         dw $+2
  70A6    E1             C         pop hl
  70A7    7D             C         ld a,l
  70A8    D1             C         pop de
  70A9    C3 0093        C         jp MSX_WRTPSG
                         C      ;
  70AC    04 50 53 47    C      CLEPSG:   db 4,'PSG@'
  70B0    40             C
  70B1    709D           C         dw CESCPSG
  70B3    70B5           C         dw $+2
  70B5    E1             C         pop hl
  70B6    7D             C         ld a,l
  70B7    CD 0096        C         call MSX_RDPSG
  70BA    6F             C         ld l,a
  70BB    26 00          C         ld h,0
  70BD    C3 46E6        C         jp RPhl
                         C      ;
  70C0    08 3F 50 52    C      CSTTPRT:db 8,'?PRINTER'
  70C4    49 4E 54 45    C
  70C8    52             C
  70C9    70AC           C         dw CLEPSG
  70CB    70CD           C         dw $+2
  70CD    CD 0096        C         call MSX_RDPSG
  70D0    6F             C         ld l,a
  70D1    26 00          C         ld h,0
  70D3    C3 46E6        C         jp RPhl
                         C      ;
  70D6    05 53 54 49    C      CSTICK:   db 5,'STICK'
  70DA    43 4B          C
  70DC    70C0           C         dw CSTTPRT
  70DE    70E0           C         dw $+2
  70E0    CD 6D65        C         call SAVEREGS
  70E3    E1             C         pop hl
  70E4    7D             C         ld a,l
  70E5    CD 00D5        C         call MSX_GTSTCK
  70E8    6F             C         ld l,a
  70E9    26 00          C         ld h,0
  70EB    CD 6D72        C         call RESTREGS
  70EE    C3 46E6        C         jp RPhl
                         C      ;
  70F1    05 53 54 52    C      CSTRIG:   db 5,'STRIG'
  70F5    49 47          C
  70F7    70D6           C         dw CSTICK
  70F9    70FB           C         dw $+2
  70FB    CD 00D8        C         call MSX_GTTRIG
  70FE    6F             C         ld l,a
  70FF    67             C         ld h,a
  7100    C3 46E6        C         jp RPhl
                         C      ;
  7103    08 54 4F 55    C      CTOUCHP:db 8,'TOUCHPAD'
  7107    43 48 50 41    C
  710B    44             C
  710C    70F1           C         dw CSTRIG
  710E    7110           C         dw $+2
  7110    CD 6D65        C         call SAVEREGS
  7113    E1             C         pop hl
  7114    7D             C         ld a,l
  7115    CD 00DB        C         call MSX_GTPAD
  7118    6F             C         ld l,a
  7119    26 00          C         ld h,0
  711B    CD 6D72        C         call RESTREGS
  711E    C3 46E6        C         jp RPhl
                         C      ;
  7121    06 50 41 44    C      CPADDLE:db 6,'PADDLE'
  7125    44 4C 45       C
  7128    7103           C         dw CTOUCHP
  712A    712C           C         dw $+2
  712C    CD 6D65        C         call SAVEREGS
  712F    E1             C         pop hl
  7130    7D             C         ld a,l
  7131    CD 00DE        C         call MSX_GTPDL
  7134    6F             C         ld l,a
  7135    26 00          C         ld h,0
  7137    CD 6D72        C         call RESTREGS
  713A    C3 46E6        C         jp RPhl
                         C      ;
  713D    08 4B 45 59    C      CKEYBD: db 8,'KEYBOARD'
  7141    42 4F 41 52    C
  7145    44             C
  7146    7121           C         dw CPADDLE
  7148    714A           C         dw $+2
  714A    F3             C         di
  714B    D9             C         exx
  714C    C1             C         pop bc
  714D    41             C         ld b,c
  714E    2A F3F8        C         ld hl,(MSX_PUTPNT)
  7151    ED 5B F3FA     C      KEYBD1:   ld de,(MSX_GETPNT)
  7155    E5             C         push hl
  7156    23             C         inc hl
  7157    AF             C         xor a
  7158    ED 52          C         sbc hl,de
  715A    E1             C         pop hl
  715B    28 16          C         jr z,KEYBD3
  715D    D1             C         pop de
  715E    7B             C         ld a,e
  715F    77             C         ld (hl),a
  7160    23             C         inc hl
  7161    E5             C         push hl
  7162    11 FC18        C         ld de,0FC18H
  7165    AF             C         xor a
  7166    ED 52          C         sbc hl,de
  7168    E1             C         pop hl
  7169    FA 716F        C         jp m,KEYBD2
  716C    21 FBF0        C         ld hl,0FBF0H
  716F    10 E0          C      KEYBD2:   djnz KEYBD1
  7171    18 03          C         jr KEYBD4
  7173    D1             C      KEYBD3:   pop de
  7174    10 FD          C         djnz KEYBD3
  7176    22 F3F8        C      KEYBD4:   ld (MSX_PUTPNT),hl
  7179    FB             C         ei
  717A    C3 4B62        C         jp RG
                         C      ;
  717D    06 4E 45 57    C      CNEWCAR:db 6,'NEWCAR'
  7181    43 41 52       C
  7184    713D           C         dw CKEYBD
  7186    7188           C         dw $+2
  7188    21 A000        C         ld hl,0A000H
  718B    22 4274        C      PUTTAB:   ld (TABCAR),hl
  718E    3A FCAF        C         ld a,(MSX_SCRMOD)
  7191    FE 02          C         cp 2
  7193    F2 46E7        C         jp p,RTI
  7196    ED 5B F3B7     C      PUTT:   ld de,(MSX_TXTNAM+4)
  719A    A7             C         and a
  719B    28 04          C         jr z,PUTT1
  719D    ED 5B F3C1     C         ld de,(MSX_TXTNAM+14)
  71A1    C5             C      PUTT1:   push bc
  71A2    DD E5          C         push ix
  71A4    FD E5          C         push iy
  71A6    01 0800        C         ld bc,2048  ; 256 CARACT.
  71A9    CD 005C        C         call MSX_LDIRRV
  71AC    FD E1          C         pop iy
  71AE    DD E1          C         pop ix
  71B0    C1             C         pop bc
  71B1    C3 46E7        C         jp RTI
                         C      ;
  71B4    06 4E 4F 52    C      CNORML:   db 6,'NORMAL'
  71B8    4D 41 4C       C
  71BB    717D           C         dw CNEWCAR
  71BD    71BF           C         dw $+2
  71BF    21 1BBF        C         ld hl,1BBFH
  71C2    C3 718B        C         jp PUTTAB
                         C      ;
                                ;
  71C5    03 42 59 45           CBYE: db 3,'BYE'
  71C9    71B4                        dw CNORML
  71CB    71CD                        dw $+2
  71CD    CD 00D2                     call 0D2H
  71D0    21 4289                     ld hl,FNCKEYS
  71D3    11 F87F                     ld de,MSX_FNKSTR
  71D6    01 00A0                     ld bc,160
  71D9    ED B0                       ldir
  71DB    11 C000                     ld de,0C000H
  71DE    21 71FA                     ld hl,ROTRET
  71E1    01 0013                     ld bc,KBO-ROTRET
  71E4    ED B0                       ldir
  71E6    21 FFF0                     ld hl,0FFF0H
  71E9    22 F39A                     ld (0F39AH),hl
  71EC    21 7208                     ld hl,ROTVLT
  71EF    11 FFF0                     ld de,0FFF0H
  71F2    01 0004                     ld bc,FIMVLT-ROTVLT
  71F5    ED B0                       ldir
  71F7    C3 C000                     jp 0C000H
                                ;
  71FA    ED 7B 432F            ROTRET: ld sp,(SBAS)
  71FE    2A 4331                       ld hl,(RBAS)
  7201    E5                            push hl
  7202    3A 426C                       ld a,(SLOT1)
  7205    D3 A8                         out (MSX_SLOTCFG),a
  7207    C9                            ret
                                ;
  7208    F7                    ROTVLT: rst 30H
  7209    00                    SLTFOR: db 0
  720A    4200                          dw FORTH
                                ;
  720C    C9                    FIMVLT: ret
                                ;
  720D    00                    KBO: nop
                                ;
                                   .DEPHASE
                                ;
                                   end
Macros:
Symbols:
51C1 	_ATIVATE        5ECF 	_CONST          5917 	_DEFIN
6431 	_MOD            470B 	_RTI            5EE3 	_VAR
4C18 	ABORT           5276 	ABS             527D 	ABS1
5284 	ABS2            49C9 	ADDORG          63BE 	ALLOT
631D 	AND             50E7 	ASCI1           50D9 	ASCII
426E 	ATRIB           6280 	BA              6C91 	BACK1
6C65 	BACK2           6C8D 	BACK3           6D4E 	BACK4
6CA3 	BACK5           6CCD 	BACK6           6CD9 	BACK7
6D1D 	BACK8           6D42 	BACK9           4E9C 	BASE
426F 	BCOR            693B 	BDOS            4232 	BDS
6955 	BDS1            452D 	BEEP            425C 	BFTC
5041 	BLANK           4271 	BLINHA          4E79 	BRCH
4E64 	BRCH0           46DB 	BREAK           4539 	BS
4550 	BS1             454A 	BS2             51DD 	BUILDS
4C3C 	B_LOOP          521A 	C1632           6D52 	CABEC
4C10 	CABORT          5270 	CABS            49BF 	CADORG
6252 	CAGAIN          63B6 	CALLOT          6E40 	CALLS
6317 	CAND            4559 	CARRET          50D1 	CASCII
66A8 	CASS            6BF1 	CBACKUP         4E95 	CBASE
6934 	CBDOS           6201 	CBEGIN          62A0 	CBINARY
5039 	CBLANK          6F4C 	CBORDER         703C 	CBOX
4E70 	CBRCH           4E5A 	CBRCH0          6082 	CBUFFER
51D3 	CBUILDS         71C5 	CBYE            5213 	CC1632
6E23 	CCALSLT         7078 	CCLICK          4CCD 	CCMOVE
58CD 	CCMPILE         58EB 	CCMPL           5CCA 	CCNT32
5879 	CCODE           5931 	CCODI           4C23 	CCOLD
6DC4 	CCOLUMN         5583 	CCOMPILER       5EBC 	CCONST
555F 	CCONTEXT        499E 	CCOUNT          598B 	CCR
5709 	CCREATE         5791 	CCRIA           4A90 	CCRL
4A8E 	CCRS            5571 	CCURRENT        4A92 	CCURSOR
5288 	CDABS           5E51 	CDCONST         5A31 	CDDIF
5E9D 	CDDIV           5E1E 	CDDO            5ABF 	CDDROP
5998 	CDDUP           6272 	CDECIMAL        65E2 	CDEFSTR
4DB8 	CDEPTH          482F 	CDIF            50ED 	CDIGIT
59F3 	CDIGU           5A55 	CDIGU0          5C74 	CDINRP
6967 	CDIOS           57FD 	CDISP           6408 	CDIV
5D94 	CDJ             5E0B 	CDLEAVE         5CB4 	CDLERP
5E2E 	CDLOOP          5A63 	CDMAI0          59E6 	CDMAIOR
5D53 	CDMAIS          5A3F 	CDMEN0          59A8 	CDMENOR
5D72 	CDMENOS         56ED 	CDMINUS         4FEE 	CDMOD
525E 	CDMODUL         5836 	CDO             51A3 	CDOES
5C95 	CDOUTRP         5E40 	CDOVER          56B0 	CDP
5DF8 	CDPASSO         5DAA 	CDPICK          4959 	CDPL
5660 	CDPUSHN         5ACE 	CDRAND          5CE0 	CDRESET
5B03 	CDROLL          487F 	CDROP           5A73 	CDROT
67C1 	CDRVA           67D4 	CDRVB           5CF9 	CDSET
5B58 	CDSLA           5DDA 	CDSOMEM         5B75 	CDSRA
5DC2 	CDSWAP          67AF 	CDTA            645C 	CDTZ
47BC 	CDUP            47C9 	CDUPC           5E76 	CDVAR
5E87 	CDVARIAB        5D12 	CDVEZES         6418 	CDVMOD
4B80 	CECAPS          58A3 	CELSE           48B6 	CEMIT
5691 	CENTRY          4CA5 	CERASE          6977 	CERRDSK
709D 	CESCPSG         6F5C 	CESCTB          6EF9 	CESCVDP
6E49 	CESCVRA         4BF1 	CEXEC           57C1 	CEXIT
49E9 	CEXPECT         67A1 	CFCB            6791 	CFCBPS
6A63 	CFILES          4CB5 	CFILL           53D8 	CFIMNUM
57AF 	CFINAL          67E7 	CFMASK          6FD7 	CFOOT
60B8 	CFORGET         47B0 	CFORTH          6D8E 	CFSTOP
7002 	CFULL           4E08 	CFWORD          5923 	CF_DEF
7049 	CGRX            7057 	CGRY            56BD 	CHERE
6294 	CHEX            4967 	CHLD            6127 	CHLOOP
4975 	CHOLD           4C30 	CHOT            4D58 	CI16
4D64 	CI16I           4D71 	CI8             4D7E 	CI8I
5461 	CIDSFX          5498 	CIDUFX          57D2 	CIEXEC
5890 	CIF             481A 	CIGU            4850 	CIGU0
60F5 	CIMMEDIATE      54C8 	CIMPDS          540C 	CIMPDSF
54D5 	CIMPDU          5434 	CIMPDUF         54E3 	CIMPSF
552F 	CIMPSS          553B 	CIMPSU          54F4 	CIMPUF
60A5 	CINBUFF         6658 	CINCL           4749 	CINIC
5345 	CININUM         6F21 	CINK            48D8 	CINKEY
4DD0 	CINRP           6071 	CINTXT          55FB 	CINUMBER
635B 	CINV            55BD 	CISEARCH        5EFA 	CISERR
5504 	CISFX           551A 	CIUFX           5166 	CJ
48C7 	CKEY            713D 	CKEYBD          6B3B 	CKILL
7039 	CLBF            49B1 	CLBP            4BA0 	CLCASE
6E82 	CLDIRRV         6E6D 	CLDIRVR         5824 	CLEAVE
4E27 	CLELOOP         70AC 	CLEPSG          4DF9 	CLERP
6F73 	CLETAB          6F0D 	CLEVDP          6E5A 	CLEVRAM
6FF4 	CLINE           602F 	CLIST           6058 	CLOAD
6D9E 	CLOCK           5845 	CLOOP           469C 	CLS
48EB 	CLSTKEY         4864 	CMAI0           4810 	CMAIOR
4FD4 	CMAIS           594E 	CMAIS1          56FC 	CMAIS2
5206 	CMAISP          4E18 	CMARK_E         595A 	CMARK_S
50A5 	CMAX            483C 	CMEN0           62D2 	CMENO1
62DE 	CMENO2          47FB 	CMENOR          4FE0 	CMENOS
50BB 	CMIN            56DF 	CMINUS          5327 	CMMOD
642B 	CMOD            4C01 	CMODE           524D 	CMODUL
66C5 	CMOTOR          4CD5 	CMOVE           58D7 	CMPILE
63E1 	CM_DIV          63C6 	CM_VEZES        6679 	CNEW
717D 	CNEWCAR         511A 	CNEXT1          5131 	CNEXT2
514B 	CNEXT3          71B4 	CNORML          634F 	CNOT
62EB 	CNUIN           4EA4 	CNUMBER         5354 	CNUMCAR
537E 	CNUMFRM         6286 	COCTAL          4AA3 	COFFSET
6DFE 	COL0            6DF3 	COL1            558E 	COMPILER
638A 	CONE            4287 	CONS            44E5 	CONSOL
5EC7 	CONST           5569 	CONTEXT         632A 	COR
5FA1 	COUTIN          4DE5 	COUTRP          597B 	COVER
590F 	CP1             498C 	CPAD            7121 	CPADDLE
4E84 	CPAGE           6F3D 	CPAPER          5812 	CPASSO
4D0C 	CPE16I          4D47 	CPE8I           4CEE 	CPEK16
5C5F 	CPEK32          4D29 	CPEK8           5175 	CPESQ
522A 	CPICK           4CFC 	CPO16I          4D38 	CPO8I
4CE0 	CPOK16          5C3D 	CPOK32          4D1C 	CPOK8
564C 	CPOKD16         5677 	CPOKD32         5968 	CPOKD8
663A 	CPOSX           6649 	CPOSY           6478 	CPPEK
6489 	CPPOK           6FC4 	CPRESET         5856 	CPRINT
6629 	CPROMPT         6F9D 	CPSET           51E5 	CPTC
427C 	CPU             563B 	CPUSHN          5F11 	CQUESTION
4C1A 	CQUIT           5990 	CR              4AC1 	CRAND
572E 	CREAT1          573E 	CREAT2
